<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Bytestring.Builder.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Bytestrings: builder type and functions</a>
<a id="149" class="Comment">------------------------------------------------------------------------</a>

<a id="223" class="Symbol">{-#</a> <a id="227" class="Keyword">OPTIONS</a> <a id="235" class="Pragma">--cubical-compatible</a> <a id="256" class="Symbol">#-}</a>

<a id="261" class="Keyword">module</a> <a id="268" href="Data.Bytestring.Builder.Base.html" class="Module">Data.Bytestring.Builder.Base</a> <a id="297" class="Keyword">where</a>

<a id="304" class="Keyword">open</a> <a id="309" class="Keyword">import</a> <a id="316" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="330" class="Keyword">using</a> <a id="336" class="Symbol">(</a><a id="337" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="338" class="Symbol">;</a> <a id="340" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="344" class="Symbol">;</a> <a id="346" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="349" class="Symbol">;</a> <a id="351" href="Data.Nat.Base.html#7096" class="Function Operator">_/_</a><a id="354" class="Symbol">;</a> <a id="356" href="Data.Nat.Base.html#7279" class="Function Operator">_%_</a><a id="359" class="Symbol">;</a> <a id="361" href="Data.Nat.Base.html#6561" class="Function Operator">_^_</a><a id="364" class="Symbol">)</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Data.Word8.Base.html" class="Module">Data.Word8.Base</a> <a id="394" class="Symbol">as</a> <a id="397" class="Module">Word8</a> <a id="403" class="Keyword">using</a> <a id="409" class="Symbol">(</a><a id="410" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a><a id="415" class="Symbol">)</a>
<a id="417" class="Keyword">open</a> <a id="422" class="Keyword">import</a> <a id="429" href="Data.Word64.Base.html" class="Module">Data.Word64.Base</a> <a id="446" class="Symbol">as</a> <a id="449" class="Module">Word64</a> <a id="456" class="Keyword">using</a> <a id="462" class="Symbol">(</a><a id="463" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a><a id="469" class="Symbol">)</a>
<a id="471" class="Keyword">open</a> <a id="476" class="Keyword">import</a> <a id="483" href="Function.Base.html" class="Module">Function.Base</a> <a id="497" class="Keyword">using</a> <a id="503" class="Symbol">(</a><a id="504" href="Function.Base.html#3626" class="Function Operator">_∘′_</a><a id="508" class="Symbol">)</a>

<a id="511" class="Comment">------------------------------------------------------------------------------</a>
<a id="590" class="Comment">-- Re-export type and operations</a>

<a id="624" class="Keyword">open</a> <a id="629" class="Keyword">import</a> <a id="636" href="Data.Bytestring.Builder.Primitive.html" class="Module">Data.Bytestring.Builder.Primitive</a> <a id="670" class="Symbol">as</a> <a id="673" class="Module">Prim</a> <a id="678" class="Keyword">public</a>
  <a id="687" class="Keyword">using</a> <a id="693" class="Symbol">(</a> <a id="695" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a>
        <a id="711" class="Symbol">;</a> <a id="713" href="Data.Bytestring.Builder.Primitive.html#542" class="Postulate">toBytestring</a>
        <a id="734" class="Symbol">;</a> <a id="736" href="Data.Bytestring.Builder.Primitive.html#607" class="Postulate">bytestring</a>
        <a id="755" class="Symbol">;</a> <a id="757" href="Data.Bytestring.Builder.Primitive.html#643" class="Postulate">word8</a>
        <a id="771" class="Symbol">;</a> <a id="773" href="Data.Bytestring.Builder.Primitive.html#669" class="Postulate">empty</a>
        <a id="787" class="Symbol">;</a> <a id="789" href="Data.Bytestring.Builder.Primitive.html#687" class="Postulate Operator">_&lt;&gt;_</a>
        <a id="802" class="Symbol">)</a>

<a id="805" class="Comment">------------------------------------------------------------------------------</a>
<a id="884" class="Comment">-- High-level combinators</a>

<a id="911" class="Keyword">module</a> <a id="List"></a><a id="918" href="Data.Bytestring.Builder.Base.html#918" class="Module">List</a> <a id="923" class="Keyword">where</a>

  <a id="932" class="Keyword">open</a> <a id="937" class="Keyword">import</a> <a id="944" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="959" class="Symbol">as</a> <a id="962" class="Module">List</a> <a id="967" class="Keyword">using</a> <a id="973" class="Symbol">(</a><a id="974" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="978" class="Symbol">)</a>

  <a id="List.concat"></a><a id="983" href="Data.Bytestring.Builder.Base.html#983" class="Function">concat</a> <a id="990" class="Symbol">:</a> <a id="992" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="997" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a> <a id="1005" class="Symbol">→</a> <a id="1007" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a>
  <a id="1017" href="Data.Bytestring.Builder.Base.html#983" class="Function">concat</a> <a id="1024" class="Symbol">=</a> <a id="1026" href="Data.List.Base.html#4148" class="Function">List.foldr</a> <a id="1037" href="Data.Bytestring.Builder.Primitive.html#687" class="Postulate Operator">_&lt;&gt;_</a> <a id="1042" href="Data.Bytestring.Builder.Primitive.html#669" class="Postulate">empty</a>

<a id="1049" class="Keyword">module</a> <a id="Vec"></a><a id="1056" href="Data.Bytestring.Builder.Base.html#1056" class="Module">Vec</a> <a id="1060" class="Keyword">where</a>

  <a id="1069" class="Keyword">open</a> <a id="1074" class="Keyword">import</a> <a id="1081" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="1095" class="Symbol">as</a> <a id="1098" class="Module">Vec</a> <a id="1102" class="Keyword">using</a> <a id="1108" class="Symbol">(</a><a id="1109" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a><a id="1112" class="Symbol">)</a>

  <a id="Vec.concat"></a><a id="1117" href="Data.Bytestring.Builder.Base.html#1117" class="Function">concat</a> <a id="1124" class="Symbol">:</a> <a id="1126" class="Symbol">∀</a> <a id="1128" class="Symbol">{</a><a id="1129" href="Data.Bytestring.Builder.Base.html#1129" class="Bound">n</a><a id="1130" class="Symbol">}</a> <a id="1132" class="Symbol">→</a> <a id="1134" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1138" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a> <a id="1146" href="Data.Bytestring.Builder.Base.html#1129" class="Bound">n</a> <a id="1148" class="Symbol">→</a> <a id="1150" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a>
  <a id="1160" href="Data.Bytestring.Builder.Base.html#1117" class="Function">concat</a> <a id="1167" class="Symbol">=</a> <a id="1169" href="Data.Vec.Base.html#5736" class="Function">Vec.foldr′</a> <a id="1180" href="Data.Bytestring.Builder.Primitive.html#687" class="Postulate Operator">_&lt;&gt;_</a> <a id="1185" href="Data.Bytestring.Builder.Primitive.html#669" class="Postulate">empty</a>
<a id="1191" class="Keyword">open</a> <a id="1196" href="Data.Bytestring.Builder.Base.html#1056" class="Module">Vec</a>

<a id="1201" class="Comment">------------------------------------------------------------------------------</a>
<a id="1280" class="Comment">-- Generic word-specific combinators</a>

<a id="1318" class="Keyword">open</a> <a id="1323" class="Keyword">import</a> <a id="1330" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="1344" class="Symbol">as</a> <a id="1347" class="Module">Vec</a> <a id="1351" class="Keyword">using</a> <a id="1357" class="Symbol">(</a><a id="1358" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a><a id="1361" class="Symbol">;</a> <a id="1363" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="1365" class="Symbol">;</a> <a id="1367" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">_∷_</a><a id="1370" class="Symbol">)</a>

<a id="wordN"></a><a id="1373" href="Data.Bytestring.Builder.Base.html#1373" class="Function">wordN</a> <a id="1379" class="Symbol">:</a> <a id="1381" class="Symbol">∀</a> <a id="1383" class="Symbol">{</a><a id="1384" href="Data.Bytestring.Builder.Base.html#1384" class="Bound">n</a><a id="1385" class="Symbol">}</a> <a id="1387" class="Symbol">→</a> <a id="1389" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1393" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a> <a id="1399" href="Data.Bytestring.Builder.Base.html#1384" class="Bound">n</a> <a id="1401" class="Symbol">→</a> <a id="1403" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a>
<a id="1411" href="Data.Bytestring.Builder.Base.html#1373" class="Function">wordN</a> <a id="1417" class="Symbol">=</a> <a id="1419" href="Data.Bytestring.Builder.Base.html#1117" class="Function">concat</a> <a id="1426" href="Function.Base.html#3626" class="Function Operator">∘′</a> <a id="1429" href="Data.Vec.Base.html#2955" class="Function">Vec.map</a> <a id="1437" href="Data.Bytestring.Builder.Primitive.html#643" class="Postulate">word8</a>

<a id="toWord8sLE"></a><a id="1444" href="Data.Bytestring.Builder.Base.html#1444" class="Function">toWord8sLE</a> <a id="1455" class="Symbol">:</a> <a id="1457" class="Symbol">∀</a> <a id="1459" class="Symbol">{</a><a id="1460" href="Data.Bytestring.Builder.Base.html#1460" class="Bound">w</a><a id="1461" class="Symbol">}</a> <a id="1463" class="Symbol">{</a><a id="1464" href="Data.Bytestring.Builder.Base.html#1464" class="Bound">W</a> <a id="1466" class="Symbol">:</a> <a id="1468" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1472" href="Data.Bytestring.Builder.Base.html#1460" class="Bound">w</a><a id="1473" class="Symbol">}</a> <a id="1475" class="Symbol">(</a><a id="1476" href="Data.Bytestring.Builder.Base.html#1476" class="Bound">n</a> <a id="1478" class="Symbol">:</a> <a id="1480" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1481" class="Symbol">)</a> <a id="1483" class="Symbol">(</a><a id="1484" href="Data.Bytestring.Builder.Base.html#1484" class="Bound">toℕ</a> <a id="1488" class="Symbol">:</a> <a id="1490" href="Data.Bytestring.Builder.Base.html#1464" class="Bound">W</a> <a id="1492" class="Symbol">→</a> <a id="1494" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1495" class="Symbol">)</a> <a id="1497" class="Symbol">→</a> <a id="1499" href="Data.Bytestring.Builder.Base.html#1464" class="Bound">W</a> <a id="1501" class="Symbol">→</a> <a id="1503" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1507" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a> <a id="1513" href="Data.Bytestring.Builder.Base.html#1476" class="Bound">n</a>
<a id="1515" href="Data.Bytestring.Builder.Base.html#1444" class="Function">toWord8sLE</a> <a id="1526" href="Data.Bytestring.Builder.Base.html#1526" class="Bound">n</a> <a id="1528" href="Data.Bytestring.Builder.Base.html#1528" class="Bound">toℕ</a> <a id="1532" href="Data.Bytestring.Builder.Base.html#1532" class="Bound">w</a> <a id="1534" class="Symbol">=</a> <a id="1536" href="Data.Bytestring.Builder.Base.html#1560" class="Function">loop</a> <a id="1541" class="Symbol">(</a><a id="1542" href="Data.Bytestring.Builder.Base.html#1528" class="Bound">toℕ</a> <a id="1546" href="Data.Bytestring.Builder.Base.html#1532" class="Bound">w</a><a id="1547" class="Symbol">)</a> <a id="1549" href="Data.Bytestring.Builder.Base.html#1526" class="Bound">n</a> <a id="1551" class="Keyword">where</a>

  <a id="1560" href="Data.Bytestring.Builder.Base.html#1560" class="Function">loop</a> <a id="1565" class="Symbol">:</a> <a id="1567" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1569" class="Symbol">→</a> <a id="1571" class="Symbol">(</a><a id="1572" href="Data.Bytestring.Builder.Base.html#1572" class="Bound">n</a> <a id="1574" class="Symbol">:</a> <a id="1576" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1577" class="Symbol">)</a> <a id="1579" class="Symbol">→</a> <a id="1581" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1585" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a> <a id="1591" href="Data.Bytestring.Builder.Base.html#1572" class="Bound">n</a>
  <a id="1595" href="Data.Bytestring.Builder.Base.html#1560" class="Function">loop</a> <a id="1600" href="Data.Bytestring.Builder.Base.html#1600" class="Bound">acc</a> <a id="1604" class="Number">0</a> <a id="1606" class="Symbol">=</a> <a id="1608" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a>
  <a id="1613" href="Data.Bytestring.Builder.Base.html#1560" class="Function">loop</a> <a id="1618" href="Data.Bytestring.Builder.Base.html#1618" class="Bound">acc</a> <a id="1622" class="Number">1</a> <a id="1624" class="Symbol">=</a> <a id="1626" href="Data.Word8.Base.html#854" class="Postulate">Word8.fromℕ</a> <a id="1638" href="Data.Bytestring.Builder.Base.html#1618" class="Bound">acc</a> <a id="1642" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="1644" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a>
  <a id="1649" href="Data.Bytestring.Builder.Base.html#1560" class="CatchallClause Function">loop</a><a id="1653" class="CatchallClause"> </a><a id="1654" href="Data.Bytestring.Builder.Base.html#1654" class="CatchallClause Bound">acc</a><a id="1657" class="CatchallClause"> </a><a id="1658" class="CatchallClause Symbol">(</a><a id="1659" href="Agda.Builtin.Nat.html#234" class="CatchallClause InductiveConstructor">suc</a><a id="1662" class="CatchallClause"> </a><a id="1663" href="Data.Bytestring.Builder.Base.html#1663" class="CatchallClause Bound">n</a><a id="1664" class="CatchallClause Symbol">)</a> <a id="1666" class="Symbol">=</a> <a id="1668" href="Data.Word8.Base.html#854" class="Postulate">Word8.fromℕ</a> <a id="1680" class="Symbol">(</a><a id="1681" href="Data.Bytestring.Builder.Base.html#1654" class="Bound">acc</a> <a id="1685" href="Data.Nat.Base.html#7279" class="Function Operator">%</a> <a id="1687" class="Number">2</a> <a id="1689" href="Data.Nat.Base.html#6561" class="Function Operator">^</a> <a id="1691" class="Number">8</a><a id="1692" class="Symbol">)</a> <a id="1694" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="1696" href="Data.Bytestring.Builder.Base.html#1560" class="Function">loop</a> <a id="1701" class="Symbol">(</a><a id="1702" href="Data.Bytestring.Builder.Base.html#1654" class="Bound">acc</a> <a id="1706" href="Data.Nat.Base.html#7096" class="Function Operator">/</a> <a id="1708" class="Number">2</a> <a id="1710" href="Data.Nat.Base.html#6561" class="Function Operator">^</a> <a id="1712" class="Number">8</a><a id="1713" class="Symbol">)</a> <a id="1715" href="Data.Bytestring.Builder.Base.html#1663" class="Bound">n</a>

<a id="toWord8sBE"></a><a id="1718" href="Data.Bytestring.Builder.Base.html#1718" class="Function">toWord8sBE</a> <a id="1729" class="Symbol">:</a> <a id="1731" class="Symbol">∀</a> <a id="1733" class="Symbol">{</a><a id="1734" href="Data.Bytestring.Builder.Base.html#1734" class="Bound">w</a><a id="1735" class="Symbol">}</a> <a id="1737" class="Symbol">{</a><a id="1738" href="Data.Bytestring.Builder.Base.html#1738" class="Bound">W</a> <a id="1740" class="Symbol">:</a> <a id="1742" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1746" href="Data.Bytestring.Builder.Base.html#1734" class="Bound">w</a><a id="1747" class="Symbol">}</a> <a id="1749" class="Symbol">(</a><a id="1750" href="Data.Bytestring.Builder.Base.html#1750" class="Bound">n</a> <a id="1752" class="Symbol">:</a> <a id="1754" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1755" class="Symbol">)</a> <a id="1757" class="Symbol">(</a><a id="1758" href="Data.Bytestring.Builder.Base.html#1758" class="Bound">toℕ</a> <a id="1762" class="Symbol">:</a> <a id="1764" href="Data.Bytestring.Builder.Base.html#1738" class="Bound">W</a> <a id="1766" class="Symbol">→</a> <a id="1768" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1769" class="Symbol">)</a> <a id="1771" class="Symbol">→</a> <a id="1773" href="Data.Bytestring.Builder.Base.html#1738" class="Bound">W</a> <a id="1775" class="Symbol">→</a> <a id="1777" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1781" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a> <a id="1787" href="Data.Bytestring.Builder.Base.html#1750" class="Bound">n</a>
<a id="1789" href="Data.Bytestring.Builder.Base.html#1718" class="Function">toWord8sBE</a> <a id="1800" href="Data.Bytestring.Builder.Base.html#1800" class="Bound">n</a> <a id="1802" href="Data.Bytestring.Builder.Base.html#1802" class="Bound">toℕ</a> <a id="1806" href="Data.Bytestring.Builder.Base.html#1806" class="Bound">w</a> <a id="1808" class="Symbol">=</a> <a id="1810" href="Data.Vec.Base.html#8862" class="Function">Vec.reverse</a> <a id="1822" class="Symbol">(</a><a id="1823" href="Data.Bytestring.Builder.Base.html#1444" class="Function">toWord8sLE</a> <a id="1834" href="Data.Bytestring.Builder.Base.html#1800" class="Bound">n</a> <a id="1836" href="Data.Bytestring.Builder.Base.html#1802" class="Bound">toℕ</a> <a id="1840" href="Data.Bytestring.Builder.Base.html#1806" class="Bound">w</a><a id="1841" class="Symbol">)</a>

<a id="1844" class="Comment">------------------------------------------------------------------------------</a>
<a id="1923" class="Comment">-- Builders for Word64</a>

<a id="word64LE"></a><a id="1947" href="Data.Bytestring.Builder.Base.html#1947" class="Function">word64LE</a> <a id="1956" class="Symbol">:</a> <a id="1958" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1965" class="Symbol">→</a> <a id="1967" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a>
<a id="1975" href="Data.Bytestring.Builder.Base.html#1947" class="Function">word64LE</a> <a id="1984" href="Data.Bytestring.Builder.Base.html#1984" class="Bound">w</a> <a id="1986" class="Symbol">=</a> <a id="1988" href="Data.Bytestring.Builder.Base.html#1373" class="Function">wordN</a> <a id="1994" class="Symbol">(</a><a id="1995" href="Data.Bytestring.Builder.Base.html#1444" class="Function">toWord8sLE</a> <a id="2006" class="Number">8</a> <a id="2008" href="Data.Word64.Base.html#774" class="Primitive">Word64.toℕ</a> <a id="2019" href="Data.Bytestring.Builder.Base.html#1984" class="Bound">w</a><a id="2020" class="Symbol">)</a>

<a id="word64BE"></a><a id="2023" href="Data.Bytestring.Builder.Base.html#2023" class="Function">word64BE</a> <a id="2032" class="Symbol">:</a> <a id="2034" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="2041" class="Symbol">→</a> <a id="2043" href="Data.Bytestring.Builder.Primitive.html#526" class="Postulate">Builder</a>
<a id="2051" href="Data.Bytestring.Builder.Base.html#2023" class="Function">word64BE</a> <a id="2060" href="Data.Bytestring.Builder.Base.html#2060" class="Bound">w</a> <a id="2062" class="Symbol">=</a> <a id="2064" href="Data.Bytestring.Builder.Base.html#1373" class="Function">wordN</a> <a id="2070" class="Symbol">(</a><a id="2071" href="Data.Bytestring.Builder.Base.html#1718" class="Function">toWord8sBE</a> <a id="2082" class="Number">8</a> <a id="2084" href="Data.Word64.Base.html#774" class="Primitive">Word64.toℕ</a> <a id="2095" href="Data.Bytestring.Builder.Base.html#2060" class="Bound">w</a><a id="2096" class="Symbol">)</a>
</pre></body></html>