<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Musical.M.Indexed</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Indexed M-types (the dual of indexed W-types aka Petersson-Synek</a>
<a id="174" class="Comment">-- trees).</a>
<a id="185" class="Comment">------------------------------------------------------------------------</a>

<a id="259" class="Symbol">{-#</a> <a id="263" class="Keyword">OPTIONS</a> <a id="271" class="Pragma">--without-K</a> <a id="283" class="Pragma">--safe</a> <a id="290" class="Pragma">--guardedness</a> <a id="304" class="Symbol">#-}</a>

<a id="309" class="Keyword">module</a> <a id="316" href="Codata.Musical.M.Indexed.html" class="Module">Codata.Musical.M.Indexed</a> <a id="341" class="Keyword">where</a>

<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Level.html" class="Module">Level</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Codata.Musical.Notation.html" class="Module">Codata.Musical.Notation</a>
<a id="402" class="Keyword">open</a> <a id="407" class="Keyword">import</a> <a id="414" href="Data.Product.html" class="Module">Data.Product</a>
<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Data.Container.Indexed.Core.html" class="Module">Data.Container.Indexed.Core</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="Function.Base.html" class="Module">Function.Base</a> <a id="493" class="Keyword">using</a> <a id="499" class="Symbol">(</a><a id="500" href="Function.Base.html#1106" class="Function Operator">_∘_</a><a id="503" class="Symbol">)</a>
<a id="505" class="Keyword">open</a> <a id="510" class="Keyword">import</a> <a id="517" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="533" class="Comment">-- The family of indexed M-types.</a>

<a id="568" class="Keyword">module</a> <a id="575" href="Codata.Musical.M.Indexed.html#575" class="Module">_</a> <a id="577" class="Symbol">{</a><a id="578" href="Codata.Musical.M.Indexed.html#578" class="Bound">ℓ</a> <a id="580" href="Codata.Musical.M.Indexed.html#580" class="Bound">c</a> <a id="582" href="Codata.Musical.M.Indexed.html#582" class="Bound">r</a><a id="583" class="Symbol">}</a> <a id="585" class="Symbol">{</a><a id="586" href="Codata.Musical.M.Indexed.html#586" class="Bound">O</a> <a id="588" class="Symbol">:</a> <a id="590" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="594" href="Codata.Musical.M.Indexed.html#578" class="Bound">ℓ</a><a id="595" class="Symbol">}</a> <a id="597" class="Symbol">(</a><a id="598" href="Codata.Musical.M.Indexed.html#598" class="Bound">C</a> <a id="600" class="Symbol">:</a> <a id="602" href="Data.Container.Indexed.Core.html#378" class="Record">Container</a> <a id="612" href="Codata.Musical.M.Indexed.html#586" class="Bound">O</a> <a id="614" href="Codata.Musical.M.Indexed.html#586" class="Bound">O</a> <a id="616" href="Codata.Musical.M.Indexed.html#580" class="Bound">c</a> <a id="618" href="Codata.Musical.M.Indexed.html#582" class="Bound">r</a><a id="619" class="Symbol">)</a> <a id="621" class="Keyword">where</a>

  <a id="630" class="Keyword">data</a> <a id="635" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a> <a id="637" class="Symbol">(</a><a id="638" href="Codata.Musical.M.Indexed.html#638" class="Bound">o</a> <a id="640" class="Symbol">:</a> <a id="642" href="Codata.Musical.M.Indexed.html#586" class="Bound">O</a><a id="643" class="Symbol">)</a> <a id="645" class="Symbol">:</a> <a id="647" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="651" class="Symbol">(</a><a id="652" href="Codata.Musical.M.Indexed.html#578" class="Bound">ℓ</a> <a id="654" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="656" href="Codata.Musical.M.Indexed.html#580" class="Bound">c</a> <a id="658" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="660" href="Codata.Musical.M.Indexed.html#582" class="Bound">r</a><a id="661" class="Symbol">)</a> <a id="663" class="Keyword">where</a>
    <a id="673" href="Codata.Musical.M.Indexed.html#673" class="InductiveConstructor">inf</a> <a id="677" class="Symbol">:</a> <a id="679" href="Data.Container.Indexed.Core.html#697" class="Function Operator">⟦</a> <a id="681" href="Codata.Musical.M.Indexed.html#598" class="Bound">C</a> <a id="683" href="Data.Container.Indexed.Core.html#697" class="Function Operator">⟧</a> <a id="685" class="Symbol">(</a><a id="686" href="Agda.Builtin.Coinduction.html#185" class="Record">∞</a> <a id="688" href="Function.Base.html#1106" class="Function Operator">∘</a> <a id="690" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a><a id="691" class="Symbol">)</a> <a id="693" href="Codata.Musical.M.Indexed.html#638" class="Bound">o</a> <a id="695" class="Symbol">→</a> <a id="697" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a> <a id="699" href="Codata.Musical.M.Indexed.html#638" class="Bound">o</a>

  <a id="704" class="Keyword">open</a> <a id="709" href="Data.Container.Indexed.Core.html#378" class="Module">Container</a> <a id="719" href="Codata.Musical.M.Indexed.html#598" class="Bound">C</a>

  <a id="724" class="Comment">-- Projections.</a>

  <a id="743" href="Codata.Musical.M.Indexed.html#743" class="Function">head</a> <a id="748" class="Symbol">:</a> <a id="750" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a> <a id="752" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="754" href="Data.Container.Indexed.Core.html#517" class="Field">Command</a>
  <a id="764" href="Codata.Musical.M.Indexed.html#743" class="Function">head</a> <a id="769" class="Symbol">(</a><a id="770" href="Codata.Musical.M.Indexed.html#673" class="InductiveConstructor">inf</a> <a id="774" class="Symbol">(</a><a id="775" href="Codata.Musical.M.Indexed.html#775" class="Bound">c</a> <a id="777" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="779" class="Symbol">_))</a> <a id="783" class="Symbol">=</a> <a id="785" href="Codata.Musical.M.Indexed.html#775" class="Bound">c</a>

  <a id="790" href="Codata.Musical.M.Indexed.html#790" class="Function">tail</a> <a id="795" class="Symbol">:</a> <a id="797" class="Symbol">∀</a> <a id="799" class="Symbol">{</a><a id="800" href="Codata.Musical.M.Indexed.html#800" class="Bound">o</a><a id="801" class="Symbol">}</a> <a id="803" class="Symbol">(</a><a id="804" href="Codata.Musical.M.Indexed.html#804" class="Bound">m</a> <a id="806" class="Symbol">:</a> <a id="808" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a> <a id="810" href="Codata.Musical.M.Indexed.html#800" class="Bound">o</a><a id="811" class="Symbol">)</a> <a id="813" class="Symbol">(</a><a id="814" href="Codata.Musical.M.Indexed.html#814" class="Bound">r</a> <a id="816" class="Symbol">:</a> <a id="818" href="Data.Container.Indexed.Core.html#548" class="Field">Response</a> <a id="827" class="Symbol">(</a><a id="828" href="Codata.Musical.M.Indexed.html#743" class="Function">head</a> <a id="833" href="Codata.Musical.M.Indexed.html#804" class="Bound">m</a><a id="834" class="Symbol">))</a> <a id="837" class="Symbol">→</a> <a id="839" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a> <a id="841" class="Symbol">(</a><a id="842" href="Data.Container.Indexed.Core.html#589" class="Field">next</a> <a id="847" class="Symbol">(</a><a id="848" href="Codata.Musical.M.Indexed.html#743" class="Function">head</a> <a id="853" href="Codata.Musical.M.Indexed.html#804" class="Bound">m</a><a id="854" class="Symbol">)</a> <a id="856" href="Codata.Musical.M.Indexed.html#814" class="Bound">r</a><a id="857" class="Symbol">)</a>
  <a id="861" href="Codata.Musical.M.Indexed.html#790" class="Function">tail</a> <a id="866" class="Symbol">(</a><a id="867" href="Codata.Musical.M.Indexed.html#673" class="InductiveConstructor">inf</a> <a id="871" class="Symbol">(_</a> <a id="874" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="876" href="Codata.Musical.M.Indexed.html#876" class="Bound">k</a><a id="877" class="Symbol">))</a> <a id="880" href="Codata.Musical.M.Indexed.html#880" class="Bound">r</a> <a id="882" class="Symbol">=</a> <a id="884" href="Agda.Builtin.Coinduction.html#253" class="Field">♭</a> <a id="886" class="Symbol">(</a><a id="887" href="Codata.Musical.M.Indexed.html#876" class="Bound">k</a> <a id="889" href="Codata.Musical.M.Indexed.html#880" class="Bound">r</a><a id="890" class="Symbol">)</a>

  <a id="895" href="Codata.Musical.M.Indexed.html#895" class="Function">force</a> <a id="901" class="Symbol">:</a> <a id="903" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a> <a id="905" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="907" href="Data.Container.Indexed.Core.html#697" class="Function Operator">⟦</a> <a id="909" href="Codata.Musical.M.Indexed.html#598" class="Bound">C</a> <a id="911" href="Data.Container.Indexed.Core.html#697" class="Function Operator">⟧</a> <a id="913" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a>
  <a id="917" href="Codata.Musical.M.Indexed.html#895" class="Function">force</a> <a id="923" class="Symbol">(</a><a id="924" href="Codata.Musical.M.Indexed.html#673" class="InductiveConstructor">inf</a> <a id="928" class="Symbol">(</a><a id="929" href="Codata.Musical.M.Indexed.html#929" class="Bound">c</a> <a id="931" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="933" href="Codata.Musical.M.Indexed.html#933" class="Bound">k</a><a id="934" class="Symbol">))</a> <a id="937" class="Symbol">=</a> <a id="939" href="Codata.Musical.M.Indexed.html#929" class="Bound">c</a> <a id="941" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="943" class="Symbol">λ</a> <a id="945" href="Codata.Musical.M.Indexed.html#945" class="Bound">r</a> <a id="947" class="Symbol">→</a> <a id="949" href="Agda.Builtin.Coinduction.html#253" class="Field">♭</a> <a id="951" class="Symbol">(</a><a id="952" href="Codata.Musical.M.Indexed.html#933" class="Bound">k</a> <a id="954" href="Codata.Musical.M.Indexed.html#945" class="Bound">r</a><a id="955" class="Symbol">)</a>

  <a id="960" class="Comment">-- Coiteration.</a>

  <a id="979" href="Codata.Musical.M.Indexed.html#979" class="Function">coit</a> <a id="984" class="Symbol">:</a> <a id="986" class="Symbol">∀</a> <a id="988" class="Symbol">{</a><a id="989" href="Codata.Musical.M.Indexed.html#989" class="Bound">ℓ</a><a id="990" class="Symbol">}</a> <a id="992" class="Symbol">{</a><a id="993" href="Codata.Musical.M.Indexed.html#993" class="Bound">X</a> <a id="995" class="Symbol">:</a> <a id="997" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1002" href="Codata.Musical.M.Indexed.html#586" class="Bound">O</a> <a id="1004" href="Codata.Musical.M.Indexed.html#989" class="Bound">ℓ</a><a id="1005" class="Symbol">}</a> <a id="1007" class="Symbol">→</a> <a id="1009" href="Codata.Musical.M.Indexed.html#993" class="Bound">X</a> <a id="1011" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="1013" href="Data.Container.Indexed.Core.html#697" class="Function Operator">⟦</a> <a id="1015" href="Codata.Musical.M.Indexed.html#598" class="Bound">C</a> <a id="1017" href="Data.Container.Indexed.Core.html#697" class="Function Operator">⟧</a> <a id="1019" href="Codata.Musical.M.Indexed.html#993" class="Bound">X</a> <a id="1021" class="Symbol">→</a> <a id="1023" href="Codata.Musical.M.Indexed.html#993" class="Bound">X</a> <a id="1025" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="1027" href="Codata.Musical.M.Indexed.html#635" class="Datatype">M</a>
  <a id="1031" href="Codata.Musical.M.Indexed.html#979" class="Function">coit</a> <a id="1036" href="Codata.Musical.M.Indexed.html#1036" class="Bound">ψ</a> <a id="1038" href="Codata.Musical.M.Indexed.html#1038" class="Bound">x</a> <a id="1040" class="Symbol">=</a> <a id="1042" href="Codata.Musical.M.Indexed.html#673" class="InductiveConstructor">inf</a> <a id="1046" class="Symbol">(</a><a id="1047" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1053" href="Codata.Musical.M.Indexed.html#1101" class="Function">cs</a> <a id="1056" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1058" class="Symbol">λ</a> <a id="1060" href="Codata.Musical.M.Indexed.html#1060" class="Bound">r</a> <a id="1062" class="Symbol">→</a> <a id="1064" href="Agda.Builtin.Coinduction.html#218" class="CoinductiveConstructor Operator">♯</a> <a id="1066" href="Codata.Musical.M.Indexed.html#979" class="Function">coit</a> <a id="1071" href="Codata.Musical.M.Indexed.html#1036" class="Bound">ψ</a> <a id="1073" class="Symbol">(</a><a id="1074" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1080" href="Codata.Musical.M.Indexed.html#1101" class="Function">cs</a> <a id="1083" href="Codata.Musical.M.Indexed.html#1060" class="Bound">r</a><a id="1084" class="Symbol">))</a>
    <a id="1091" class="Keyword">where</a>
    <a id="1101" href="Codata.Musical.M.Indexed.html#1101" class="Function">cs</a> <a id="1104" class="Symbol">=</a> <a id="1106" href="Codata.Musical.M.Indexed.html#1036" class="Bound">ψ</a> <a id="1108" href="Codata.Musical.M.Indexed.html#1038" class="Bound">x</a>
</pre></body></html>