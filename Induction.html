<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Induction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- An abstraction of various forms of recursion/induction</a>
<a id="164" class="Comment">------------------------------------------------------------------------</a>

<a id="238" class="Comment">-- The idea underlying Induction.* comes from Epigram 1, see Section 4</a>
<a id="309" class="Comment">-- of &quot;The view from the left&quot; by McBride and McKinna.</a>

<a id="365" class="Comment">-- Note: The types in this module can perhaps be easier to understand</a>
<a id="435" class="Comment">-- if they are normalised. Note also that Agda can do the</a>
<a id="493" class="Comment">-- normalisation for you.</a>

<a id="520" class="Symbol">{-#</a> <a id="524" class="Keyword">OPTIONS</a> <a id="532" class="Pragma">--without-K</a> <a id="544" class="Pragma">--safe</a> <a id="551" class="Symbol">#-}</a>

<a id="556" class="Keyword">module</a> <a id="563" href="Induction.html" class="Module">Induction</a> <a id="573" class="Keyword">where</a>

<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Level.html" class="Module">Level</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="626" class="Comment">-- A RecStruct describes the allowed structure of recursion. The</a>
<a id="691" class="Comment">-- examples in Data.Nat.Induction should explain what this is all</a>
<a id="757" class="Comment">-- about.</a>

<a id="RecStruct"></a><a id="768" href="Induction.html#768" class="Function">RecStruct</a> <a id="778" class="Symbol">:</a> <a id="780" class="Symbol">∀</a> <a id="782" class="Symbol">{</a><a id="783" href="Induction.html#783" class="Bound">a</a><a id="784" class="Symbol">}</a> <a id="786" class="Symbol">→</a> <a id="788" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="792" href="Induction.html#783" class="Bound">a</a> <a id="794" class="Symbol">→</a> <a id="796" class="Symbol">(</a><a id="797" href="Induction.html#797" class="Bound">ℓ₁</a> <a id="800" href="Induction.html#800" class="Bound">ℓ₂</a> <a id="803" class="Symbol">:</a> <a id="805" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="810" class="Symbol">)</a> <a id="812" class="Symbol">→</a> <a id="814" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="818" class="Symbol">_</a>
<a id="820" href="Induction.html#768" class="Function">RecStruct</a> <a id="830" href="Induction.html#830" class="Bound">A</a> <a id="832" href="Induction.html#832" class="Bound">ℓ₁</a> <a id="835" href="Induction.html#835" class="Bound">ℓ₂</a> <a id="838" class="Symbol">=</a> <a id="840" href="Relation.Unary.html#1111" class="Function">Pred</a> <a id="845" href="Induction.html#830" class="Bound">A</a> <a id="847" href="Induction.html#832" class="Bound">ℓ₁</a> <a id="850" class="Symbol">→</a> <a id="852" href="Relation.Unary.html#1111" class="Function">Pred</a> <a id="857" href="Induction.html#830" class="Bound">A</a> <a id="859" href="Induction.html#835" class="Bound">ℓ₂</a>

<a id="863" class="Comment">-- A recursor builder constructs an instance of a recursion structure</a>
<a id="933" class="Comment">-- for a given input.</a>

<a id="RecursorBuilder"></a><a id="956" href="Induction.html#956" class="Function">RecursorBuilder</a> <a id="972" class="Symbol">:</a> <a id="974" class="Symbol">∀</a> <a id="976" class="Symbol">{</a><a id="977" href="Induction.html#977" class="Bound">a</a> <a id="979" href="Induction.html#979" class="Bound">ℓ₁</a> <a id="982" href="Induction.html#982" class="Bound">ℓ₂</a><a id="984" class="Symbol">}</a> <a id="986" class="Symbol">{</a><a id="987" href="Induction.html#987" class="Bound">A</a> <a id="989" class="Symbol">:</a> <a id="991" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="995" href="Induction.html#977" class="Bound">a</a><a id="996" class="Symbol">}</a> <a id="998" class="Symbol">→</a> <a id="1000" href="Induction.html#768" class="Function">RecStruct</a> <a id="1010" href="Induction.html#987" class="Bound">A</a> <a id="1012" href="Induction.html#979" class="Bound">ℓ₁</a> <a id="1015" href="Induction.html#982" class="Bound">ℓ₂</a> <a id="1018" class="Symbol">→</a> <a id="1020" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1024" class="Symbol">_</a>
<a id="1026" href="Induction.html#956" class="Function">RecursorBuilder</a> <a id="1042" href="Induction.html#1042" class="Bound">Rec</a> <a id="1046" class="Symbol">=</a> <a id="1048" class="Symbol">∀</a> <a id="1050" href="Induction.html#1050" class="Bound">P</a> <a id="1052" class="Symbol">→</a> <a id="1054" href="Induction.html#1042" class="Bound">Rec</a> <a id="1058" href="Induction.html#1050" class="Bound">P</a> <a id="1060" href="Relation.Unary.html#2418" class="Function Operator">⊆′</a> <a id="1063" href="Induction.html#1050" class="Bound">P</a> <a id="1065" class="Symbol">→</a> <a id="1067" href="Relation.Unary.html#3370" class="Function">Universal</a> <a id="1077" class="Symbol">(</a><a id="1078" href="Induction.html#1042" class="Bound">Rec</a> <a id="1082" href="Induction.html#1050" class="Bound">P</a><a id="1083" class="Symbol">)</a>

<a id="1086" class="Comment">-- A recursor can be used to actually compute/prove something useful.</a>

<a id="Recursor"></a><a id="1157" href="Induction.html#1157" class="Function">Recursor</a> <a id="1166" class="Symbol">:</a> <a id="1168" class="Symbol">∀</a> <a id="1170" class="Symbol">{</a><a id="1171" href="Induction.html#1171" class="Bound">a</a> <a id="1173" href="Induction.html#1173" class="Bound">ℓ₁</a> <a id="1176" href="Induction.html#1176" class="Bound">ℓ₂</a><a id="1178" class="Symbol">}</a> <a id="1180" class="Symbol">{</a><a id="1181" href="Induction.html#1181" class="Bound">A</a> <a id="1183" class="Symbol">:</a> <a id="1185" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1189" href="Induction.html#1171" class="Bound">a</a><a id="1190" class="Symbol">}</a> <a id="1192" class="Symbol">→</a> <a id="1194" href="Induction.html#768" class="Function">RecStruct</a> <a id="1204" href="Induction.html#1181" class="Bound">A</a> <a id="1206" href="Induction.html#1173" class="Bound">ℓ₁</a> <a id="1209" href="Induction.html#1176" class="Bound">ℓ₂</a> <a id="1212" class="Symbol">→</a> <a id="1214" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1218" class="Symbol">_</a>
<a id="1220" href="Induction.html#1157" class="Function">Recursor</a> <a id="1229" href="Induction.html#1229" class="Bound">Rec</a> <a id="1233" class="Symbol">=</a> <a id="1235" class="Symbol">∀</a> <a id="1237" href="Induction.html#1237" class="Bound">P</a> <a id="1239" class="Symbol">→</a> <a id="1241" href="Induction.html#1229" class="Bound">Rec</a> <a id="1245" href="Induction.html#1237" class="Bound">P</a> <a id="1247" href="Relation.Unary.html#2418" class="Function Operator">⊆′</a> <a id="1250" href="Induction.html#1237" class="Bound">P</a> <a id="1252" class="Symbol">→</a> <a id="1254" href="Relation.Unary.html#3370" class="Function">Universal</a> <a id="1264" href="Induction.html#1237" class="Bound">P</a>

<a id="1267" class="Comment">-- And recursors can be constructed from recursor builders.</a>

<a id="build"></a><a id="1328" href="Induction.html#1328" class="Function">build</a> <a id="1334" class="Symbol">:</a> <a id="1336" class="Symbol">∀</a> <a id="1338" class="Symbol">{</a><a id="1339" href="Induction.html#1339" class="Bound">a</a> <a id="1341" href="Induction.html#1341" class="Bound">ℓ₁</a> <a id="1344" href="Induction.html#1344" class="Bound">ℓ₂</a><a id="1346" class="Symbol">}</a> <a id="1348" class="Symbol">{</a><a id="1349" href="Induction.html#1349" class="Bound">A</a> <a id="1351" class="Symbol">:</a> <a id="1353" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1357" href="Induction.html#1339" class="Bound">a</a><a id="1358" class="Symbol">}</a> <a id="1360" class="Symbol">{</a><a id="1361" href="Induction.html#1361" class="Bound">Rec</a> <a id="1365" class="Symbol">:</a> <a id="1367" href="Induction.html#768" class="Function">RecStruct</a> <a id="1377" href="Induction.html#1349" class="Bound">A</a> <a id="1379" href="Induction.html#1341" class="Bound">ℓ₁</a> <a id="1382" href="Induction.html#1344" class="Bound">ℓ₂</a><a id="1384" class="Symbol">}</a> <a id="1386" class="Symbol">→</a>
        <a id="1396" href="Induction.html#956" class="Function">RecursorBuilder</a> <a id="1412" href="Induction.html#1361" class="Bound">Rec</a> <a id="1416" class="Symbol">→</a>
        <a id="1426" href="Induction.html#1157" class="Function">Recursor</a> <a id="1435" href="Induction.html#1361" class="Bound">Rec</a>
<a id="1439" href="Induction.html#1328" class="Function">build</a> <a id="1445" href="Induction.html#1445" class="Bound">builder</a> <a id="1453" href="Induction.html#1453" class="Bound">P</a> <a id="1455" href="Induction.html#1455" class="Bound">f</a> <a id="1457" href="Induction.html#1457" class="Bound">x</a> <a id="1459" class="Symbol">=</a> <a id="1461" href="Induction.html#1455" class="Bound">f</a> <a id="1463" href="Induction.html#1457" class="Bound">x</a> <a id="1465" class="Symbol">(</a><a id="1466" href="Induction.html#1445" class="Bound">builder</a> <a id="1474" href="Induction.html#1453" class="Bound">P</a> <a id="1476" href="Induction.html#1455" class="Bound">f</a> <a id="1478" href="Induction.html#1457" class="Bound">x</a><a id="1479" class="Symbol">)</a>

<a id="1482" class="Comment">-- We can repeat the exercise above for subsets of the type we are</a>
<a id="1549" class="Comment">-- recursing over.</a>

<a id="SubsetRecursorBuilder"></a><a id="1569" href="Induction.html#1569" class="Function">SubsetRecursorBuilder</a> <a id="1591" class="Symbol">:</a> <a id="1593" class="Symbol">∀</a> <a id="1595" class="Symbol">{</a><a id="1596" href="Induction.html#1596" class="Bound">a</a> <a id="1598" href="Induction.html#1598" class="Bound">ℓ₁</a> <a id="1601" href="Induction.html#1601" class="Bound">ℓ₂</a> <a id="1604" href="Induction.html#1604" class="Bound">ℓ₃</a><a id="1606" class="Symbol">}</a> <a id="1608" class="Symbol">{</a><a id="1609" href="Induction.html#1609" class="Bound">A</a> <a id="1611" class="Symbol">:</a> <a id="1613" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1617" href="Induction.html#1596" class="Bound">a</a><a id="1618" class="Symbol">}</a> <a id="1620" class="Symbol">→</a>
                        <a id="1646" href="Relation.Unary.html#1111" class="Function">Pred</a> <a id="1651" href="Induction.html#1609" class="Bound">A</a> <a id="1653" href="Induction.html#1598" class="Bound">ℓ₁</a> <a id="1656" class="Symbol">→</a> <a id="1658" href="Induction.html#768" class="Function">RecStruct</a> <a id="1668" href="Induction.html#1609" class="Bound">A</a> <a id="1670" href="Induction.html#1601" class="Bound">ℓ₂</a> <a id="1673" href="Induction.html#1604" class="Bound">ℓ₃</a> <a id="1676" class="Symbol">→</a> <a id="1678" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1682" class="Symbol">_</a>
<a id="1684" href="Induction.html#1569" class="Function">SubsetRecursorBuilder</a> <a id="1706" href="Induction.html#1706" class="Bound">Q</a> <a id="1708" href="Induction.html#1708" class="Bound">Rec</a> <a id="1712" class="Symbol">=</a> <a id="1714" class="Symbol">∀</a> <a id="1716" href="Induction.html#1716" class="Bound">P</a> <a id="1718" class="Symbol">→</a> <a id="1720" href="Induction.html#1708" class="Bound">Rec</a> <a id="1724" href="Induction.html#1716" class="Bound">P</a> <a id="1726" href="Relation.Unary.html#2418" class="Function Operator">⊆′</a> <a id="1729" href="Induction.html#1716" class="Bound">P</a> <a id="1731" class="Symbol">→</a> <a id="1733" href="Induction.html#1706" class="Bound">Q</a> <a id="1735" href="Relation.Unary.html#2418" class="Function Operator">⊆′</a> <a id="1738" href="Induction.html#1708" class="Bound">Rec</a> <a id="1742" href="Induction.html#1716" class="Bound">P</a>

<a id="SubsetRecursor"></a><a id="1745" href="Induction.html#1745" class="Function">SubsetRecursor</a> <a id="1760" class="Symbol">:</a> <a id="1762" class="Symbol">∀</a> <a id="1764" class="Symbol">{</a><a id="1765" href="Induction.html#1765" class="Bound">a</a> <a id="1767" href="Induction.html#1767" class="Bound">ℓ₁</a> <a id="1770" href="Induction.html#1770" class="Bound">ℓ₂</a> <a id="1773" href="Induction.html#1773" class="Bound">ℓ₃</a><a id="1775" class="Symbol">}</a> <a id="1777" class="Symbol">{</a><a id="1778" href="Induction.html#1778" class="Bound">A</a> <a id="1780" class="Symbol">:</a> <a id="1782" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1786" href="Induction.html#1765" class="Bound">a</a><a id="1787" class="Symbol">}</a> <a id="1789" class="Symbol">→</a>
                 <a id="1808" href="Relation.Unary.html#1111" class="Function">Pred</a> <a id="1813" href="Induction.html#1778" class="Bound">A</a> <a id="1815" href="Induction.html#1767" class="Bound">ℓ₁</a> <a id="1818" class="Symbol">→</a> <a id="1820" href="Induction.html#768" class="Function">RecStruct</a> <a id="1830" href="Induction.html#1778" class="Bound">A</a> <a id="1832" href="Induction.html#1770" class="Bound">ℓ₂</a> <a id="1835" href="Induction.html#1773" class="Bound">ℓ₃</a> <a id="1838" class="Symbol">→</a> <a id="1840" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1844" class="Symbol">_</a>
<a id="1846" href="Induction.html#1745" class="Function">SubsetRecursor</a> <a id="1861" href="Induction.html#1861" class="Bound">Q</a> <a id="1863" href="Induction.html#1863" class="Bound">Rec</a> <a id="1867" class="Symbol">=</a> <a id="1869" class="Symbol">∀</a> <a id="1871" href="Induction.html#1871" class="Bound">P</a> <a id="1873" class="Symbol">→</a> <a id="1875" href="Induction.html#1863" class="Bound">Rec</a> <a id="1879" href="Induction.html#1871" class="Bound">P</a> <a id="1881" href="Relation.Unary.html#2418" class="Function Operator">⊆′</a> <a id="1884" href="Induction.html#1871" class="Bound">P</a> <a id="1886" class="Symbol">→</a> <a id="1888" href="Induction.html#1861" class="Bound">Q</a> <a id="1890" href="Relation.Unary.html#2418" class="Function Operator">⊆′</a> <a id="1893" href="Induction.html#1871" class="Bound">P</a>

<a id="subsetBuild"></a><a id="1896" href="Induction.html#1896" class="Function">subsetBuild</a> <a id="1908" class="Symbol">:</a> <a id="1910" class="Symbol">∀</a> <a id="1912" class="Symbol">{</a><a id="1913" href="Induction.html#1913" class="Bound">a</a> <a id="1915" href="Induction.html#1915" class="Bound">ℓ₁</a> <a id="1918" href="Induction.html#1918" class="Bound">ℓ₂</a> <a id="1921" href="Induction.html#1921" class="Bound">ℓ₃</a><a id="1923" class="Symbol">}</a>
                <a id="1941" class="Symbol">{</a><a id="1942" href="Induction.html#1942" class="Bound">A</a> <a id="1944" class="Symbol">:</a> <a id="1946" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1950" href="Induction.html#1913" class="Bound">a</a><a id="1951" class="Symbol">}</a> <a id="1953" class="Symbol">{</a><a id="1954" href="Induction.html#1954" class="Bound">Q</a> <a id="1956" class="Symbol">:</a> <a id="1958" href="Relation.Unary.html#1111" class="Function">Pred</a> <a id="1963" href="Induction.html#1942" class="Bound">A</a> <a id="1965" href="Induction.html#1915" class="Bound">ℓ₁</a><a id="1967" class="Symbol">}</a> <a id="1969" class="Symbol">{</a><a id="1970" href="Induction.html#1970" class="Bound">Rec</a> <a id="1974" class="Symbol">:</a> <a id="1976" href="Induction.html#768" class="Function">RecStruct</a> <a id="1986" href="Induction.html#1942" class="Bound">A</a> <a id="1988" href="Induction.html#1918" class="Bound">ℓ₂</a> <a id="1991" href="Induction.html#1921" class="Bound">ℓ₃</a><a id="1993" class="Symbol">}</a> <a id="1995" class="Symbol">→</a>
                <a id="2013" href="Induction.html#1569" class="Function">SubsetRecursorBuilder</a> <a id="2035" href="Induction.html#1954" class="Bound">Q</a> <a id="2037" href="Induction.html#1970" class="Bound">Rec</a> <a id="2041" class="Symbol">→</a>
                <a id="2059" href="Induction.html#1745" class="Function">SubsetRecursor</a> <a id="2074" href="Induction.html#1954" class="Bound">Q</a> <a id="2076" href="Induction.html#1970" class="Bound">Rec</a>
<a id="2080" href="Induction.html#1896" class="Function">subsetBuild</a> <a id="2092" href="Induction.html#2092" class="Bound">builder</a> <a id="2100" href="Induction.html#2100" class="Bound">P</a> <a id="2102" href="Induction.html#2102" class="Bound">f</a> <a id="2104" href="Induction.html#2104" class="Bound">x</a> <a id="2106" href="Induction.html#2106" class="Bound">q</a> <a id="2108" class="Symbol">=</a> <a id="2110" href="Induction.html#2102" class="Bound">f</a> <a id="2112" href="Induction.html#2104" class="Bound">x</a> <a id="2114" class="Symbol">(</a><a id="2115" href="Induction.html#2092" class="Bound">builder</a> <a id="2123" href="Induction.html#2100" class="Bound">P</a> <a id="2125" href="Induction.html#2102" class="Bound">f</a> <a id="2127" href="Induction.html#2104" class="Bound">x</a> <a id="2129" href="Induction.html#2106" class="Bound">q</a><a id="2130" class="Symbol">)</a>
</pre></body></html>