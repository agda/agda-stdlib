<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Function.Related.TypeIsomorphisms.Solver</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Automatic solver for equations over product and sum types</a>
<a id="167" class="Comment">--</a>
<a id="170" class="Comment">-- See examples at the bottom of the file for how to use this solver</a>
<a id="239" class="Comment">------------------------------------------------------------------------</a>

<a id="313" class="Symbol">{-#</a> <a id="317" class="Keyword">OPTIONS</a> <a id="325" class="Pragma">--cubical-compatible</a> <a id="346" class="Pragma">--safe</a> <a id="353" class="Symbol">#-}</a>

<a id="358" class="Keyword">module</a> <a id="365" href="Function.Related.TypeIsomorphisms.Solver.html" class="Module">Function.Related.TypeIsomorphisms.Solver</a> <a id="406" class="Keyword">where</a>

<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Algebra.html" class="Module">Algebra</a> <a id="433" class="Keyword">using</a> <a id="439" class="Symbol">(</a><a id="440" href="Algebra.Bundles.html#19580" class="Record">CommutativeSemiring</a><a id="459" class="Symbol">)</a>
<a id="461" class="Keyword">import</a> <a id="468" href="Algebra.Solver.Ring.NaturalCoefficients.Default.html" class="Module">Algebra.Solver.Ring.NaturalCoefficients.Default</a>
  <a id="518" class="Keyword">using</a> <a id="524" class="Symbol">(</a><a id="525" href="Relation.Binary.Reflection.html#2522" class="Function">solve</a><a id="530" class="Symbol">;</a> <a id="532" href="Algebra.Solver.Ring.html#2627" class="InductiveConstructor">con</a><a id="535" class="Symbol">;</a> <a id="537" href="Algebra.Solver.Ring.html#2886" class="Function Operator">_:*_</a><a id="541" class="Symbol">;</a> <a id="543" href="Algebra.Solver.Ring.html#2821" class="Function Operator">_:+_</a><a id="547" class="Symbol">;</a> <a id="549" href="Algebra.Solver.Ring.html#19555" class="Function Operator">_:=_</a><a id="553" class="Symbol">)</a>
<a id="555" class="Keyword">open</a> <a id="560" class="Keyword">import</a> <a id="567" href="Data.Empty.Polymorphic.html" class="Module">Data.Empty.Polymorphic</a> <a id="590" class="Keyword">using</a> <a id="596" class="Symbol">(</a><a id="597" href="Data.Empty.Polymorphic.html#383" class="Function">⊥</a><a id="598" class="Symbol">)</a>
<a id="600" class="Keyword">open</a> <a id="605" class="Keyword">import</a> <a id="612" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="630" class="Keyword">using</a> <a id="636" class="Symbol">(</a><a id="637" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="640" class="Symbol">)</a>
<a id="642" class="Keyword">open</a> <a id="647" class="Keyword">import</a> <a id="654" href="Data.Sum.Base.html" class="Module">Data.Sum.Base</a> <a id="668" class="Keyword">using</a> <a id="674" class="Symbol">(</a><a id="675" href="Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="678" class="Symbol">)</a>
<a id="680" class="Keyword">open</a> <a id="685" class="Keyword">import</a> <a id="692" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a> <a id="714" class="Keyword">using</a> <a id="720" class="Symbol">(</a><a id="721" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a><a id="722" class="Symbol">)</a>
<a id="724" class="Keyword">open</a> <a id="729" class="Keyword">import</a> <a id="736" href="Level.html" class="Module">Level</a> <a id="742" class="Keyword">using</a> <a id="748" class="Symbol">(</a><a id="749" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="754" class="Symbol">)</a>
<a id="756" class="Keyword">open</a> <a id="761" class="Keyword">import</a> <a id="768" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="785" class="Keyword">using</a> <a id="791" class="Symbol">(</a><a id="792" href="Function.Bundles.html#12699" class="Function Operator">_↔_</a><a id="795" class="Symbol">)</a>
<a id="797" class="Keyword">open</a> <a id="802" class="Keyword">import</a> <a id="809" href="Function.Properties.Inverse.html" class="Module">Function.Properties.Inverse</a> <a id="837" class="Keyword">using</a> <a id="843" class="Symbol">(</a><a id="844" href="Function.Properties.Inverse.html#1723" class="Function">↔-refl</a><a id="850" class="Symbol">)</a>
<a id="852" class="Keyword">open</a> <a id="857" class="Keyword">import</a> <a id="864" href="Function.Related.Propositional.html" class="Module">Function.Related.Propositional</a> <a id="895" class="Symbol">as</a> <a id="898" class="Module">Related</a>
<a id="906" class="Keyword">open</a> <a id="911" class="Keyword">import</a> <a id="918" href="Function.Related.TypeIsomorphisms.html" class="Module">Function.Related.TypeIsomorphisms</a> <a id="952" class="Keyword">using</a> <a id="958" class="Symbol">(</a><a id="959" href="Function.Related.TypeIsomorphisms.html#8463" class="Function">×-⊎-commutativeSemiring</a><a id="982" class="Symbol">)</a>

<a id="985" class="Comment">------------------------------------------------------------------------</a>
<a id="1058" class="Comment">-- The solver</a>

<a id="1073" class="Keyword">module</a> <a id="×-⊎-Solver"></a><a id="1080" href="Function.Related.TypeIsomorphisms.Solver.html#1080" class="Module">×-⊎-Solver</a> <a id="1091" class="Symbol">(</a><a id="1092" href="Function.Related.TypeIsomorphisms.Solver.html#1092" class="Bound">k</a> <a id="1094" class="Symbol">:</a> <a id="1096" href="Function.Related.Propositional.html#3116" class="Datatype">SymmetricKind</a><a id="1109" class="Symbol">)</a> <a id="1111" class="Symbol">{</a><a id="1112" href="Function.Related.TypeIsomorphisms.Solver.html#1112" class="Bound">ℓ</a><a id="1113" class="Symbol">}</a> <a id="1115" class="Symbol">=</a>
  <a id="1119" href="Algebra.Solver.Ring.NaturalCoefficients.Default.html" class="Module">Algebra.Solver.Ring.NaturalCoefficients.Default</a>
    <a id="1171" class="Symbol">(</a><a id="1172" href="Function.Related.TypeIsomorphisms.html#8463" class="Function">×-⊎-commutativeSemiring</a> <a id="1196" href="Function.Related.TypeIsomorphisms.Solver.html#1092" class="Bound">k</a> <a id="1198" href="Function.Related.TypeIsomorphisms.Solver.html#1112" class="Bound">ℓ</a><a id="1199" class="Symbol">)</a>

<a id="1202" class="Comment">------------------------------------------------------------------------</a>
<a id="1275" class="Comment">-- Tests</a>

<a id="1285" class="Keyword">private</a>

  <a id="1296" class="Comment">-- A test of the solver above.</a>

  <a id="test"></a><a id="1330" href="Function.Related.TypeIsomorphisms.Solver.html#1330" class="Function">test</a> <a id="1335" class="Symbol">:</a> <a id="1337" class="Symbol">{</a><a id="1338" href="Function.Related.TypeIsomorphisms.Solver.html#1338" class="Bound">ℓ</a> <a id="1340" class="Symbol">:</a> <a id="1342" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="1347" class="Symbol">}</a> <a id="1349" class="Symbol">(</a><a id="1350" href="Function.Related.TypeIsomorphisms.Solver.html#1350" class="Bound">A</a> <a id="1352" href="Function.Related.TypeIsomorphisms.Solver.html#1352" class="Bound">B</a> <a id="1354" href="Function.Related.TypeIsomorphisms.Solver.html#1354" class="Bound">C</a> <a id="1356" class="Symbol">:</a> <a id="1358" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1362" href="Function.Related.TypeIsomorphisms.Solver.html#1338" class="Bound">ℓ</a><a id="1363" class="Symbol">)</a> <a id="1365" class="Symbol">→</a>
         <a id="1376" class="Symbol">(</a><a id="1377" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a> <a id="1379" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1381" href="Function.Related.TypeIsomorphisms.Solver.html#1350" class="Bound">A</a> <a id="1383" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1385" class="Symbol">(</a><a id="1386" href="Function.Related.TypeIsomorphisms.Solver.html#1352" class="Bound">B</a> <a id="1388" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1390" href="Function.Related.TypeIsomorphisms.Solver.html#1354" class="Bound">C</a><a id="1391" class="Symbol">))</a> <a id="1394" href="Function.Bundles.html#12699" class="Function Operator">↔</a> <a id="1396" class="Symbol">(</a><a id="1397" href="Function.Related.TypeIsomorphisms.Solver.html#1350" class="Bound">A</a> <a id="1399" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1401" href="Function.Related.TypeIsomorphisms.Solver.html#1352" class="Bound">B</a> <a id="1403" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1405" href="Function.Related.TypeIsomorphisms.Solver.html#1354" class="Bound">C</a> <a id="1407" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1409" class="Symbol">(</a><a id="1410" href="Data.Empty.Polymorphic.html#383" class="Function">⊥</a> <a id="1412" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1414" href="Function.Related.TypeIsomorphisms.Solver.html#1350" class="Bound">A</a><a id="1415" class="Symbol">))</a>
  <a id="1420" href="Function.Related.TypeIsomorphisms.Solver.html#1330" class="Function">test</a> <a id="1425" class="Symbol">=</a> <a id="1427" href="Relation.Binary.Reflection.html#2522" class="Function">solve</a> <a id="1433" class="Number">3</a> <a id="1435" class="Symbol">(λ</a> <a id="1438" href="Function.Related.TypeIsomorphisms.Solver.html#1438" class="Bound">A</a> <a id="1440" href="Function.Related.TypeIsomorphisms.Solver.html#1440" class="Bound">B</a> <a id="1442" href="Function.Related.TypeIsomorphisms.Solver.html#1442" class="Bound">C</a> <a id="1444" class="Symbol">→</a> <a id="1446" href="Algebra.Solver.Ring.html#2627" class="InductiveConstructor">con</a> <a id="1450" class="Number">1</a> <a id="1452" href="Algebra.Solver.Ring.html#2886" class="Function Operator">:*</a> <a id="1455" class="Symbol">(</a><a id="1456" href="Function.Related.TypeIsomorphisms.Solver.html#1438" class="Bound">A</a> <a id="1458" href="Algebra.Solver.Ring.html#2886" class="Function Operator">:*</a> <a id="1461" class="Symbol">(</a><a id="1462" href="Function.Related.TypeIsomorphisms.Solver.html#1440" class="Bound">B</a> <a id="1464" href="Algebra.Solver.Ring.html#2821" class="Function Operator">:+</a> <a id="1467" href="Function.Related.TypeIsomorphisms.Solver.html#1442" class="Bound">C</a><a id="1468" class="Symbol">))</a> <a id="1471" href="Algebra.Solver.Ring.html#19555" class="Function Operator">:=</a>
                            <a id="1502" href="Function.Related.TypeIsomorphisms.Solver.html#1438" class="Bound">A</a> <a id="1504" href="Algebra.Solver.Ring.html#2886" class="Function Operator">:*</a> <a id="1507" href="Function.Related.TypeIsomorphisms.Solver.html#1440" class="Bound">B</a> <a id="1509" href="Algebra.Solver.Ring.html#2821" class="Function Operator">:+</a> <a id="1512" href="Function.Related.TypeIsomorphisms.Solver.html#1442" class="Bound">C</a> <a id="1514" href="Algebra.Solver.Ring.html#2886" class="Function Operator">:*</a> <a id="1517" class="Symbol">(</a><a id="1518" href="Algebra.Solver.Ring.html#2627" class="InductiveConstructor">con</a> <a id="1522" class="Number">0</a> <a id="1524" href="Algebra.Solver.Ring.html#2821" class="Function Operator">:+</a> <a id="1527" href="Function.Related.TypeIsomorphisms.Solver.html#1438" class="Bound">A</a><a id="1528" class="Symbol">))</a>
                 <a id="1548" href="Function.Properties.Inverse.html#1723" class="Function">↔-refl</a>
    <a id="1559" class="Keyword">where</a> <a id="1565" class="Keyword">open</a> <a id="1570" href="Function.Related.TypeIsomorphisms.Solver.html#1080" class="Module">×-⊎-Solver</a> <a id="1581" href="Function.Related.Propositional.html#3174" class="InductiveConstructor">bijection</a>
</pre></body></html>