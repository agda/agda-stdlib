<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Algebra.Definitions.RawMonoid</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Basic auxiliary definitions for monoid-like structures</a>
<a id="164" class="Comment">------------------------------------------------------------------------</a>

<a id="238" class="Symbol">{-#</a> <a id="242" class="Keyword">OPTIONS</a> <a id="250" class="Pragma">--cubical-compatible</a> <a id="271" class="Pragma">--safe</a> <a id="278" class="Symbol">#-}</a>

<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Algebra.Bundles.html" class="Module">Algebra.Bundles</a> <a id="311" class="Keyword">using</a> <a id="317" class="Symbol">(</a><a id="318" href="Algebra.Bundles.Raw.html#1721" class="Record">RawMonoid</a><a id="327" class="Symbol">)</a>

<a id="330" class="Keyword">module</a> <a id="337" href="Algebra.Definitions.RawMonoid.html" class="Module">Algebra.Definitions.RawMonoid</a> <a id="367" class="Symbol">{</a><a id="368" href="Algebra.Definitions.RawMonoid.html#368" class="Bound">a</a> <a id="370" href="Algebra.Definitions.RawMonoid.html#370" class="Bound">ℓ</a><a id="371" class="Symbol">}</a> <a id="373" class="Symbol">(</a><a id="374" href="Algebra.Definitions.RawMonoid.html#374" class="Bound">M</a> <a id="376" class="Symbol">:</a> <a id="378" href="Algebra.Bundles.Raw.html#1721" class="Record">RawMonoid</a> <a id="388" href="Algebra.Definitions.RawMonoid.html#368" class="Bound">a</a> <a id="390" href="Algebra.Definitions.RawMonoid.html#370" class="Bound">ℓ</a><a id="391" class="Symbol">)</a> <a id="393" class="Keyword">where</a>

<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="427" class="Symbol">as</a> <a id="430" class="Module">Bool</a> <a id="435" class="Keyword">using</a> <a id="441" class="Symbol">(</a><a id="442" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="446" class="Symbol">;</a> <a id="448" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="452" class="Symbol">;</a> <a id="454" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="459" class="Symbol">;</a> <a id="461" href="Data.Bool.Base.html#1515" class="Function Operator">if_then_else_</a><a id="474" class="Symbol">)</a>
<a id="476" class="Keyword">open</a> <a id="481" class="Keyword">import</a> <a id="488" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="502" class="Symbol">as</a> <a id="505" class="Module">ℕ</a> <a id="507" class="Keyword">using</a> <a id="513" class="Symbol">(</a><a id="514" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="515" class="Symbol">;</a> <a id="517" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="521" class="Symbol">;</a> <a id="523" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="526" class="Symbol">)</a>
<a id="528" class="Keyword">open</a> <a id="533" class="Keyword">import</a> <a id="540" href="Data.Vec.Functional.html" class="Module">Data.Vec.Functional</a> <a id="560" class="Symbol">as</a> <a id="563" class="Module">Vector</a> <a id="570" class="Keyword">using</a> <a id="576" class="Symbol">(</a><a id="577" href="Data.Vec.Functional.html#1232" class="Function">Vector</a><a id="583" class="Symbol">)</a>

<a id="586" class="Keyword">open</a> <a id="591" href="Algebra.Bundles.Raw.html#1721" class="Module">RawMonoid</a> <a id="601" href="Algebra.Definitions.RawMonoid.html#374" class="Bound">M</a> <a id="603" class="Keyword">renaming</a> <a id="612" class="Symbol">(</a> <a id="614" href="Algebra.Bundles.Raw.html#1851" class="Field Operator">_∙_</a> <a id="618" class="Symbol">to</a> <a id="621" class="Field Operator">_+_</a> <a id="625" class="Symbol">;</a> <a id="627" href="Algebra.Bundles.Raw.html#1877" class="Field">ε</a> <a id="629" class="Symbol">to</a> <a id="632" class="Field">0#</a> <a id="635" class="Symbol">)</a>

<a id="638" class="Comment">------------------------------------------------------------------------</a>
<a id="711" class="Comment">-- Re-export definitions over a magma</a>
<a id="749" class="Comment">------------------------------------------------------------------------</a>

<a id="823" class="Keyword">open</a> <a id="828" class="Keyword">import</a> <a id="835" href="Algebra.Definitions.RawMagma.html" class="Module">Algebra.Definitions.RawMagma</a> <a id="864" href="Algebra.Bundles.Raw.html#1898" class="Function">rawMagma</a> <a id="873" class="Keyword">public</a>

<a id="881" class="Comment">------------------------------------------------------------------------</a>
<a id="954" class="Comment">-- Multiplication by natural number: action of the (0,+)-rawMonoid</a>
<a id="1021" class="Comment">------------------------------------------------------------------------</a>
<a id="1094" class="Comment">-- Standard definition</a>

<a id="1118" class="Comment">-- A simple definition, easy to use and prove properties about.</a>

<a id="1183" class="Keyword">infixr</a> <a id="1190" class="Number">8</a> <a id="1192" href="Algebra.Definitions.RawMonoid.html#1197" class="Function Operator">_×_</a>

<a id="_×_"></a><a id="1197" href="Algebra.Definitions.RawMonoid.html#1197" class="Function Operator">_×_</a> <a id="1201" class="Symbol">:</a> <a id="1203" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1205" class="Symbol">→</a> <a id="1207" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a> <a id="1215" class="Symbol">→</a> <a id="1217" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a>
<a id="1225" class="Number">0</a>     <a id="1231" href="Algebra.Definitions.RawMonoid.html#1197" class="Function Operator">×</a> <a id="1233" href="Algebra.Definitions.RawMonoid.html#1233" class="Bound">x</a> <a id="1235" class="Symbol">=</a> <a id="1237" href="Algebra.Definitions.RawMonoid.html#632" class="Field">0#</a>
<a id="1240" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1244" href="Algebra.Definitions.RawMonoid.html#1244" class="Bound">n</a> <a id="1246" href="Algebra.Definitions.RawMonoid.html#1197" class="Function Operator">×</a> <a id="1248" href="Algebra.Definitions.RawMonoid.html#1248" class="Bound">x</a> <a id="1250" class="Symbol">=</a> <a id="1252" href="Algebra.Definitions.RawMonoid.html#1248" class="Bound">x</a> <a id="1254" href="Algebra.Definitions.RawMonoid.html#621" class="Field Operator">+</a> <a id="1256" class="Symbol">(</a><a id="1257" href="Algebra.Definitions.RawMonoid.html#1244" class="Bound">n</a> <a id="1259" href="Algebra.Definitions.RawMonoid.html#1197" class="Function Operator">×</a> <a id="1261" href="Algebra.Definitions.RawMonoid.html#1248" class="Bound">x</a><a id="1262" class="Symbol">)</a>

<a id="1265" class="Comment">------------------------------------------------------------------------</a>
<a id="1338" class="Comment">-- Type-checking optimised definition</a>

<a id="1377" class="Comment">-- For use in code where high performance at type-checking time is</a>
<a id="1444" class="Comment">-- important, e.g. solvers and tactics. Firstly it avoids unnecessarily</a>
<a id="1516" class="Comment">-- multiplying by the unit if possible, speeding up type-checking and</a>
<a id="1586" class="Comment">-- makes for much more readable proofs:</a>
<a id="1626" class="Comment">--</a>
<a id="1629" class="Comment">--     Standard definition:  x * 2 = x + x + 0#</a>
<a id="1677" class="Comment">--     Optimised definition: x * 2 = x + x</a>
<a id="1720" class="Comment">--</a>
<a id="1723" class="Comment">-- Secondly, associates to the left which, counterintuitive as it may</a>
<a id="1793" class="Comment">-- seem, also speeds up typechecking.</a>
<a id="1831" class="Comment">--</a>
<a id="1834" class="Comment">--     Standard definition: x * 3 = x + (x + (x + 0#))</a>
<a id="1889" class="Comment">--     Our definition:      x * 3 = (x + x) + x</a>

<a id="1938" class="Keyword">infixl</a> <a id="1945" class="Number">8</a> <a id="1947" href="Algebra.Definitions.RawMonoid.html#1953" class="Function Operator">_×′_</a>

<a id="_×′_"></a><a id="1953" href="Algebra.Definitions.RawMonoid.html#1953" class="Function Operator">_×′_</a> <a id="1958" class="Symbol">:</a> <a id="1960" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1962" class="Symbol">→</a> <a id="1964" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a> <a id="1972" class="Symbol">→</a> <a id="1974" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a>
<a id="1982" class="Number">0</a>     <a id="1988" href="Algebra.Definitions.RawMonoid.html#1953" class="Function Operator">×′</a> <a id="1991" href="Algebra.Definitions.RawMonoid.html#1991" class="Bound">x</a> <a id="1993" class="Symbol">=</a> <a id="1995" href="Algebra.Definitions.RawMonoid.html#632" class="Field">0#</a>
<a id="1998" class="Number">1</a>     <a id="2004" href="Algebra.Definitions.RawMonoid.html#1953" class="Function Operator">×′</a> <a id="2007" href="Algebra.Definitions.RawMonoid.html#2007" class="Bound">x</a> <a id="2009" class="Symbol">=</a> <a id="2011" href="Algebra.Definitions.RawMonoid.html#2007" class="Bound">x</a>
<a id="2013" href="Agda.Builtin.Nat.html#234" class="CatchallClause InductiveConstructor">suc</a><a id="2016" class="CatchallClause"> </a><a id="2017" href="Algebra.Definitions.RawMonoid.html#2017" class="CatchallClause Bound">n</a><a id="2018" class="CatchallClause"> </a><a id="2019" href="Algebra.Definitions.RawMonoid.html#1953" class="CatchallClause Function Operator">×′</a><a id="2021" class="CatchallClause"> </a><a id="2022" href="Algebra.Definitions.RawMonoid.html#2022" class="CatchallClause Bound">x</a> <a id="2024" class="Symbol">=</a> <a id="2026" href="Algebra.Definitions.RawMonoid.html#2017" class="Bound">n</a> <a id="2028" href="Algebra.Definitions.RawMonoid.html#1953" class="Function Operator">×′</a> <a id="2031" href="Algebra.Definitions.RawMonoid.html#2022" class="Bound">x</a> <a id="2033" href="Algebra.Definitions.RawMonoid.html#621" class="Field Operator">+</a> <a id="2035" href="Algebra.Definitions.RawMonoid.html#2022" class="Bound">x</a>

<a id="2038" class="Symbol">{-#</a> <a id="2042" class="Keyword">INLINE</a> <a id="2049" href="Algebra.Definitions.RawMonoid.html#1953" class="Function Operator">_×′_</a> <a id="2054" class="Symbol">#-}</a>

<a id="2059" class="Comment">------------------------------------------------------------------------</a>
<a id="2132" class="Comment">-- Summation</a>
<a id="2145" class="Comment">------------------------------------------------------------------------</a>

<a id="sum"></a><a id="2219" href="Algebra.Definitions.RawMonoid.html#2219" class="Function">sum</a> <a id="2223" class="Symbol">:</a> <a id="2225" class="Symbol">∀</a> <a id="2227" class="Symbol">{</a><a id="2228" href="Algebra.Definitions.RawMonoid.html#2228" class="Bound">n</a><a id="2229" class="Symbol">}</a> <a id="2231" class="Symbol">→</a> <a id="2233" href="Data.Vec.Functional.html#1232" class="Function">Vector</a> <a id="2240" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a> <a id="2248" href="Algebra.Definitions.RawMonoid.html#2228" class="Bound">n</a> <a id="2250" class="Symbol">→</a> <a id="2252" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a>
<a id="2260" href="Algebra.Definitions.RawMonoid.html#2219" class="Function">sum</a> <a id="2264" class="Symbol">=</a> <a id="2266" href="Data.Vec.Functional.html#3119" class="Function">Vector.foldr</a> <a id="2279" href="Algebra.Definitions.RawMonoid.html#621" class="Field Operator">_+_</a> <a id="2283" href="Algebra.Definitions.RawMonoid.html#632" class="Field">0#</a>

<a id="2287" class="Comment">------------------------------------------------------------------------</a>
<a id="2360" class="Comment">-- &#39;Guard&#39; with a Boolean: action of the Boolean (true,∧)-rawMonoid</a>
<a id="2428" class="Comment">------------------------------------------------------------------------</a>

<a id="2502" class="Keyword">infixr</a> <a id="2509" class="Number">8</a> <a id="2511" href="Algebra.Definitions.RawMonoid.html#2518" class="Function Operator">_?&gt;₀_</a>

<a id="_?&gt;₀_"></a><a id="2518" href="Algebra.Definitions.RawMonoid.html#2518" class="Function Operator">_?&gt;₀_</a> <a id="2524" class="Symbol">:</a> <a id="2526" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="2531" class="Symbol">→</a> <a id="2533" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a> <a id="2541" class="Symbol">→</a> <a id="2543" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a>
<a id="2551" href="Algebra.Definitions.RawMonoid.html#2551" class="Bound">b</a> <a id="2553" href="Algebra.Definitions.RawMonoid.html#2518" class="Function Operator">?&gt;₀</a> <a id="2557" href="Algebra.Definitions.RawMonoid.html#2557" class="Bound">x</a> <a id="2559" class="Symbol">=</a> <a id="2561" href="Data.Bool.Base.html#1515" class="Function Operator">if</a> <a id="2564" href="Algebra.Definitions.RawMonoid.html#2551" class="Bound">b</a> <a id="2566" href="Data.Bool.Base.html#1515" class="Function Operator">then</a> <a id="2571" href="Algebra.Definitions.RawMonoid.html#2557" class="Bound">x</a> <a id="2573" href="Data.Bool.Base.html#1515" class="Function Operator">else</a> <a id="2578" href="Algebra.Definitions.RawMonoid.html#632" class="Field">0#</a>

<a id="2582" class="Comment">-- accumulator optimisation</a>
<a id="2610" class="Keyword">infixl</a> <a id="2617" class="Number">8</a> <a id="2619" href="Algebra.Definitions.RawMonoid.html#2627" class="Function Operator">_?&gt;_∙_</a>

<a id="_?&gt;_∙_"></a><a id="2627" href="Algebra.Definitions.RawMonoid.html#2627" class="Function Operator">_?&gt;_∙_</a> <a id="2634" class="Symbol">:</a> <a id="2636" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="2641" class="Symbol">→</a> <a id="2643" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a> <a id="2651" class="Symbol">→</a> <a id="2653" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a> <a id="2661" class="Symbol">→</a> <a id="2663" href="Algebra.Bundles.Raw.html#1803" class="Field">Carrier</a>
<a id="2671" href="Algebra.Definitions.RawMonoid.html#2671" class="Bound">b</a> <a id="2673" href="Algebra.Definitions.RawMonoid.html#2627" class="Function Operator">?&gt;</a> <a id="2676" href="Algebra.Definitions.RawMonoid.html#2676" class="Bound">x</a> <a id="2678" href="Algebra.Definitions.RawMonoid.html#2627" class="Function Operator">∙</a> <a id="2680" href="Algebra.Definitions.RawMonoid.html#2680" class="Bound">y</a> <a id="2682" class="Symbol">=</a> <a id="2684" href="Data.Bool.Base.html#1515" class="Function Operator">if</a> <a id="2687" href="Algebra.Definitions.RawMonoid.html#2671" class="Bound">b</a> <a id="2689" href="Data.Bool.Base.html#1515" class="Function Operator">then</a> <a id="2694" href="Algebra.Definitions.RawMonoid.html#2676" class="Bound">x</a> <a id="2696" href="Algebra.Definitions.RawMonoid.html#621" class="Field Operator">+</a> <a id="2698" href="Algebra.Definitions.RawMonoid.html#2680" class="Bound">y</a> <a id="2700" href="Data.Bool.Base.html#1515" class="Function Operator">else</a> <a id="2705" href="Algebra.Definitions.RawMonoid.html#2680" class="Bound">y</a>
</pre></body></html>