<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Reflection.AnnotatedAST.Free</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Computing free variable annotations on reflected syntax.</a>
<a id="166" class="Comment">------------------------------------------------------------------------</a>

<a id="240" class="Symbol">{-#</a> <a id="244" class="Keyword">OPTIONS</a> <a id="252" class="Pragma">--safe</a> <a id="259" class="Pragma">--with-K</a> <a id="268" class="Symbol">#-}</a>

<a id="273" class="Keyword">module</a> <a id="280" href="Reflection.AnnotatedAST.Free.html" class="Module">Reflection.AnnotatedAST.Free</a> <a id="309" class="Keyword">where</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a>               <a id="357" class="Keyword">using</a> <a id="363" class="Symbol">(</a><a id="364" href="Data.Bool.Base.html#1292" class="Function Operator">if_then_else_</a><a id="377" class="Symbol">)</a>
<a id="379" class="Keyword">open</a> <a id="384" class="Keyword">import</a> <a id="391" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>                <a id="420" class="Keyword">using</a> <a id="426" class="Symbol">(</a><a id="427" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="428" class="Symbol">;</a> <a id="430" href="Data.Nat.Base.html#3140" class="Primitive Operator">_∸_</a><a id="433" class="Symbol">;</a> <a id="435" href="Data.Nat.Base.html#6063" class="Function">compare</a><a id="442" class="Symbol">;</a> <a id="444" href="Data.Nat.Base.html#1239" class="Primitive Operator">_&lt;ᵇ_</a><a id="448" class="Symbol">;</a> <a id="450" href="Data.Nat.Base.html#5941" class="InductiveConstructor">less</a><a id="454" class="Symbol">;</a> <a id="456" href="Data.Nat.Base.html#5986" class="InductiveConstructor">equal</a><a id="461" class="Symbol">;</a> <a id="463" href="Data.Nat.Base.html#6019" class="InductiveConstructor">greater</a><a id="470" class="Symbol">)</a>
<a id="472" class="Keyword">open</a> <a id="477" class="Keyword">import</a> <a id="484" href="Data.List.Base.html" class="Module">Data.List.Base</a>               <a id="513" class="Keyword">using</a> <a id="519" class="Symbol">(</a><a id="520" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="524" class="Symbol">;</a> <a id="526" href="Data.List.Base.html#7191" class="InductiveConstructor">[]</a><a id="528" class="Symbol">;</a> <a id="530" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="533" class="Symbol">;</a> <a id="535" href="Data.List.Base.html#5049" class="Function Operator">[_]</a><a id="538" class="Symbol">;</a> <a id="540" href="Data.List.Base.html#4474" class="Function">concatMap</a><a id="549" class="Symbol">;</a> <a id="551" href="Data.List.Base.html#4888" class="Function">length</a><a id="557" class="Symbol">)</a>
<a id="559" class="Keyword">open</a> <a id="564" class="Keyword">import</a> <a id="571" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="600" class="Keyword">using</a> <a id="606" class="Symbol">(</a><a id="607" href="Data.List.Relation.Unary.All.html#1581" class="InductiveConstructor Operator">_∷_</a><a id="610" class="Symbol">)</a>
<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="Data.Product.html" class="Module">Data.Product</a>                 <a id="653" class="Keyword">using</a> <a id="659" class="Symbol">(</a><a id="660" href="Data.Product.html#1176" class="Function Operator">_×_</a><a id="663" class="Symbol">;</a> <a id="665" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="668" class="Symbol">;</a> <a id="670" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="675" class="Symbol">;</a> <a id="677" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="682" class="Symbol">)</a>
<a id="684" class="Keyword">open</a> <a id="689" class="Keyword">import</a> <a id="696" href="Data.String.Base.html" class="Module">Data.String.Base</a>             <a id="725" class="Keyword">using</a> <a id="731" class="Symbol">(</a><a id="732" href="Agda.Builtin.String.html#318" class="Postulate">String</a><a id="738" class="Symbol">)</a>

<a id="741" class="Keyword">open</a> <a id="746" class="Keyword">import</a> <a id="753" href="Reflection.html" class="Module">Reflection</a>
<a id="764" class="Keyword">open</a> <a id="769" class="Keyword">import</a> <a id="776" href="Reflection.AST.Universe.html" class="Module">Reflection.AST.Universe</a>
<a id="800" class="Keyword">open</a> <a id="805" class="Keyword">import</a> <a id="812" href="Reflection.AnnotatedAST.html" class="Module">Reflection.AnnotatedAST</a>

<a id="837" class="Comment">------------------------------------------------------------------------</a>
<a id="910" class="Comment">-- Free variable sets as lists of natural numbers</a>

<a id="FVs"></a><a id="961" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a> <a id="965" class="Symbol">:</a> <a id="967" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="971" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a> <a id="975" class="Symbol">=</a> <a id="977" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="982" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="984" class="Comment">-- ordered, no duplicates</a>

<a id="1011" class="Keyword">private</a>

  <a id="1022" class="Keyword">infixr</a> <a id="1029" class="Number">3</a> <a id="1031" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">_∪_</a>

  <a id="_∪_"></a><a id="1038" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">_∪_</a> <a id="1042" class="Symbol">:</a> <a id="1044" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a> <a id="1048" class="Symbol">→</a> <a id="1050" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a> <a id="1054" class="Symbol">→</a> <a id="1056" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a>
  <a id="1062" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>     <a id="1069" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="1071" href="Reflection.AnnotatedAST.Free.html#1071" class="Bound">ys</a> <a id="1074" class="Symbol">=</a> <a id="1076" href="Reflection.AnnotatedAST.Free.html#1071" class="Bound">ys</a>
  <a id="1081" href="Reflection.AnnotatedAST.Free.html#1081" class="CatchallClause Bound">xs</a><a id="1083" class="CatchallClause">     </a><a id="1088" href="Reflection.AnnotatedAST.Free.html#1038" class="CatchallClause Function Operator">∪</a><a id="1089" class="CatchallClause"> </a><a id="1090" href="Agda.Builtin.List.html#167" class="CatchallClause InductiveConstructor">[]</a> <a id="1093" class="Symbol">=</a> <a id="1095" href="Reflection.AnnotatedAST.Free.html#1081" class="Bound">xs</a>
  <a id="1100" href="Reflection.AnnotatedAST.Free.html#1100" class="Bound">x</a> <a id="1102" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1104" href="Reflection.AnnotatedAST.Free.html#1104" class="Bound">xs</a> <a id="1107" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="1109" href="Reflection.AnnotatedAST.Free.html#1109" class="Bound">y</a> <a id="1111" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1113" href="Reflection.AnnotatedAST.Free.html#1113" class="Bound">ys</a> <a id="1116" class="Keyword">with</a> <a id="1121" href="Data.Nat.Base.html#6063" class="Function">compare</a> <a id="1129" href="Reflection.AnnotatedAST.Free.html#1100" class="Bound">x</a> <a id="1131" href="Reflection.AnnotatedAST.Free.html#1109" class="Bound">y</a> <a id="1133" class="Symbol">|</a> <a id="1135" href="Reflection.AnnotatedAST.Free.html#1100" class="Bound">x</a> <a id="1137" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1139" href="Reflection.AnnotatedAST.Free.html#1104" class="Bound">xs</a> <a id="1142" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="1144" href="Reflection.AnnotatedAST.Free.html#1113" class="Bound">ys</a>
  <a id="1149" class="Symbol">...</a> <a id="1153" class="Symbol">|</a> <a id="1155" href="Data.Nat.Base.html#5941" class="InductiveConstructor">less</a>    <a id="1163" href="Reflection.AnnotatedAST.Free.html#1163" class="Bound">x</a> <a id="1165" class="Symbol">_</a> <a id="1167" class="Symbol">|</a> <a id="1169" class="Symbol">_</a>   <a id="1173" class="Symbol">=</a> <a id="1175" href="Reflection.AnnotatedAST.Free.html#1163" class="Bound">x</a> <a id="1177" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1179" class="Symbol">(</a><a id="1180" class="Bound">xs</a> <a id="1183" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="1185" class="Bound">y</a> <a id="1187" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1189" class="Bound">ys</a><a id="1191" class="Symbol">)</a>
  <a id="1195" class="Symbol">...</a> <a id="1199" class="Symbol">|</a> <a id="1201" href="Data.Nat.Base.html#5986" class="InductiveConstructor">equal</a>   <a id="1209" href="Reflection.AnnotatedAST.Free.html#1209" class="Bound">x</a>   <a id="1213" class="Symbol">|</a> <a id="1215" class="Symbol">_</a>   <a id="1219" class="Symbol">=</a> <a id="1221" href="Reflection.AnnotatedAST.Free.html#1209" class="Bound">x</a> <a id="1223" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1225" class="Symbol">(</a><a id="1226" class="Bound">xs</a> <a id="1229" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="1231" class="Bound">ys</a><a id="1233" class="Symbol">)</a>
  <a id="1237" class="Symbol">...</a> <a id="1241" class="Symbol">|</a> <a id="1243" href="Data.Nat.Base.html#6019" class="InductiveConstructor">greater</a> <a id="1251" href="Reflection.AnnotatedAST.Free.html#1251" class="Bound">y</a> <a id="1253" class="Symbol">_</a> <a id="1255" class="Symbol">|</a> <a id="1257" href="Reflection.AnnotatedAST.Free.html#1257" class="Bound">rec</a> <a id="1261" class="Symbol">=</a> <a id="1263" href="Reflection.AnnotatedAST.Free.html#1251" class="Bound">y</a> <a id="1265" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1267" href="Reflection.AnnotatedAST.Free.html#1257" class="Bound">rec</a>

  <a id="insert"></a><a id="1274" href="Reflection.AnnotatedAST.Free.html#1274" class="Function">insert</a> <a id="1281" class="Symbol">:</a> <a id="1283" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1285" class="Symbol">→</a> <a id="1287" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a> <a id="1291" class="Symbol">→</a> <a id="1293" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a>
  <a id="1299" href="Reflection.AnnotatedAST.Free.html#1274" class="Function">insert</a> <a id="1306" href="Reflection.AnnotatedAST.Free.html#1306" class="Bound">x</a> <a id="1308" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>       <a id="1317" class="Symbol">=</a> <a id="1319" href="Reflection.AnnotatedAST.Free.html#1306" class="Bound">x</a> <a id="1321" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1323" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="1328" href="Reflection.AnnotatedAST.Free.html#1274" class="Function">insert</a> <a id="1335" href="Reflection.AnnotatedAST.Free.html#1335" class="Bound">x</a> <a id="1337" class="Symbol">(</a><a id="1338" href="Reflection.AnnotatedAST.Free.html#1338" class="Bound">y</a> <a id="1340" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1342" href="Reflection.AnnotatedAST.Free.html#1342" class="Bound">xs</a><a id="1344" class="Symbol">)</a> <a id="1346" class="Keyword">with</a> <a id="1351" href="Data.Nat.Base.html#6063" class="Function">compare</a> <a id="1359" href="Reflection.AnnotatedAST.Free.html#1335" class="Bound">x</a> <a id="1361" href="Reflection.AnnotatedAST.Free.html#1338" class="Bound">y</a>
  <a id="1365" class="Symbol">...</a> <a id="1369" class="Symbol">|</a> <a id="1371" href="Data.Nat.Base.html#5941" class="InductiveConstructor">less</a>    <a id="1379" href="Reflection.AnnotatedAST.Free.html#1379" class="Bound">x</a> <a id="1381" href="Reflection.AnnotatedAST.Free.html#1381" class="Bound">k</a> <a id="1383" class="Symbol">=</a> <a id="1385" href="Reflection.AnnotatedAST.Free.html#1379" class="Bound">x</a> <a id="1387" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1389" class="Bound">y</a> <a id="1391" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1393" class="Bound">xs</a>
  <a id="1398" class="Symbol">...</a> <a id="1402" class="Symbol">|</a> <a id="1404" href="Data.Nat.Base.html#5986" class="InductiveConstructor">equal</a>   <a id="1412" href="Reflection.AnnotatedAST.Free.html#1412" class="Bound">x</a>   <a id="1416" class="Symbol">=</a> <a id="1418" class="Bound">y</a> <a id="1420" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1422" class="Bound">xs</a>
  <a id="1427" class="Symbol">...</a> <a id="1431" class="Symbol">|</a> <a id="1433" href="Data.Nat.Base.html#6019" class="InductiveConstructor">greater</a> <a id="1441" href="Reflection.AnnotatedAST.Free.html#1441" class="Bound">y</a> <a id="1443" href="Reflection.AnnotatedAST.Free.html#1443" class="Bound">k</a> <a id="1445" class="Symbol">=</a> <a id="1447" href="Reflection.AnnotatedAST.Free.html#1441" class="Bound">y</a> <a id="1449" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1451" href="Reflection.AnnotatedAST.Free.html#1274" class="Function">insert</a> <a id="1458" class="Bound">x</a> <a id="1460" class="Bound">xs</a>

  <a id="close"></a><a id="1466" href="Reflection.AnnotatedAST.Free.html#1466" class="Function">close</a> <a id="1472" class="Symbol">:</a> <a id="1474" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1476" class="Symbol">→</a> <a id="1478" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a> <a id="1482" class="Symbol">→</a> <a id="1484" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a>
  <a id="1490" href="Reflection.AnnotatedAST.Free.html#1466" class="Function">close</a> <a id="1496" href="Reflection.AnnotatedAST.Free.html#1496" class="Bound">k</a> <a id="1498" class="Symbol">=</a> <a id="1500" href="Data.List.Base.html#4474" class="Function">concatMap</a> <a id="1510" class="Symbol">λ</a> <a id="1512" href="Reflection.AnnotatedAST.Free.html#1512" class="Bound">x</a> <a id="1514" class="Symbol">→</a> <a id="1516" href="Data.Bool.Base.html#1292" class="Function Operator">if</a> <a id="1519" href="Reflection.AnnotatedAST.Free.html#1512" class="Bound">x</a> <a id="1521" href="Data.Nat.Base.html#1239" class="Primitive Operator">&lt;ᵇ</a> <a id="1524" href="Reflection.AnnotatedAST.Free.html#1496" class="Bound">k</a> <a id="1526" href="Data.Bool.Base.html#1292" class="Function Operator">then</a> <a id="1531" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="1534" href="Data.Bool.Base.html#1292" class="Function Operator">else</a> <a id="1539" href="Data.List.Base.html#5049" class="Function Operator">[</a> <a id="1541" href="Reflection.AnnotatedAST.Free.html#1512" class="Bound">x</a> <a id="1543" href="Data.Nat.Base.html#3140" class="Primitive Operator">∸</a> <a id="1545" href="Reflection.AnnotatedAST.Free.html#1496" class="Bound">k</a> <a id="1547" href="Data.List.Base.html#5049" class="Function Operator">]</a>


<a id="1551" class="Comment">------------------------------------------------------------------------</a>
<a id="1624" class="Comment">-- Annotation function computing free variables</a>

<a id="freeVars"></a><a id="1673" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="1682" class="Symbol">:</a> <a id="1684" href="Reflection.AnnotatedAST.html#5878" class="Function">AnnotationFun</a> <a id="1698" class="Symbol">(λ</a> <a id="1701" href="Reflection.AnnotatedAST.Free.html#1701" class="Bound">_</a> <a id="1703" class="Symbol">→</a> <a id="1705" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a><a id="1708" class="Symbol">)</a>
<a id="1710" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="1719" href="Reflection.AST.Universe.html#684" class="InductiveConstructor">⟨term⟩</a>    <a id="1729" class="Symbol">(</a><a id="1730" href="Reflection.AnnotatedAST.html#3465" class="InductiveConstructor">var</a> <a id="1734" href="Reflection.AnnotatedAST.Free.html#1734" class="Bound">x</a> <a id="1736" class="Symbol">(</a><a id="1737" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="1739" href="Reflection.AnnotatedAST.Free.html#1739" class="Bound">fv</a> <a id="1742" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="1744" class="Symbol">_))</a>                                      <a id="1785" class="Symbol">=</a> <a id="1787" href="Reflection.AnnotatedAST.Free.html#1274" class="Function">insert</a> <a id="1794" href="Reflection.AnnotatedAST.Free.html#1734" class="Bound">x</a> <a id="1796" href="Reflection.AnnotatedAST.Free.html#1739" class="Bound">fv</a>
<a id="1799" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="1808" href="Reflection.AST.Universe.html#702" class="InductiveConstructor">⟨pat⟩</a>     <a id="1818" class="Symbol">(</a><a id="1819" href="Reflection.AnnotatedAST.html#4982" class="InductiveConstructor">var</a> <a id="1823" href="Reflection.AnnotatedAST.Free.html#1823" class="Bound">x</a><a id="1824" class="Symbol">)</a>                                                 <a id="1874" class="Symbol">=</a> <a id="1876" href="Reflection.AnnotatedAST.Free.html#1823" class="Bound">x</a> <a id="1878" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1880" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
<a id="1883" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="1892" href="Reflection.AST.Universe.html#702" class="InductiveConstructor">⟨pat⟩</a>     <a id="1902" class="Symbol">(</a><a id="1903" href="Reflection.AnnotatedAST.html#5106" class="InductiveConstructor">absurd</a> <a id="1910" href="Reflection.AnnotatedAST.Free.html#1910" class="Bound">x</a><a id="1911" class="Symbol">)</a>                                              <a id="1958" class="Symbol">=</a> <a id="1960" href="Reflection.AnnotatedAST.Free.html#1910" class="Bound">x</a> <a id="1962" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1964" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
         <a id="1976" class="Comment">-- Note: variables are bound in the clause telescope, so we treat pattern variables as free</a>
<a id="2068" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="2077" href="Reflection.AST.Universe.html#738" class="InductiveConstructor">⟨clause⟩</a>  <a id="2087" class="Symbol">(</a><a id="2088" href="Reflection.AnnotatedAST.html#4230" class="InductiveConstructor">clause</a> <a id="2095" class="Symbol">{</a><a id="2096" class="Argument">tel</a> <a id="2100" class="Symbol">=</a> <a id="2102" href="Reflection.AnnotatedAST.Free.html#2102" class="Bound">Γ</a><a id="2103" class="Symbol">}</a> <a id="2105" class="Symbol">(</a><a id="2106" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2108" href="Reflection.AnnotatedAST.Free.html#2108" class="Bound">fvΓ</a> <a id="2112" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2114" class="Symbol">_)</a> <a id="2117" class="Symbol">(</a><a id="2118" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2120" href="Reflection.AnnotatedAST.Free.html#2120" class="Bound">fvps</a> <a id="2125" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2127" class="Symbol">_)</a> <a id="2130" class="Symbol">(</a><a id="2131" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2133" href="Reflection.AnnotatedAST.Free.html#2133" class="Bound">fvt</a> <a id="2137" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2139" class="Symbol">_))</a> <a id="2143" class="Symbol">=</a> <a id="2145" href="Reflection.AnnotatedAST.Free.html#2108" class="Bound">fvΓ</a> <a id="2149" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="2151" href="Reflection.AnnotatedAST.Free.html#1466" class="Function">close</a> <a id="2157" class="Symbol">(</a><a id="2158" href="Data.List.Base.html#4888" class="Function">length</a> <a id="2165" href="Reflection.AnnotatedAST.Free.html#2102" class="Bound">Γ</a><a id="2166" class="Symbol">)</a> <a id="2168" class="Symbol">(</a><a id="2169" href="Reflection.AnnotatedAST.Free.html#2120" class="Bound">fvps</a> <a id="2174" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="2176" href="Reflection.AnnotatedAST.Free.html#2133" class="Bound">fvt</a><a id="2179" class="Symbol">)</a>
<a id="2181" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="2190" href="Reflection.AST.Universe.html#738" class="InductiveConstructor">⟨clause⟩</a>  <a id="2200" class="Symbol">(</a><a id="2201" href="Reflection.AnnotatedAST.html#4371" class="InductiveConstructor">absurd-clause</a> <a id="2215" class="Symbol">{</a><a id="2216" class="Argument">tel</a> <a id="2220" class="Symbol">=</a> <a id="2222" href="Reflection.AnnotatedAST.Free.html#2222" class="Bound">Γ</a><a id="2223" class="Symbol">}</a> <a id="2225" class="Symbol">(</a><a id="2226" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2228" href="Reflection.AnnotatedAST.Free.html#2228" class="Bound">fvΓ</a> <a id="2232" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2234" class="Symbol">_)</a> <a id="2237" class="Symbol">(</a><a id="2238" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2240" href="Reflection.AnnotatedAST.Free.html#2240" class="Bound">fvps</a> <a id="2245" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2247" class="Symbol">_))</a>      <a id="2256" class="Symbol">=</a> <a id="2258" href="Reflection.AnnotatedAST.Free.html#2228" class="Bound">fvΓ</a> <a id="2262" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="2264" href="Reflection.AnnotatedAST.Free.html#1466" class="Function">close</a> <a id="2270" class="Symbol">(</a><a id="2271" href="Data.List.Base.html#4888" class="Function">length</a> <a id="2278" href="Reflection.AnnotatedAST.Free.html#2222" class="Bound">Γ</a><a id="2279" class="Symbol">)</a> <a id="2281" href="Reflection.AnnotatedAST.Free.html#2240" class="Bound">fvps</a>
<a id="2286" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="2295" class="Symbol">(</a><a id="2296" href="Reflection.AST.Universe.html#806" class="InductiveConstructor">⟨abs⟩</a> <a id="2302" href="Reflection.AnnotatedAST.Free.html#2302" class="Bound">u</a><a id="2303" class="Symbol">)</a> <a id="2305" class="Symbol">(</a><a id="2306" href="Reflection.AnnotatedAST.html#2478" class="InductiveConstructor">abs</a> <a id="2310" class="Symbol">_</a> <a id="2312" class="Symbol">(</a><a id="2313" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2315" href="Reflection.AnnotatedAST.Free.html#2315" class="Bound">fv</a> <a id="2318" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2320" class="Symbol">_))</a>                                      <a id="2361" class="Symbol">=</a> <a id="2363" href="Reflection.AnnotatedAST.Free.html#1466" class="Function">close</a> <a id="2369" class="Number">1</a> <a id="2371" href="Reflection.AnnotatedAST.Free.html#2315" class="Bound">fv</a>
<a id="2374" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="2383" href="Reflection.AST.Universe.html#863" class="InductiveConstructor">⟨tel⟩</a>     <a id="2393" class="Symbol">(</a><a id="2394" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟨</a> <a id="2396" href="Reflection.AnnotatedAST.Free.html#2396" class="Bound">fv</a> <a id="2399" href="Reflection.AnnotatedAST.html#1688" class="InductiveConstructor Operator">⟩</a> <a id="2401" class="Symbol">_</a> <a id="2403" href="Data.List.Relation.Unary.All.html#1581" class="InductiveConstructor Operator">∷</a> <a id="2405" href="Reflection.AnnotatedAST.Free.html#2405" class="Bound">xs</a><a id="2407" class="Symbol">)</a>                                         <a id="2449" class="Symbol">=</a> <a id="2451" href="Reflection.AnnotatedAST.Free.html#2396" class="Bound">fv</a> <a id="2454" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">∪</a> <a id="2456" href="Reflection.AnnotatedAST.Free.html#1466" class="Function">close</a> <a id="2462" class="Number">1</a> <a id="2464" class="Symbol">(</a><a id="2465" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a> <a id="2474" class="Symbol">_</a> <a id="2476" href="Reflection.AnnotatedAST.Free.html#2405" class="Bound">xs</a><a id="2478" class="Symbol">)</a>
<a id="2480" href="Reflection.AnnotatedAST.Free.html#1673" class="CatchallClause Function">freeVars</a><a id="2488" class="CatchallClause"> </a><a id="2489" href="Reflection.AnnotatedAST.Free.html#2489" class="CatchallClause Bound">u</a><a id="2490" class="CatchallClause">         </a><a id="2499" href="Reflection.AnnotatedAST.Free.html#2499" class="CatchallClause Bound">t</a>                                                       <a id="2555" class="Symbol">=</a> <a id="2557" href="Reflection.AnnotatedAST.html#10787" class="Function">defaultAnn</a> <a id="2568" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="2571" href="Reflection.AnnotatedAST.Free.html#1038" class="Function Operator">_∪_</a> <a id="2575" href="Reflection.AnnotatedAST.Free.html#2489" class="Bound">u</a> <a id="2577" href="Reflection.AnnotatedAST.Free.html#2499" class="Bound">t</a>

<a id="annotateFVs"></a><a id="2580" href="Reflection.AnnotatedAST.Free.html#2580" class="Function">annotateFVs</a> <a id="2592" class="Symbol">:</a> <a id="2594" class="Symbol">∀</a> <a id="2596" class="Symbol">{</a><a id="2597" href="Reflection.AnnotatedAST.Free.html#2597" class="Bound">u</a><a id="2598" class="Symbol">}</a> <a id="2600" class="Symbol">→</a> <a id="2602" class="Symbol">(</a><a id="2603" href="Reflection.AnnotatedAST.Free.html#2603" class="Bound">t</a> <a id="2605" class="Symbol">:</a> <a id="2607" href="Reflection.AST.Universe.html#904" class="Function Operator">⟦</a> <a id="2609" href="Reflection.AnnotatedAST.Free.html#2597" class="Bound">u</a> <a id="2611" href="Reflection.AST.Universe.html#904" class="Function Operator">⟧</a><a id="2612" class="Symbol">)</a> <a id="2614" class="Symbol">→</a> <a id="2616" href="Reflection.AnnotatedAST.html#5627" class="Function">Annotated</a> <a id="2626" class="Symbol">(λ</a> <a id="2629" href="Reflection.AnnotatedAST.Free.html#2629" class="Bound">_</a> <a id="2631" class="Symbol">→</a> <a id="2633" href="Reflection.AnnotatedAST.Free.html#961" class="Function">FVs</a><a id="2636" class="Symbol">)</a> <a id="2638" href="Reflection.AnnotatedAST.Free.html#2603" class="Bound">t</a>
<a id="2640" href="Reflection.AnnotatedAST.Free.html#2580" class="Function">annotateFVs</a> <a id="2652" class="Symbol">=</a> <a id="2654" href="Reflection.AnnotatedAST.html#8317" class="Function">annotate</a> <a id="2663" href="Reflection.AnnotatedAST.Free.html#1673" class="Function">freeVars</a>
</pre></body></html>