<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Reflection.AnnotatedAST.Free</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Computing free variable annotations on reflected syntax.</a>
<a id="166" class="Comment">------------------------------------------------------------------------</a>

<a id="240" class="Symbol">{-#</a> <a id="244" class="Keyword">OPTIONS</a> <a id="252" class="Pragma">--safe</a> <a id="259" class="Pragma">--with-K</a> <a id="268" class="Symbol">#-}</a>

<a id="273" class="Keyword">module</a> <a id="280" href="Reflection.AnnotatedAST.Free.html" class="Module">Reflection.AnnotatedAST.Free</a> <a id="309" class="Keyword">where</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="343" class="Keyword">using</a> <a id="349" class="Symbol">(</a><a id="350" href="Data.Bool.Base.html#1515" class="Function Operator">if_then_else_</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="391" class="Keyword">using</a> <a id="397" class="Symbol">(</a><a id="398" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="399" class="Symbol">;</a> <a id="401" href="Data.Nat.Base.html#4462" class="Primitive Operator">_∸_</a><a id="404" class="Symbol">;</a> <a id="406" href="Data.Nat.Base.html#9190" class="Function">compare</a><a id="413" class="Symbol">;</a> <a id="415" href="Data.Nat.Base.html#1463" class="Primitive Operator">_&lt;ᵇ_</a><a id="419" class="Symbol">;</a> <a id="421" href="Data.Nat.Base.html#9068" class="InductiveConstructor">less</a><a id="425" class="Symbol">;</a> <a id="427" href="Data.Nat.Base.html#9113" class="InductiveConstructor">equal</a><a id="432" class="Symbol">;</a> <a id="434" href="Data.Nat.Base.html#9146" class="InductiveConstructor">greater</a><a id="441" class="Symbol">)</a>
<a id="443" class="Keyword">open</a> <a id="448" class="Keyword">import</a> <a id="455" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="470" class="Keyword">using</a> <a id="476" class="Symbol">(</a><a id="477" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="481" class="Symbol">;</a> <a id="483" href="Data.List.Base.html#7301" class="InductiveConstructor">[]</a><a id="485" class="Symbol">;</a> <a id="487" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="490" class="Symbol">;</a> <a id="492" href="Data.List.Base.html#4907" class="Function Operator">[_]</a><a id="495" class="Symbol">;</a> <a id="497" href="Data.List.Base.html#4384" class="Function">concatMap</a><a id="506" class="Symbol">;</a> <a id="508" href="Data.List.Base.html#4746" class="Function">length</a><a id="514" class="Symbol">)</a>
<a id="516" class="Keyword">open</a> <a id="521" class="Keyword">import</a> <a id="528" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="557" class="Keyword">using</a> <a id="563" class="Symbol">(</a><a id="564" href="Data.List.Relation.Unary.All.html#1718" class="InductiveConstructor Operator">_∷_</a><a id="567" class="Symbol">)</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="599" class="Keyword">using</a> <a id="605" class="Symbol">(</a><a id="606" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="609" class="Symbol">;</a> <a id="611" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="614" class="Symbol">;</a> <a id="616" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="621" class="Symbol">;</a> <a id="623" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="628" class="Symbol">)</a>
<a id="630" class="Keyword">open</a> <a id="635" class="Keyword">import</a> <a id="642" href="Data.String.Base.html" class="Module">Data.String.Base</a> <a id="659" class="Keyword">using</a> <a id="665" class="Symbol">(</a><a id="666" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="672" class="Symbol">)</a>
<a id="674" class="Keyword">open</a> <a id="679" class="Keyword">import</a> <a id="686" href="Reflection.AST.Universe.html" class="Module">Reflection.AST.Universe</a>
  <a id="712" class="Keyword">using</a> <a id="718" class="Symbol">(</a><a id="719" href="Reflection.AST.Universe.html#643" class="InductiveConstructor">⟨term⟩</a><a id="725" class="Symbol">;</a> <a id="727" href="Reflection.AST.Universe.html#661" class="InductiveConstructor">⟨pat⟩</a><a id="732" class="Symbol">;</a> <a id="734" href="Reflection.AST.Universe.html#697" class="InductiveConstructor">⟨clause⟩</a><a id="742" class="Symbol">;</a> <a id="744" href="Reflection.AST.Universe.html#765" class="InductiveConstructor">⟨abs⟩</a><a id="749" class="Symbol">;</a> <a id="751" href="Reflection.AST.Universe.html#822" class="InductiveConstructor">⟨tel⟩</a><a id="756" class="Symbol">;</a> <a id="758" href="Reflection.AST.Universe.html#863" class="Function Operator">⟦_⟧</a><a id="761" class="Symbol">)</a>
<a id="763" class="Keyword">open</a> <a id="768" class="Keyword">import</a> <a id="775" href="Reflection.AnnotatedAST.html" class="Module">Reflection.AnnotatedAST</a>
  <a id="801" class="Keyword">using</a> <a id="807" class="Symbol">(</a><a id="808" href="Reflection.AnnotatedAST.html#5713" class="Function">Annotated</a><a id="817" class="Symbol">;</a> <a id="819" href="Reflection.AnnotatedAST.html#5964" class="Function">AnnotationFun</a><a id="832" class="Symbol">;</a> <a id="834" href="Reflection.AnnotatedAST.html#8409" class="Function">annotate</a><a id="842" class="Symbol">;</a> <a id="844" href="Reflection.AnnotatedAST.html#10879" class="Function">defaultAnn</a><a id="854" class="Symbol">;</a> <a id="856" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨_⟩_</a><a id="860" class="Symbol">;</a> <a id="862" href="Reflection.AnnotatedAST.html#3551" class="InductiveConstructor">var</a><a id="865" class="Symbol">;</a> <a id="867" href="Reflection.AnnotatedAST.html#5192" class="InductiveConstructor">absurd</a>
        <a id="882" class="Symbol">;</a> <a id="884" href="Reflection.AnnotatedAST.html#4316" class="InductiveConstructor">clause</a><a id="890" class="Symbol">;</a> <a id="892" href="Reflection.AnnotatedAST.html#4457" class="InductiveConstructor">absurd-clause</a><a id="905" class="Symbol">;</a> <a id="907" href="Reflection.AnnotatedAST.html#2551" class="InductiveConstructor">abs</a><a id="910" class="Symbol">)</a>

<a id="913" class="Comment">------------------------------------------------------------------------</a>
<a id="986" class="Comment">-- Free variable sets as lists of natural numbers</a>

<a id="FVs"></a><a id="1037" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a> <a id="1041" class="Symbol">:</a> <a id="1043" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1047" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a> <a id="1051" class="Symbol">=</a> <a id="1053" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1058" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1060" class="Comment">-- ordered, no duplicates</a>

<a id="1087" class="Keyword">private</a>

  <a id="1098" class="Keyword">infixr</a> <a id="1105" class="Number">3</a> <a id="1107" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">_∪_</a>

  <a id="_∪_"></a><a id="1114" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">_∪_</a> <a id="1118" class="Symbol">:</a> <a id="1120" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a> <a id="1124" class="Symbol">→</a> <a id="1126" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a> <a id="1130" class="Symbol">→</a> <a id="1132" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a>
  <a id="1138" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>     <a id="1145" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="1147" href="Reflection.AnnotatedAST.Free.html#1147" class="Bound">ys</a> <a id="1150" class="Symbol">=</a> <a id="1152" href="Reflection.AnnotatedAST.Free.html#1147" class="Bound">ys</a>
  <a id="1157" href="Reflection.AnnotatedAST.Free.html#1157" class="CatchallClause Bound">xs</a><a id="1159" class="CatchallClause">     </a><a id="1164" href="Reflection.AnnotatedAST.Free.html#1114" class="CatchallClause Function Operator">∪</a><a id="1165" class="CatchallClause"> </a><a id="1166" href="Agda.Builtin.List.html#184" class="CatchallClause InductiveConstructor">[]</a> <a id="1169" class="Symbol">=</a> <a id="1171" href="Reflection.AnnotatedAST.Free.html#1157" class="Bound">xs</a>
  <a id="1176" href="Reflection.AnnotatedAST.Free.html#1176" class="Bound">x</a> <a id="1178" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1180" href="Reflection.AnnotatedAST.Free.html#1180" class="Bound">xs</a> <a id="1183" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="1185" href="Reflection.AnnotatedAST.Free.html#1185" class="Bound">y</a> <a id="1187" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1189" href="Reflection.AnnotatedAST.Free.html#1189" class="Bound">ys</a> <a id="1192" class="Keyword">with</a> <a id="1197" href="Data.Nat.Base.html#9190" class="Function">compare</a> <a id="1205" href="Reflection.AnnotatedAST.Free.html#1176" class="Bound">x</a> <a id="1207" href="Reflection.AnnotatedAST.Free.html#1185" class="Bound">y</a> <a id="1209" class="Symbol">|</a> <a id="1211" href="Reflection.AnnotatedAST.Free.html#1176" class="Bound">x</a> <a id="1213" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1215" href="Reflection.AnnotatedAST.Free.html#1180" class="Bound">xs</a> <a id="1218" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="1220" href="Reflection.AnnotatedAST.Free.html#1189" class="Bound">ys</a>
  <a id="1225" class="Symbol">...</a> <a id="1229" class="Symbol">|</a> <a id="1231" href="Data.Nat.Base.html#9068" class="InductiveConstructor">less</a>    <a id="1239" href="Reflection.AnnotatedAST.Free.html#1239" class="Bound">x</a> <a id="1241" class="Symbol">_</a> <a id="1243" class="Symbol">|</a> <a id="1245" class="Symbol">_</a>   <a id="1249" class="Symbol">=</a> <a id="1251" href="Reflection.AnnotatedAST.Free.html#1239" class="Bound">x</a> <a id="1253" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1255" class="Symbol">(</a><a id="1256" class="Bound">xs</a> <a id="1259" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="1261" class="Bound">y</a> <a id="1263" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1265" class="Bound">ys</a><a id="1267" class="Symbol">)</a>
  <a id="1271" class="Symbol">...</a> <a id="1275" class="Symbol">|</a> <a id="1277" href="Data.Nat.Base.html#9113" class="InductiveConstructor">equal</a>   <a id="1285" href="Reflection.AnnotatedAST.Free.html#1285" class="Bound">x</a>   <a id="1289" class="Symbol">|</a> <a id="1291" class="Symbol">_</a>   <a id="1295" class="Symbol">=</a> <a id="1297" href="Reflection.AnnotatedAST.Free.html#1285" class="Bound">x</a> <a id="1299" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1301" class="Symbol">(</a><a id="1302" class="Bound">xs</a> <a id="1305" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="1307" class="Bound">ys</a><a id="1309" class="Symbol">)</a>
  <a id="1313" class="Symbol">...</a> <a id="1317" class="Symbol">|</a> <a id="1319" href="Data.Nat.Base.html#9146" class="InductiveConstructor">greater</a> <a id="1327" href="Reflection.AnnotatedAST.Free.html#1327" class="Bound">y</a> <a id="1329" class="Symbol">_</a> <a id="1331" class="Symbol">|</a> <a id="1333" href="Reflection.AnnotatedAST.Free.html#1333" class="Bound">rec</a> <a id="1337" class="Symbol">=</a> <a id="1339" href="Reflection.AnnotatedAST.Free.html#1327" class="Bound">y</a> <a id="1341" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1343" href="Reflection.AnnotatedAST.Free.html#1333" class="Bound">rec</a>

  <a id="insert"></a><a id="1350" href="Reflection.AnnotatedAST.Free.html#1350" class="Function">insert</a> <a id="1357" class="Symbol">:</a> <a id="1359" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1361" class="Symbol">→</a> <a id="1363" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a>
  <a id="1375" href="Reflection.AnnotatedAST.Free.html#1350" class="Function">insert</a> <a id="1382" href="Reflection.AnnotatedAST.Free.html#1382" class="Bound">x</a> <a id="1384" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>       <a id="1393" class="Symbol">=</a> <a id="1395" href="Reflection.AnnotatedAST.Free.html#1382" class="Bound">x</a> <a id="1397" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1399" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="1404" href="Reflection.AnnotatedAST.Free.html#1350" class="Function">insert</a> <a id="1411" href="Reflection.AnnotatedAST.Free.html#1411" class="Bound">x</a> <a id="1413" class="Symbol">(</a><a id="1414" href="Reflection.AnnotatedAST.Free.html#1414" class="Bound">y</a> <a id="1416" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1418" href="Reflection.AnnotatedAST.Free.html#1418" class="Bound">xs</a><a id="1420" class="Symbol">)</a> <a id="1422" class="Keyword">with</a> <a id="1427" href="Data.Nat.Base.html#9190" class="Function">compare</a> <a id="1435" href="Reflection.AnnotatedAST.Free.html#1411" class="Bound">x</a> <a id="1437" href="Reflection.AnnotatedAST.Free.html#1414" class="Bound">y</a>
  <a id="1441" class="Symbol">...</a> <a id="1445" class="Symbol">|</a> <a id="1447" href="Data.Nat.Base.html#9068" class="InductiveConstructor">less</a>    <a id="1455" href="Reflection.AnnotatedAST.Free.html#1455" class="Bound">x</a> <a id="1457" href="Reflection.AnnotatedAST.Free.html#1457" class="Bound">k</a> <a id="1459" class="Symbol">=</a> <a id="1461" href="Reflection.AnnotatedAST.Free.html#1455" class="Bound">x</a> <a id="1463" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1465" class="Bound">y</a> <a id="1467" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1469" class="Bound">xs</a>
  <a id="1474" class="Symbol">...</a> <a id="1478" class="Symbol">|</a> <a id="1480" href="Data.Nat.Base.html#9113" class="InductiveConstructor">equal</a>   <a id="1488" href="Reflection.AnnotatedAST.Free.html#1488" class="Bound">x</a>   <a id="1492" class="Symbol">=</a> <a id="1494" class="Bound">y</a> <a id="1496" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1498" class="Bound">xs</a>
  <a id="1503" class="Symbol">...</a> <a id="1507" class="Symbol">|</a> <a id="1509" href="Data.Nat.Base.html#9146" class="InductiveConstructor">greater</a> <a id="1517" href="Reflection.AnnotatedAST.Free.html#1517" class="Bound">y</a> <a id="1519" href="Reflection.AnnotatedAST.Free.html#1519" class="Bound">k</a> <a id="1521" class="Symbol">=</a> <a id="1523" href="Reflection.AnnotatedAST.Free.html#1517" class="Bound">y</a> <a id="1525" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1527" href="Reflection.AnnotatedAST.Free.html#1350" class="Function">insert</a> <a id="1534" class="Bound">x</a> <a id="1536" class="Bound">xs</a>

  <a id="close"></a><a id="1542" href="Reflection.AnnotatedAST.Free.html#1542" class="Function">close</a> <a id="1548" class="Symbol">:</a> <a id="1550" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1552" class="Symbol">→</a> <a id="1554" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a> <a id="1558" class="Symbol">→</a> <a id="1560" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a>
  <a id="1566" href="Reflection.AnnotatedAST.Free.html#1542" class="Function">close</a> <a id="1572" href="Reflection.AnnotatedAST.Free.html#1572" class="Bound">k</a> <a id="1574" class="Symbol">=</a> <a id="1576" href="Data.List.Base.html#4384" class="Function">concatMap</a> <a id="1586" class="Symbol">λ</a> <a id="1588" href="Reflection.AnnotatedAST.Free.html#1588" class="Bound">x</a> <a id="1590" class="Symbol">→</a> <a id="1592" href="Data.Bool.Base.html#1515" class="Function Operator">if</a> <a id="1595" href="Reflection.AnnotatedAST.Free.html#1588" class="Bound">x</a> <a id="1597" href="Data.Nat.Base.html#1463" class="Primitive Operator">&lt;ᵇ</a> <a id="1600" href="Reflection.AnnotatedAST.Free.html#1572" class="Bound">k</a> <a id="1602" href="Data.Bool.Base.html#1515" class="Function Operator">then</a> <a id="1607" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1610" href="Data.Bool.Base.html#1515" class="Function Operator">else</a> <a id="1615" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="1617" href="Reflection.AnnotatedAST.Free.html#1588" class="Bound">x</a> <a id="1619" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="1621" href="Reflection.AnnotatedAST.Free.html#1572" class="Bound">k</a> <a id="1623" href="Data.List.Base.html#4907" class="Function Operator">]</a>


<a id="1627" class="Comment">------------------------------------------------------------------------</a>
<a id="1700" class="Comment">-- Annotation function computing free variables</a>

<a id="freeVars"></a><a id="1749" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="1758" class="Symbol">:</a> <a id="1760" href="Reflection.AnnotatedAST.html#5964" class="Function">AnnotationFun</a> <a id="1774" class="Symbol">(λ</a> <a id="1777" href="Reflection.AnnotatedAST.Free.html#1777" class="Bound">_</a> <a id="1779" class="Symbol">→</a> <a id="1781" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a><a id="1784" class="Symbol">)</a>
<a id="1786" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="1795" href="Reflection.AST.Universe.html#643" class="InductiveConstructor">⟨term⟩</a>    <a id="1805" class="Symbol">(</a><a id="1806" href="Reflection.AnnotatedAST.html#3551" class="InductiveConstructor">var</a> <a id="1810" href="Reflection.AnnotatedAST.Free.html#1810" class="Bound">x</a> <a id="1812" class="Symbol">(</a><a id="1813" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="1815" href="Reflection.AnnotatedAST.Free.html#1815" class="Bound">fv</a> <a id="1818" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="1820" class="Symbol">_))</a>                                      <a id="1861" class="Symbol">=</a> <a id="1863" href="Reflection.AnnotatedAST.Free.html#1350" class="Function">insert</a> <a id="1870" href="Reflection.AnnotatedAST.Free.html#1810" class="Bound">x</a> <a id="1872" href="Reflection.AnnotatedAST.Free.html#1815" class="Bound">fv</a>
<a id="1875" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="1884" href="Reflection.AST.Universe.html#661" class="InductiveConstructor">⟨pat⟩</a>     <a id="1894" class="Symbol">(</a><a id="1895" href="Reflection.AnnotatedAST.html#5068" class="InductiveConstructor">var</a> <a id="1899" href="Reflection.AnnotatedAST.Free.html#1899" class="Bound">x</a><a id="1900" class="Symbol">)</a>                                                 <a id="1950" class="Symbol">=</a> <a id="1952" href="Reflection.AnnotatedAST.Free.html#1899" class="Bound">x</a> <a id="1954" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1956" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="1959" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="1968" href="Reflection.AST.Universe.html#661" class="InductiveConstructor">⟨pat⟩</a>     <a id="1978" class="Symbol">(</a><a id="1979" href="Reflection.AnnotatedAST.html#5192" class="InductiveConstructor">absurd</a> <a id="1986" href="Reflection.AnnotatedAST.Free.html#1986" class="Bound">x</a><a id="1987" class="Symbol">)</a>                                              <a id="2034" class="Symbol">=</a> <a id="2036" href="Reflection.AnnotatedAST.Free.html#1986" class="Bound">x</a> <a id="2038" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2040" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
         <a id="2052" class="Comment">-- Note: variables are bound in the clause telescope, so we treat pattern variables as free</a>
<a id="2144" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="2153" href="Reflection.AST.Universe.html#697" class="InductiveConstructor">⟨clause⟩</a>  <a id="2163" class="Symbol">(</a><a id="2164" href="Reflection.AnnotatedAST.html#4316" class="InductiveConstructor">clause</a> <a id="2171" class="Symbol">{</a><a id="2172" class="Argument">tel</a> <a id="2176" class="Symbol">=</a> <a id="2178" href="Reflection.AnnotatedAST.Free.html#2178" class="Bound">Γ</a><a id="2179" class="Symbol">}</a> <a id="2181" class="Symbol">(</a><a id="2182" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2184" href="Reflection.AnnotatedAST.Free.html#2184" class="Bound">fvΓ</a> <a id="2188" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2190" class="Symbol">_)</a> <a id="2193" class="Symbol">(</a><a id="2194" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2196" href="Reflection.AnnotatedAST.Free.html#2196" class="Bound">fvps</a> <a id="2201" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2203" class="Symbol">_)</a> <a id="2206" class="Symbol">(</a><a id="2207" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2209" href="Reflection.AnnotatedAST.Free.html#2209" class="Bound">fvt</a> <a id="2213" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2215" class="Symbol">_))</a> <a id="2219" class="Symbol">=</a> <a id="2221" href="Reflection.AnnotatedAST.Free.html#2184" class="Bound">fvΓ</a> <a id="2225" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="2227" href="Reflection.AnnotatedAST.Free.html#1542" class="Function">close</a> <a id="2233" class="Symbol">(</a><a id="2234" href="Data.List.Base.html#4746" class="Function">length</a> <a id="2241" href="Reflection.AnnotatedAST.Free.html#2178" class="Bound">Γ</a><a id="2242" class="Symbol">)</a> <a id="2244" class="Symbol">(</a><a id="2245" href="Reflection.AnnotatedAST.Free.html#2196" class="Bound">fvps</a> <a id="2250" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="2252" href="Reflection.AnnotatedAST.Free.html#2209" class="Bound">fvt</a><a id="2255" class="Symbol">)</a>
<a id="2257" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="2266" href="Reflection.AST.Universe.html#697" class="InductiveConstructor">⟨clause⟩</a>  <a id="2276" class="Symbol">(</a><a id="2277" href="Reflection.AnnotatedAST.html#4457" class="InductiveConstructor">absurd-clause</a> <a id="2291" class="Symbol">{</a><a id="2292" class="Argument">tel</a> <a id="2296" class="Symbol">=</a> <a id="2298" href="Reflection.AnnotatedAST.Free.html#2298" class="Bound">Γ</a><a id="2299" class="Symbol">}</a> <a id="2301" class="Symbol">(</a><a id="2302" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2304" href="Reflection.AnnotatedAST.Free.html#2304" class="Bound">fvΓ</a> <a id="2308" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2310" class="Symbol">_)</a> <a id="2313" class="Symbol">(</a><a id="2314" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2316" href="Reflection.AnnotatedAST.Free.html#2316" class="Bound">fvps</a> <a id="2321" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2323" class="Symbol">_))</a>      <a id="2332" class="Symbol">=</a> <a id="2334" href="Reflection.AnnotatedAST.Free.html#2304" class="Bound">fvΓ</a> <a id="2338" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="2340" href="Reflection.AnnotatedAST.Free.html#1542" class="Function">close</a> <a id="2346" class="Symbol">(</a><a id="2347" href="Data.List.Base.html#4746" class="Function">length</a> <a id="2354" href="Reflection.AnnotatedAST.Free.html#2298" class="Bound">Γ</a><a id="2355" class="Symbol">)</a> <a id="2357" href="Reflection.AnnotatedAST.Free.html#2316" class="Bound">fvps</a>
<a id="2362" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="2371" class="Symbol">(</a><a id="2372" href="Reflection.AST.Universe.html#765" class="InductiveConstructor">⟨abs⟩</a> <a id="2378" href="Reflection.AnnotatedAST.Free.html#2378" class="Bound">u</a><a id="2379" class="Symbol">)</a> <a id="2381" class="Symbol">(</a><a id="2382" href="Reflection.AnnotatedAST.html#2551" class="InductiveConstructor">abs</a> <a id="2386" class="Symbol">_</a> <a id="2388" class="Symbol">(</a><a id="2389" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2391" href="Reflection.AnnotatedAST.Free.html#2391" class="Bound">fv</a> <a id="2394" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2396" class="Symbol">_))</a>                                      <a id="2437" class="Symbol">=</a> <a id="2439" href="Reflection.AnnotatedAST.Free.html#1542" class="Function">close</a> <a id="2445" class="Number">1</a> <a id="2447" href="Reflection.AnnotatedAST.Free.html#2391" class="Bound">fv</a>
<a id="2450" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="2459" href="Reflection.AST.Universe.html#822" class="InductiveConstructor">⟨tel⟩</a>     <a id="2469" class="Symbol">(</a><a id="2470" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟨</a> <a id="2472" href="Reflection.AnnotatedAST.Free.html#2472" class="Bound">fv</a> <a id="2475" href="Reflection.AnnotatedAST.html#1761" class="InductiveConstructor Operator">⟩</a> <a id="2477" class="Symbol">_</a> <a id="2479" href="Data.List.Relation.Unary.All.html#1718" class="InductiveConstructor Operator">∷</a> <a id="2481" href="Reflection.AnnotatedAST.Free.html#2481" class="Bound">xs</a><a id="2483" class="Symbol">)</a>                                         <a id="2525" class="Symbol">=</a> <a id="2527" href="Reflection.AnnotatedAST.Free.html#2472" class="Bound">fv</a> <a id="2530" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">∪</a> <a id="2532" href="Reflection.AnnotatedAST.Free.html#1542" class="Function">close</a> <a id="2538" class="Number">1</a> <a id="2540" class="Symbol">(</a><a id="2541" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a> <a id="2550" class="Symbol">_</a> <a id="2552" href="Reflection.AnnotatedAST.Free.html#2481" class="Bound">xs</a><a id="2554" class="Symbol">)</a>
<a id="2556" href="Reflection.AnnotatedAST.Free.html#1749" class="CatchallClause Function">freeVars</a><a id="2564" class="CatchallClause"> </a><a id="2565" href="Reflection.AnnotatedAST.Free.html#2565" class="CatchallClause Bound">u</a><a id="2566" class="CatchallClause">         </a><a id="2575" href="Reflection.AnnotatedAST.Free.html#2575" class="CatchallClause Bound">t</a>                                                       <a id="2631" class="Symbol">=</a> <a id="2633" href="Reflection.AnnotatedAST.html#10879" class="Function">defaultAnn</a> <a id="2644" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="2647" href="Reflection.AnnotatedAST.Free.html#1114" class="Function Operator">_∪_</a> <a id="2651" href="Reflection.AnnotatedAST.Free.html#2565" class="Bound">u</a> <a id="2653" href="Reflection.AnnotatedAST.Free.html#2575" class="Bound">t</a>

<a id="annotateFVs"></a><a id="2656" href="Reflection.AnnotatedAST.Free.html#2656" class="Function">annotateFVs</a> <a id="2668" class="Symbol">:</a> <a id="2670" class="Symbol">∀</a> <a id="2672" class="Symbol">{</a><a id="2673" href="Reflection.AnnotatedAST.Free.html#2673" class="Bound">u</a><a id="2674" class="Symbol">}</a> <a id="2676" class="Symbol">→</a> <a id="2678" class="Symbol">(</a><a id="2679" href="Reflection.AnnotatedAST.Free.html#2679" class="Bound">t</a> <a id="2681" class="Symbol">:</a> <a id="2683" href="Reflection.AST.Universe.html#863" class="Function Operator">⟦</a> <a id="2685" href="Reflection.AnnotatedAST.Free.html#2673" class="Bound">u</a> <a id="2687" href="Reflection.AST.Universe.html#863" class="Function Operator">⟧</a><a id="2688" class="Symbol">)</a> <a id="2690" class="Symbol">→</a> <a id="2692" href="Reflection.AnnotatedAST.html#5713" class="Function">Annotated</a> <a id="2702" class="Symbol">(λ</a> <a id="2705" href="Reflection.AnnotatedAST.Free.html#2705" class="Bound">_</a> <a id="2707" class="Symbol">→</a> <a id="2709" href="Reflection.AnnotatedAST.Free.html#1037" class="Function">FVs</a><a id="2712" class="Symbol">)</a> <a id="2714" href="Reflection.AnnotatedAST.Free.html#2679" class="Bound">t</a>
<a id="2716" href="Reflection.AnnotatedAST.Free.html#2656" class="Function">annotateFVs</a> <a id="2728" class="Symbol">=</a> <a id="2730" href="Reflection.AnnotatedAST.html#8409" class="Function">annotate</a> <a id="2739" href="Reflection.AnnotatedAST.Free.html#1749" class="Function">freeVars</a>
</pre></body></html>