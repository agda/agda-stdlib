<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Word64.Unsafe</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Machine words: unsafe functions using the FFI</a>
<a id="155" class="Comment">------------------------------------------------------------------------</a>

<a id="229" class="Symbol">{-#</a> <a id="233" class="Keyword">OPTIONS</a> <a id="241" class="Pragma">--cubical-compatible</a> <a id="262" class="Symbol">#-}</a>

<a id="267" class="Keyword">module</a> <a id="274" href="Data.Word64.Unsafe.html" class="Module">Data.Word64.Unsafe</a> <a id="293" class="Keyword">where</a>

<a id="300" class="Keyword">open</a> <a id="305" class="Keyword">import</a> <a id="312" href="Agda.Builtin.Bool.html" class="Module">Agda.Builtin.Bool</a> <a id="330" class="Keyword">using</a> <a id="336" class="Symbol">(</a><a id="337" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="341" class="Symbol">;</a> <a id="343" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="347" class="Symbol">;</a> <a id="349" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="354" class="Symbol">)</a>
<a id="356" class="Keyword">open</a> <a id="361" class="Keyword">import</a> <a id="368" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="382" class="Symbol">as</a> <a id="385" class="Module">Fin</a> <a id="389" class="Keyword">using</a> <a id="395" class="Symbol">(</a><a id="396" href="Data.Fin.Base.html#1171" class="Datatype">Fin</a><a id="399" class="Symbol">)</a>
<a id="401" class="Keyword">open</a> <a id="406" class="Keyword">import</a> <a id="413" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="431" class="Keyword">using</a> <a id="437" class="Symbol">(</a><a id="438" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="443" class="Symbol">)</a>
<a id="445" class="Keyword">open</a> <a id="450" class="Keyword">import</a> <a id="457" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="471" class="Symbol">as</a> <a id="474" class="Module">Vec</a> <a id="478" class="Keyword">using</a> <a id="484" class="Symbol">(</a><a id="485" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a><a id="488" class="Symbol">)</a>
<a id="490" class="Keyword">open</a> <a id="495" class="Keyword">import</a> <a id="502" href="Data.Word8.Base.html" class="Module">Data.Word8.Base</a> <a id="518" class="Symbol">as</a> <a id="521" class="Module">Word8</a> <a id="527" class="Keyword">using</a> <a id="533" class="Symbol">(</a><a id="534" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a><a id="539" class="Symbol">)</a>
<a id="541" class="Keyword">open</a> <a id="546" class="Keyword">import</a> <a id="553" href="Data.Word64.Base.html" class="Module">Data.Word64.Base</a> <a id="570" class="Keyword">using</a> <a id="576" class="Symbol">(</a><a id="577" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a><a id="583" class="Symbol">;</a> <a id="585" href="Data.Word64.Base.html#803" class="Primitive">fromℕ</a><a id="590" class="Symbol">)</a>
<a id="592" class="Keyword">open</a> <a id="597" class="Keyword">import</a> <a id="604" href="Function.Base.html" class="Module">Function.Base</a> <a id="618" class="Keyword">using</a> <a id="624" class="Symbol">(</a><a id="625" href="Function.Base.html#1974" class="Function Operator">_$_</a><a id="628" class="Symbol">;</a> <a id="630" href="Function.Base.html#2127" class="Function Operator">_|&gt;_</a><a id="634" class="Symbol">)</a>

<a id="637" class="Comment">------------------------------------------------------------------------</a>
<a id="710" class="Comment">-- Re-export primitives publicly</a>

<a id="744" class="Keyword">open</a> <a id="749" class="Keyword">import</a> <a id="756" href="Data.Word64.Primitive.html" class="Module">Data.Word64.Primitive</a> <a id="778" class="Symbol">as</a> <a id="781" class="Module">Prim</a> <a id="786" class="Keyword">public</a>
  <a id="795" class="Keyword">using</a> <a id="801" class="Symbol">(</a> <a id="803" href="Data.Word64.Primitive.html#601" class="Postulate">show</a> <a id="808" class="Symbol">)</a>

<a id="testBit"></a><a id="811" href="Data.Word64.Unsafe.html#811" class="Function">testBit</a> <a id="819" class="Symbol">:</a> <a id="821" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="828" class="Symbol">→</a> <a id="830" href="Data.Fin.Base.html#1171" class="Datatype">Fin</a> <a id="834" class="Number">64</a> <a id="837" class="Symbol">→</a> <a id="839" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="844" href="Data.Word64.Unsafe.html#811" class="Function">testBit</a> <a id="852" href="Data.Word64.Unsafe.html#852" class="Bound">w</a> <a id="854" href="Data.Word64.Unsafe.html#854" class="Bound">i</a> <a id="856" class="Symbol">=</a> <a id="858" href="Data.Word64.Primitive.html#501" class="Postulate">Prim.testBit</a> <a id="871" href="Data.Word64.Unsafe.html#852" class="Bound">w</a> <a id="873" class="Symbol">(</a><a id="874" href="Data.Fin.Base.html#1279" class="Function">Fin.toℕ</a> <a id="882" href="Data.Word64.Unsafe.html#854" class="Bound">i</a><a id="883" class="Symbol">)</a>

<a id="_[_]≔_"></a><a id="886" href="Data.Word64.Unsafe.html#886" class="Function Operator">_[_]≔_</a> <a id="893" class="Symbol">:</a> <a id="895" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="902" class="Symbol">→</a> <a id="904" href="Data.Fin.Base.html#1171" class="Datatype">Fin</a> <a id="908" class="Number">64</a> <a id="911" class="Symbol">→</a> <a id="913" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="918" class="Symbol">→</a> <a id="920" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a>
<a id="927" href="Data.Word64.Unsafe.html#927" class="Bound">w</a> <a id="929" href="Data.Word64.Unsafe.html#886" class="Function Operator">[</a> <a id="931" href="Data.Word64.Unsafe.html#931" class="Bound">i</a> <a id="933" href="Data.Word64.Unsafe.html#886" class="Function Operator">]≔</a> <a id="936" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="942" class="Symbol">=</a> <a id="944" href="Data.Word64.Primitive.html#566" class="Postulate">Prim.clearBit</a> <a id="958" href="Data.Word64.Unsafe.html#927" class="Bound">w</a> <a id="960" class="Symbol">(</a><a id="961" href="Data.Fin.Base.html#1279" class="Function">Fin.toℕ</a> <a id="969" href="Data.Word64.Unsafe.html#931" class="Bound">i</a><a id="970" class="Symbol">)</a>
<a id="972" href="Data.Word64.Unsafe.html#972" class="Bound">w</a> <a id="974" href="Data.Word64.Unsafe.html#886" class="Function Operator">[</a> <a id="976" href="Data.Word64.Unsafe.html#976" class="Bound">i</a> <a id="978" href="Data.Word64.Unsafe.html#886" class="Function Operator">]≔</a> <a id="981" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>  <a id="987" class="Symbol">=</a> <a id="989" href="Data.Word64.Primitive.html#533" class="Postulate">Prim.setBit</a> <a id="1001" href="Data.Word64.Unsafe.html#972" class="Bound">w</a> <a id="1003" class="Symbol">(</a><a id="1004" href="Data.Fin.Base.html#1279" class="Function">Fin.toℕ</a> <a id="1012" href="Data.Word64.Unsafe.html#976" class="Bound">i</a><a id="1013" class="Symbol">)</a>

<a id="1016" class="Comment">------------------------------------------------------------------------</a>
<a id="1089" class="Comment">-- Convert to its components</a>

<a id="toBits"></a><a id="1119" href="Data.Word64.Unsafe.html#1119" class="Function">toBits</a> <a id="1126" class="Symbol">:</a> <a id="1128" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1135" class="Symbol">→</a> <a id="1137" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1141" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="1146" class="Number">64</a>
<a id="1149" href="Data.Word64.Unsafe.html#1119" class="Function">toBits</a> <a id="1156" href="Data.Word64.Unsafe.html#1156" class="Bound">w</a> <a id="1158" class="Symbol">=</a> <a id="1160" href="Data.Vec.Base.html#6593" class="Function">Vec.tabulate</a> <a id="1173" class="Symbol">(</a><a id="1174" href="Data.Word64.Unsafe.html#811" class="Function">testBit</a> <a id="1182" href="Data.Word64.Unsafe.html#1156" class="Bound">w</a><a id="1183" class="Symbol">)</a>

<a id="fromBits"></a><a id="1186" href="Data.Word64.Unsafe.html#1186" class="Function">fromBits</a> <a id="1195" class="Symbol">:</a> <a id="1197" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1201" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="1206" class="Number">64</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a>
<a id="1218" href="Data.Word64.Unsafe.html#1186" class="Function">fromBits</a> <a id="1227" href="Data.Word64.Unsafe.html#1227" class="Bound">bs</a> <a id="1230" class="Symbol">=</a> <a id="1232" href="Data.Vec.Base.html#5801" class="Function">Vec.foldl′</a> <a id="1243" href="Function.Base.html#2127" class="Function Operator">_|&gt;_</a> <a id="1248" class="Symbol">(</a><a id="1249" href="Data.Word64.Base.html#803" class="Primitive">fromℕ</a> <a id="1255" class="Number">0</a><a id="1256" class="Symbol">)</a>
            <a id="1270" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1272" href="Data.Vec.Base.html#3745" class="Function">Vec.zipWith</a> <a id="1284" class="Symbol">(λ</a> <a id="1287" href="Data.Word64.Unsafe.html#1287" class="Bound">i</a> <a id="1289" href="Data.Word64.Unsafe.html#1289" class="Bound">b</a> <a id="1291" class="Symbol">→</a> <a id="1293" href="Data.Word64.Unsafe.html#886" class="Function Operator">_[</a> <a id="1296" href="Data.Word64.Unsafe.html#1287" class="Bound">i</a> <a id="1298" href="Data.Word64.Unsafe.html#886" class="Function Operator">]≔</a> <a id="1301" href="Data.Word64.Unsafe.html#1289" class="Bound">b</a><a id="1302" class="Symbol">)</a> <a id="1304" class="Symbol">(</a><a id="1305" href="Data.Vec.Base.html#6708" class="Function">Vec.allFin</a> <a id="1316" class="Number">64</a><a id="1318" class="Symbol">)</a> <a id="1320" href="Data.Word64.Unsafe.html#1227" class="Bound">bs</a>

<a id="toWord64s"></a><a id="1324" href="Data.Word64.Unsafe.html#1324" class="Function">toWord64s</a> <a id="1334" class="Symbol">:</a> <a id="1336" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1343" class="Symbol">→</a> <a id="1345" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1349" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a> <a id="1355" class="Number">8</a>
<a id="1357" href="Data.Word64.Unsafe.html#1324" class="Function">toWord64s</a> <a id="1367" href="Data.Word64.Unsafe.html#1367" class="Bound">w</a> <a id="1369" class="Symbol">=</a>
  <a id="1373" class="Keyword">let</a> <a id="1377" href="Data.Word64.Unsafe.html#1377" class="Bound">ws</a> <a id="1380" class="Symbol">=</a> <a id="1382" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1388" class="Symbol">(</a><a id="1389" href="Data.Vec.Base.html#7275" class="Function">Vec.group</a> <a id="1399" class="Number">8</a> <a id="1401" class="Number">8</a> <a id="1403" class="Symbol">(</a><a id="1404" href="Data.Word64.Unsafe.html#1119" class="Function">toBits</a> <a id="1411" href="Data.Word64.Unsafe.html#1367" class="Bound">w</a><a id="1412" class="Symbol">))</a> <a id="1415" class="Keyword">in</a>
  <a id="1420" href="Data.Vec.Base.html#2955" class="Function">Vec.map</a> <a id="1428" href="Data.Word8.Base.html#1262" class="Function">Word8.fromBits</a> <a id="1443" href="Data.Word64.Unsafe.html#1377" class="Bound">ws</a>
</pre></body></html>