<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>IO.Finite</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- IO only involving finite objects</a>
<a id="142" class="Comment">------------------------------------------------------------------------</a>

<a id="216" class="Symbol">{-#</a> <a id="220" class="Keyword">OPTIONS</a> <a id="228" class="Pragma">--cubical-compatible</a> <a id="249" class="Pragma">--guardedness</a> <a id="263" class="Symbol">#-}</a>

<a id="268" class="Keyword">module</a> <a id="275" href="IO.Finite.html" class="Module">IO.Finite</a> <a id="285" class="Keyword">where</a>

<a id="292" class="Keyword">open</a> <a id="297" class="Keyword">import</a> <a id="304" href="Data.Unit.Polymorphic.Base.html" class="Module">Data.Unit.Polymorphic.Base</a> <a id="331" class="Keyword">using</a> <a id="337" class="Symbol">(</a><a id="338" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a><a id="339" class="Symbol">)</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Agda.Builtin.String.html" class="Module">Agda.Builtin.String</a> <a id="373" class="Keyword">using</a> <a id="379" class="Symbol">(</a><a id="380" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="386" class="Symbol">)</a>
<a id="388" class="Keyword">import</a> <a id="395" href="Data.Unit.Base.html" class="Module">Data.Unit.Base</a> <a id="410" class="Symbol">as</a> <a id="413" class="Module">Unit0</a> <a id="419" class="Keyword">using</a> <a id="425" class="Symbol">(</a><a id="426" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="427" class="Symbol">)</a>
<a id="429" class="Keyword">open</a> <a id="434" class="Keyword">import</a> <a id="441" href="IO.Base.html" class="Module">IO.Base</a> <a id="449" class="Symbol">as</a> <a id="452" class="Module">Base</a> <a id="457" class="Keyword">using</a> <a id="463" class="Symbol">(</a><a id="464" href="IO.Base.html#1305" class="Datatype">IO</a><a id="466" class="Symbol">;</a> <a id="468" href="IO.Base.html#1342" class="InductiveConstructor">lift</a><a id="472" class="Symbol">;</a> <a id="474" href="IO.Base.html#3277" class="Function">lift′</a><a id="479" class="Symbol">)</a>
<a id="481" class="Keyword">import</a> <a id="488" href="IO.Primitive.Core.html" class="Module">IO.Primitive.Core</a> <a id="506" class="Symbol">as</a> <a id="509" class="Module">Prim</a> <a id="514" class="Keyword">using</a> <a id="520" class="Symbol">(</a><a id="521" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="523" class="Symbol">;</a> <a id="525" href="IO.Primitive.Core.html#648" class="Postulate Operator">_&gt;&gt;=_</a><a id="530" class="Symbol">;</a> <a id="532" href="IO.Primitive.Core.html#989" class="Function Operator">_&gt;&gt;_</a><a id="536" class="Symbol">)</a>
<a id="538" class="Keyword">import</a> <a id="545" href="IO.Primitive.Finite.html" class="Module">IO.Primitive.Finite</a> <a id="565" class="Symbol">as</a> <a id="568" class="Module">Prim</a>
  <a id="575" class="Keyword">using</a> <a id="581" class="Symbol">(</a><a id="582" href="IO.Primitive.Finite.html#1113" class="Postulate">getLine</a><a id="589" class="Symbol">;</a> <a id="591" href="IO.Primitive.Finite.html#1139" class="Postulate">readFile</a><a id="599" class="Symbol">;</a> <a id="601" href="IO.Primitive.Finite.html#1174" class="Postulate">writeFile</a><a id="610" class="Symbol">;</a> <a id="612" href="IO.Primitive.Finite.html#1216" class="Postulate">appendFile</a><a id="622" class="Symbol">;</a> <a id="624" href="IO.Primitive.Finite.html#1258" class="Postulate">putStr</a><a id="630" class="Symbol">;</a> <a id="632" href="IO.Primitive.Finite.html#1291" class="Postulate">putStrLn</a><a id="640" class="Symbol">)</a>
<a id="642" class="Keyword">open</a> <a id="647" class="Keyword">import</a> <a id="654" href="Level.html" class="Module">Level</a> <a id="660" class="Keyword">using</a> <a id="666" class="Symbol">(</a><a id="667" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="672" class="Symbol">;</a> <a id="674" href="Level.html#409" class="Record">Lift</a><a id="678" class="Symbol">;</a> <a id="680" href="Level.html#521" class="Function">0ℓ</a><a id="682" class="Symbol">;</a> <a id="684" href="Agda.Primitive.html#931" class="Primitive">suc</a><a id="687" class="Symbol">)</a>

<a id="690" class="Keyword">private</a>
  <a id="700" class="Keyword">variable</a>
    <a id="713" href="IO.Finite.html#713" class="Generalizable">a</a> <a id="715" class="Symbol">:</a> <a id="717" href="Agda.Primitive.html#742" class="Postulate">Level</a>

<a id="724" class="Comment">------------------------------------------------------------------------</a>
<a id="797" class="Comment">-- Simple lazy IO</a>

<a id="816" class="Comment">-- Note that the functions below produce commands which, when</a>
<a id="878" class="Comment">-- executed, may raise exceptions.</a>

<a id="914" class="Comment">-- Note also that the semantics of these functions depends on the</a>
<a id="980" class="Comment">-- version of the Haskell base library. If the version is 4.2.0.0 (or</a>
<a id="1050" class="Comment">-- later?), then the functions use the character encoding specified by</a>
<a id="1121" class="Comment">-- the locale. For older versions of the library (going back to at</a>
<a id="1188" class="Comment">-- least version 3) the functions use ISO-8859-1.</a>

<a id="getLine"></a><a id="1239" href="IO.Finite.html#1239" class="Function">getLine</a> <a id="1247" class="Symbol">:</a> <a id="1249" href="IO.Base.html#1305" class="Datatype">IO</a> <a id="1252" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
<a id="1259" href="IO.Finite.html#1239" class="Function">getLine</a> <a id="1267" class="Symbol">=</a> <a id="1269" href="IO.Base.html#1342" class="InductiveConstructor">lift</a> <a id="1274" href="IO.Primitive.Finite.html#1113" class="Postulate">Prim.getLine</a>

<a id="1288" class="Comment">-- Reads a finite file. Raises an exception if the file path refers to</a>
<a id="1359" class="Comment">-- a non-physical file (like &quot;/dev/zero&quot;).</a>

<a id="readFile"></a><a id="1403" href="IO.Finite.html#1403" class="Function">readFile</a> <a id="1412" class="Symbol">:</a> <a id="1414" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1421" class="Symbol">→</a> <a id="1423" href="IO.Base.html#1305" class="Datatype">IO</a> <a id="1426" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
<a id="1433" href="IO.Finite.html#1403" class="Function">readFile</a> <a id="1442" href="IO.Finite.html#1442" class="Bound">f</a> <a id="1444" class="Symbol">=</a> <a id="1446" href="IO.Base.html#1342" class="InductiveConstructor">lift</a> <a id="1451" class="Symbol">(</a><a id="1452" href="IO.Primitive.Finite.html#1139" class="Postulate">Prim.readFile</a> <a id="1466" href="IO.Finite.html#1442" class="Bound">f</a><a id="1467" class="Symbol">)</a>

<a id="writeFile"></a><a id="1470" href="IO.Finite.html#1470" class="Function">writeFile</a> <a id="1480" class="Symbol">:</a> <a id="1482" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1489" class="Symbol">→</a> <a id="1491" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1498" class="Symbol">→</a> <a id="1500" href="IO.Base.html#1305" class="Datatype">IO</a> <a id="1503" class="Symbol">{</a><a id="1504" href="IO.Finite.html#713" class="Generalizable">a</a><a id="1505" class="Symbol">}</a> <a id="1507" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a>
<a id="1509" href="IO.Finite.html#1470" class="Function">writeFile</a> <a id="1519" href="IO.Finite.html#1519" class="Bound">f</a> <a id="1521" href="IO.Finite.html#1521" class="Bound">s</a> <a id="1523" class="Symbol">=</a> <a id="1525" href="IO.Base.html#3277" class="Function">lift′</a> <a id="1531" class="Symbol">(</a><a id="1532" href="IO.Primitive.Finite.html#1174" class="Postulate">Prim.writeFile</a> <a id="1547" href="IO.Finite.html#1519" class="Bound">f</a> <a id="1549" href="IO.Finite.html#1521" class="Bound">s</a><a id="1550" class="Symbol">)</a>

<a id="appendFile"></a><a id="1553" href="IO.Finite.html#1553" class="Function">appendFile</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1573" class="Symbol">→</a> <a id="1575" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1582" class="Symbol">→</a> <a id="1584" href="IO.Base.html#1305" class="Datatype">IO</a> <a id="1587" class="Symbol">{</a><a id="1588" href="IO.Finite.html#713" class="Generalizable">a</a><a id="1589" class="Symbol">}</a> <a id="1591" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a>
<a id="1593" href="IO.Finite.html#1553" class="Function">appendFile</a> <a id="1604" href="IO.Finite.html#1604" class="Bound">f</a> <a id="1606" href="IO.Finite.html#1606" class="Bound">s</a> <a id="1608" class="Symbol">=</a> <a id="1610" href="IO.Base.html#3277" class="Function">lift′</a> <a id="1616" class="Symbol">(</a><a id="1617" href="IO.Primitive.Finite.html#1216" class="Postulate">Prim.appendFile</a> <a id="1633" href="IO.Finite.html#1604" class="Bound">f</a> <a id="1635" href="IO.Finite.html#1606" class="Bound">s</a><a id="1636" class="Symbol">)</a>

<a id="putStr"></a><a id="1639" href="IO.Finite.html#1639" class="Function">putStr</a> <a id="1646" class="Symbol">:</a> <a id="1648" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1655" class="Symbol">→</a> <a id="1657" href="IO.Base.html#1305" class="Datatype">IO</a> <a id="1660" class="Symbol">{</a><a id="1661" href="IO.Finite.html#713" class="Generalizable">a</a><a id="1662" class="Symbol">}</a> <a id="1664" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a>
<a id="1666" href="IO.Finite.html#1639" class="Function">putStr</a> <a id="1673" href="IO.Finite.html#1673" class="Bound">s</a> <a id="1675" class="Symbol">=</a> <a id="1677" href="IO.Base.html#3277" class="Function">lift′</a> <a id="1683" class="Symbol">(</a><a id="1684" href="IO.Primitive.Finite.html#1258" class="Postulate">Prim.putStr</a> <a id="1696" href="IO.Finite.html#1673" class="Bound">s</a><a id="1697" class="Symbol">)</a>

<a id="putStrLn"></a><a id="1700" href="IO.Finite.html#1700" class="Function">putStrLn</a> <a id="1709" class="Symbol">:</a> <a id="1711" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1718" class="Symbol">→</a> <a id="1720" href="IO.Base.html#1305" class="Datatype">IO</a> <a id="1723" class="Symbol">{</a><a id="1724" href="IO.Finite.html#713" class="Generalizable">a</a><a id="1725" class="Symbol">}</a> <a id="1727" href="Data.Unit.Polymorphic.Base.html#515" class="Function">⊤</a>
<a id="1729" href="IO.Finite.html#1700" class="Function">putStrLn</a> <a id="1738" href="IO.Finite.html#1738" class="Bound">s</a> <a id="1740" class="Symbol">=</a> <a id="1742" href="IO.Base.html#3277" class="Function">lift′</a> <a id="1748" class="Symbol">(</a><a id="1749" href="IO.Primitive.Finite.html#1291" class="Postulate">Prim.putStrLn</a> <a id="1763" href="IO.Finite.html#1738" class="Bound">s</a><a id="1764" class="Symbol">)</a>
</pre></body></html>