<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.AVL.Height</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Types and functions which are used to keep track of height</a>
<a id="168" class="Comment">-- invariants in AVL Trees</a>
<a id="195" class="Comment">------------------------------------------------------------------------</a>

<a id="269" class="Symbol">{-#</a> <a id="273" class="Keyword">OPTIONS</a> <a id="281" class="Pragma">--without-K</a> <a id="293" class="Pragma">--safe</a> <a id="300" class="Symbol">#-}</a>

<a id="305" class="Keyword">module</a> <a id="312" href="Data.AVL.Height.html" class="Module">Data.AVL.Height</a> <a id="328" class="Keyword">where</a>

<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="361" class="Keyword">open</a> <a id="366" class="Keyword">import</a> <a id="373" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="387" class="Keyword">using</a> <a id="393" class="Symbol">(</a><a id="394" href="Data.Fin.Base.html#1066" class="Datatype">Fin</a><a id="397" class="Symbol">;</a> <a id="399" href="Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="403" class="Symbol">;</a> <a id="405" href="Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a><a id="408" class="Symbol">)</a>

<a id="ℕ₂"></a><a id="411" href="Data.AVL.Height.html#411" class="Function">ℕ₂</a> <a id="414" class="Symbol">=</a> <a id="416" href="Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="420" class="Number">2</a>
<a id="422" class="Keyword">pattern</a> <a id="0#"></a><a id="430" href="Data.AVL.Height.html#430" class="InductiveConstructor">0#</a> <a id="433" class="Symbol">=</a> <a id="435" class="InductiveConstructor">zero</a>
<a id="440" class="Keyword">pattern</a> <a id="1#"></a><a id="448" href="Data.AVL.Height.html#448" class="InductiveConstructor">1#</a> <a id="451" class="Symbol">=</a> <a id="453" class="InductiveConstructor">suc</a> <a id="457" class="InductiveConstructor">zero</a>
<a id="462" class="Keyword">pattern</a> <a id="##"></a><a id="470" href="Data.AVL.Height.html#470" class="InductiveConstructor">##</a> <a id="473" class="Symbol">=</a> <a id="475" class="InductiveConstructor">suc</a> <a id="479" class="Symbol">(</a><a id="480" class="InductiveConstructor">suc</a> <a id="484" class="Symbol">())</a>

<a id="489" class="Comment">-- Addition.</a>

<a id="503" class="Keyword">infixl</a> <a id="510" class="Number">6</a> <a id="512" href="Data.AVL.Height.html#517" class="Function Operator">_⊕_</a>

<a id="_⊕_"></a><a id="517" href="Data.AVL.Height.html#517" class="Function Operator">_⊕_</a> <a id="521" class="Symbol">:</a> <a id="523" href="Data.AVL.Height.html#411" class="Function">ℕ₂</a> <a id="526" class="Symbol">→</a> <a id="528" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="530" class="Symbol">→</a> <a id="532" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="534" href="Data.AVL.Height.html#430" class="InductiveConstructor">0#</a> <a id="537" href="Data.AVL.Height.html#517" class="Function Operator">⊕</a> <a id="539" href="Data.AVL.Height.html#539" class="Bound">n</a> <a id="541" class="Symbol">=</a> <a id="543" href="Data.AVL.Height.html#539" class="Bound">n</a>
<a id="545" href="Data.AVL.Height.html#448" class="InductiveConstructor">1#</a> <a id="548" href="Data.AVL.Height.html#517" class="Function Operator">⊕</a> <a id="550" href="Data.AVL.Height.html#550" class="Bound">n</a> <a id="552" class="Symbol">=</a> <a id="554" class="Number">1</a> <a id="556" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="558" href="Data.AVL.Height.html#550" class="Bound">n</a>

<a id="561" class="Comment">-- pred[ i ⊕ n ] = pred (i ⊕ n).</a>

<a id="pred[_⊕_]"></a><a id="595" href="Data.AVL.Height.html#595" class="Function Operator">pred[_⊕_]</a> <a id="605" class="Symbol">:</a> <a id="607" href="Data.AVL.Height.html#411" class="Function">ℕ₂</a> <a id="610" class="Symbol">→</a> <a id="612" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="614" class="Symbol">→</a> <a id="616" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="618" href="Data.AVL.Height.html#595" class="Function Operator">pred[</a> <a id="624" href="Data.AVL.Height.html#624" class="Bound">i</a> <a id="626" href="Data.AVL.Height.html#595" class="Function Operator">⊕</a> <a id="628" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>  <a id="634" href="Data.AVL.Height.html#595" class="Function Operator">]</a> <a id="636" class="Symbol">=</a> <a id="638" class="Number">0</a>
<a id="640" href="Data.AVL.Height.html#595" class="Function Operator">pred[</a> <a id="646" href="Data.AVL.Height.html#646" class="Bound">i</a> <a id="648" href="Data.AVL.Height.html#595" class="Function Operator">⊕</a> <a id="650" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="654" href="Data.AVL.Height.html#654" class="Bound">n</a> <a id="656" href="Data.AVL.Height.html#595" class="Function Operator">]</a> <a id="658" class="Symbol">=</a> <a id="660" href="Data.AVL.Height.html#646" class="Bound">i</a> <a id="662" href="Data.AVL.Height.html#517" class="Function Operator">⊕</a> <a id="664" href="Data.AVL.Height.html#654" class="Bound">n</a>

<a id="667" class="Keyword">infix</a> <a id="673" class="Number">4</a> <a id="675" href="Data.AVL.Height.html#945" class="Datatype Operator">_∼_⊔_</a>

<a id="682" class="Comment">-- If i ∼ j ⊔ m, then the difference between i and j is at most 1,</a>
<a id="749" class="Comment">-- and the maximum of i and j is m. _∼_⊔_ is used to record the</a>
<a id="813" class="Comment">-- balance factor of the AVL trees, and also to ensure that the</a>
<a id="877" class="Comment">-- absolute value of the balance factor is never more than 1.</a>

<a id="940" class="Keyword">data</a> <a id="_∼_⊔_"></a><a id="945" href="Data.AVL.Height.html#945" class="Datatype Operator">_∼_⊔_</a> <a id="951" class="Symbol">:</a> <a id="953" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="955" class="Symbol">→</a> <a id="957" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="959" class="Symbol">→</a> <a id="961" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="963" class="Symbol">→</a> <a id="965" class="PrimitiveType">Set</a> <a id="969" class="Keyword">where</a>
  <a id="_∼_⊔_.∼+"></a><a id="977" href="Data.AVL.Height.html#977" class="InductiveConstructor">∼+</a> <a id="980" class="Symbol">:</a> <a id="982" class="Symbol">∀</a> <a id="984" class="Symbol">{</a><a id="985" href="Data.AVL.Height.html#985" class="Bound">n</a><a id="986" class="Symbol">}</a> <a id="988" class="Symbol">→</a>     <a id="994" href="Data.AVL.Height.html#985" class="Bound">n</a> <a id="996" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="998" class="Number">1</a> <a id="1000" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1002" href="Data.AVL.Height.html#985" class="Bound">n</a> <a id="1004" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1006" class="Number">1</a> <a id="1008" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1010" href="Data.AVL.Height.html#985" class="Bound">n</a>
  <a id="_∼_⊔_.∼0"></a><a id="1014" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a> <a id="1017" class="Symbol">:</a> <a id="1019" class="Symbol">∀</a> <a id="1021" class="Symbol">{</a><a id="1022" href="Data.AVL.Height.html#1022" class="Bound">n</a><a id="1023" class="Symbol">}</a> <a id="1025" class="Symbol">→</a>     <a id="1031" href="Data.AVL.Height.html#1022" class="Bound">n</a> <a id="1033" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="1035" href="Data.AVL.Height.html#1022" class="Bound">n</a>     <a id="1041" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1043" href="Data.AVL.Height.html#1022" class="Bound">n</a>
  <a id="_∼_⊔_.∼-"></a><a id="1047" href="Data.AVL.Height.html#1047" class="InductiveConstructor">∼-</a> <a id="1050" class="Symbol">:</a> <a id="1052" class="Symbol">∀</a> <a id="1054" class="Symbol">{</a><a id="1055" href="Data.AVL.Height.html#1055" class="Bound">n</a><a id="1056" class="Symbol">}</a> <a id="1058" class="Symbol">→</a> <a id="1060" class="Number">1</a> <a id="1062" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1064" href="Data.AVL.Height.html#1055" class="Bound">n</a> <a id="1066" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="1068" href="Data.AVL.Height.html#1055" class="Bound">n</a>     <a id="1074" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1076" class="Number">1</a> <a id="1078" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1080" href="Data.AVL.Height.html#1055" class="Bound">n</a>

<a id="1083" class="Comment">-- Some lemmas.</a>

<a id="max∼"></a><a id="1100" href="Data.AVL.Height.html#1100" class="Function">max∼</a> <a id="1105" class="Symbol">:</a> <a id="1107" class="Symbol">∀</a> <a id="1109" class="Symbol">{</a><a id="1110" href="Data.AVL.Height.html#1110" class="Bound">i</a> <a id="1112" href="Data.AVL.Height.html#1112" class="Bound">j</a> <a id="1114" href="Data.AVL.Height.html#1114" class="Bound">m</a><a id="1115" class="Symbol">}</a> <a id="1117" class="Symbol">→</a> <a id="1119" href="Data.AVL.Height.html#1110" class="Bound">i</a> <a id="1121" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="1123" href="Data.AVL.Height.html#1112" class="Bound">j</a> <a id="1125" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1127" href="Data.AVL.Height.html#1114" class="Bound">m</a> <a id="1129" class="Symbol">→</a> <a id="1131" href="Data.AVL.Height.html#1114" class="Bound">m</a> <a id="1133" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="1135" href="Data.AVL.Height.html#1110" class="Bound">i</a> <a id="1137" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1139" href="Data.AVL.Height.html#1114" class="Bound">m</a>
<a id="1141" href="Data.AVL.Height.html#1100" class="Function">max∼</a> <a id="1146" href="Data.AVL.Height.html#977" class="InductiveConstructor">∼+</a> <a id="1149" class="Symbol">=</a> <a id="1151" href="Data.AVL.Height.html#1047" class="InductiveConstructor">∼-</a>
<a id="1154" href="Data.AVL.Height.html#1100" class="Function">max∼</a> <a id="1159" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a> <a id="1162" class="Symbol">=</a> <a id="1164" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a>
<a id="1167" href="Data.AVL.Height.html#1100" class="Function">max∼</a> <a id="1172" href="Data.AVL.Height.html#1047" class="InductiveConstructor">∼-</a> <a id="1175" class="Symbol">=</a> <a id="1177" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a>

<a id="∼max"></a><a id="1181" href="Data.AVL.Height.html#1181" class="Function">∼max</a> <a id="1186" class="Symbol">:</a> <a id="1188" class="Symbol">∀</a> <a id="1190" class="Symbol">{</a><a id="1191" href="Data.AVL.Height.html#1191" class="Bound">i</a> <a id="1193" href="Data.AVL.Height.html#1193" class="Bound">j</a> <a id="1195" href="Data.AVL.Height.html#1195" class="Bound">m</a><a id="1196" class="Symbol">}</a> <a id="1198" class="Symbol">→</a> <a id="1200" href="Data.AVL.Height.html#1191" class="Bound">i</a> <a id="1202" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="1204" href="Data.AVL.Height.html#1193" class="Bound">j</a> <a id="1206" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1208" href="Data.AVL.Height.html#1195" class="Bound">m</a> <a id="1210" class="Symbol">→</a> <a id="1212" href="Data.AVL.Height.html#1193" class="Bound">j</a> <a id="1214" href="Data.AVL.Height.html#945" class="Datatype Operator">∼</a> <a id="1216" href="Data.AVL.Height.html#1195" class="Bound">m</a> <a id="1218" href="Data.AVL.Height.html#945" class="Datatype Operator">⊔</a> <a id="1220" href="Data.AVL.Height.html#1195" class="Bound">m</a>
<a id="1222" href="Data.AVL.Height.html#1181" class="Function">∼max</a> <a id="1227" href="Data.AVL.Height.html#977" class="InductiveConstructor">∼+</a> <a id="1230" class="Symbol">=</a> <a id="1232" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a>
<a id="1235" href="Data.AVL.Height.html#1181" class="Function">∼max</a> <a id="1240" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a> <a id="1243" class="Symbol">=</a> <a id="1245" href="Data.AVL.Height.html#1014" class="InductiveConstructor">∼0</a>
<a id="1248" href="Data.AVL.Height.html#1181" class="Function">∼max</a> <a id="1253" href="Data.AVL.Height.html#1047" class="InductiveConstructor">∼-</a> <a id="1256" class="Symbol">=</a> <a id="1258" href="Data.AVL.Height.html#977" class="InductiveConstructor">∼+</a>
</pre></body></html>