<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.Combinatorics.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Combinatorics operations</a>
<a id="134" class="Comment">------------------------------------------------------------------------</a>

<a id="208" class="Symbol">{-#</a> <a id="212" class="Keyword">OPTIONS</a> <a id="220" class="Pragma">--cubical-compatible</a> <a id="241" class="Pragma">--safe</a> <a id="248" class="Symbol">#-}</a>

<a id="253" class="Keyword">module</a> <a id="260" href="Data.Nat.Combinatorics.Base.html" class="Module">Data.Nat.Combinatorics.Base</a> <a id="288" class="Keyword">where</a>

<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="322" class="Keyword">using</a> <a id="328" class="Symbol">(</a><a id="329" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a><a id="342" class="Symbol">)</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="402" class="Keyword">using</a> <a id="408" class="Symbol">(</a><a id="409" href="Data.Nat.Properties.html#63873" class="Function Operator">_!≢0</a><a id="413" class="Symbol">)</a>

<a id="416" class="Comment">-- NOTE: These operators are not implemented as efficiently as they</a>
<a id="484" class="Comment">-- could be. See the following link for more details.</a>
<a id="538" class="Comment">--</a>
<a id="541" class="Comment">-- https://math.stackexchange.com/questions/202554/how-do-i-compute-binomial-coefficients-efficiently</a>

<a id="644" class="Comment">------------------------------------------------------------------------</a>
<a id="717" class="Comment">-- Permutations / falling factorial</a>

<a id="754" class="Comment">-- The number of ways, including order, that k objects can be chosen</a>
<a id="823" class="Comment">-- from among n objects.</a>

<a id="849" class="Comment">-- n P k = n ! / (n ∸ k) !</a>

<a id="877" class="Keyword">infixl</a> <a id="884" class="Number">6.5</a> <a id="888" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">_P′_</a> <a id="893" href="Data.Nat.Combinatorics.Base.html#1076" class="Function Operator">_P_</a>

<a id="898" class="Comment">-- Base definition. Only valid for k ≤ n.</a>

<a id="_P′_"></a><a id="941" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">_P′_</a> <a id="946" class="Symbol">:</a> <a id="948" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="950" class="Symbol">→</a> <a id="952" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="954" class="Symbol">→</a> <a id="956" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="958" href="Data.Nat.Combinatorics.Base.html#958" class="Bound">n</a> <a id="960" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">P′</a> <a id="963" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="971" class="Symbol">=</a> <a id="973" class="Number">1</a>
<a id="975" href="Data.Nat.Combinatorics.Base.html#975" class="Bound">n</a> <a id="977" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">P′</a> <a id="980" class="Symbol">(</a><a id="981" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="985" href="Data.Nat.Combinatorics.Base.html#985" class="Bound">k</a><a id="986" class="Symbol">)</a> <a id="988" class="Symbol">=</a> <a id="990" class="Symbol">(</a><a id="991" href="Data.Nat.Combinatorics.Base.html#975" class="Bound">n</a> <a id="993" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="995" href="Data.Nat.Combinatorics.Base.html#985" class="Bound">k</a><a id="996" class="Symbol">)</a> <a id="998" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="1000" class="Symbol">(</a><a id="1001" href="Data.Nat.Combinatorics.Base.html#975" class="Bound">n</a> <a id="1003" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">P′</a> <a id="1006" href="Data.Nat.Combinatorics.Base.html#985" class="Bound">k</a><a id="1007" class="Symbol">)</a>

<a id="1010" class="Comment">-- Main definition. Valid for all k as deals with boundary case.</a>

<a id="_P_"></a><a id="1076" href="Data.Nat.Combinatorics.Base.html#1076" class="Function Operator">_P_</a> <a id="1080" class="Symbol">:</a> <a id="1082" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1084" class="Symbol">→</a> <a id="1086" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1088" class="Symbol">→</a> <a id="1090" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="1092" href="Data.Nat.Combinatorics.Base.html#1092" class="Bound">n</a> <a id="1094" href="Data.Nat.Combinatorics.Base.html#1076" class="Function Operator">P</a> <a id="1096" href="Data.Nat.Combinatorics.Base.html#1096" class="Bound">k</a> <a id="1098" class="Symbol">=</a> <a id="1100" href="Data.Bool.Base.html#1505" class="Function Operator">if</a> <a id="1103" href="Data.Nat.Combinatorics.Base.html#1096" class="Bound">k</a> <a id="1105" href="Data.Nat.Base.html#1483" class="Function Operator">≤ᵇ</a> <a id="1108" href="Data.Nat.Combinatorics.Base.html#1092" class="Bound">n</a> <a id="1110" href="Data.Bool.Base.html#1505" class="Function Operator">then</a> <a id="1115" href="Data.Nat.Combinatorics.Base.html#1092" class="Bound">n</a> <a id="1117" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">P′</a> <a id="1120" href="Data.Nat.Combinatorics.Base.html#1096" class="Bound">k</a> <a id="1122" href="Data.Bool.Base.html#1505" class="Function Operator">else</a> <a id="1127" class="Number">0</a>

<a id="1130" class="Comment">------------------------------------------------------------------------</a>
<a id="1203" class="Comment">-- Combinations / binomial coefficient</a>

<a id="1243" class="Comment">-- The number of ways, disregarding order, that k objects can be chosen</a>
<a id="1315" class="Comment">-- from among n objects.</a>

<a id="1341" class="Comment">-- n C k = n ! / (k ! * (n ∸ k) !)</a>

<a id="1377" class="Keyword">infixl</a> <a id="1384" class="Number">6.5</a> <a id="1388" href="Data.Nat.Combinatorics.Base.html#1441" class="Function Operator">_C′_</a> <a id="1393" href="Data.Nat.Combinatorics.Base.html#1622" class="Function Operator">_C_</a>

<a id="1398" class="Comment">-- Base definition. Only valid for k ≤ n.</a>

<a id="_C′_"></a><a id="1441" href="Data.Nat.Combinatorics.Base.html#1441" class="Function Operator">_C′_</a> <a id="1446" class="Symbol">:</a> <a id="1448" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1450" class="Symbol">→</a> <a id="1452" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1454" class="Symbol">→</a> <a id="1456" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="1458" href="Data.Nat.Combinatorics.Base.html#1458" class="Bound">n</a> <a id="1460" href="Data.Nat.Combinatorics.Base.html#1441" class="Function Operator">C′</a> <a id="1463" href="Data.Nat.Combinatorics.Base.html#1463" class="Bound">k</a> <a id="1465" class="Symbol">=</a> <a id="1467" class="Symbol">(</a><a id="1468" href="Data.Nat.Combinatorics.Base.html#1458" class="Bound">n</a> <a id="1470" href="Data.Nat.Combinatorics.Base.html#941" class="Function Operator">P′</a> <a id="1473" href="Data.Nat.Combinatorics.Base.html#1463" class="Bound">k</a><a id="1474" class="Symbol">)</a> <a id="1476" href="Data.Nat.Base.html#7102" class="Function Operator">/</a> <a id="1478" href="Data.Nat.Combinatorics.Base.html#1463" class="Bound">k</a> <a id="1480" href="Data.Nat.Base.html#7391" class="Function Operator">!</a>
  <a id="1484" class="Keyword">where</a> <a id="1490" class="Keyword">instance</a> <a id="1499" href="Data.Nat.Combinatorics.Base.html#1499" class="Function">_</a> <a id="1501" class="Symbol">=</a> <a id="1503" href="Data.Nat.Combinatorics.Base.html#1463" class="Bound">k</a> <a id="1505" href="Data.Nat.Properties.html#63873" class="Function Operator">!≢0</a>

<a id="1510" class="Comment">-- Main definition. Valid for all k.</a>
<a id="1547" class="Comment">-- Deals with boundary case and exploits symmetry to improve performance.</a>

<a id="_C_"></a><a id="1622" href="Data.Nat.Combinatorics.Base.html#1622" class="Function Operator">_C_</a> <a id="1626" class="Symbol">:</a> <a id="1628" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1630" class="Symbol">→</a> <a id="1632" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1634" class="Symbol">→</a> <a id="1636" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="1638" href="Data.Nat.Combinatorics.Base.html#1638" class="Bound">n</a> <a id="1640" href="Data.Nat.Combinatorics.Base.html#1622" class="Function Operator">C</a> <a id="1642" href="Data.Nat.Combinatorics.Base.html#1642" class="Bound">k</a> <a id="1644" class="Symbol">=</a> <a id="1646" href="Data.Bool.Base.html#1505" class="Function Operator">if</a> <a id="1649" href="Data.Nat.Combinatorics.Base.html#1642" class="Bound">k</a> <a id="1651" href="Data.Nat.Base.html#1483" class="Function Operator">≤ᵇ</a> <a id="1654" href="Data.Nat.Combinatorics.Base.html#1638" class="Bound">n</a> <a id="1656" href="Data.Bool.Base.html#1505" class="Function Operator">then</a> <a id="1661" href="Data.Nat.Combinatorics.Base.html#1638" class="Bound">n</a> <a id="1663" href="Data.Nat.Combinatorics.Base.html#1441" class="Function Operator">C′</a> <a id="1666" class="Symbol">(</a><a id="1667" href="Data.Nat.Combinatorics.Base.html#1642" class="Bound">k</a> <a id="1669" href="Data.Nat.Base.html#5851" class="Function Operator">⊓</a> <a id="1671" class="Symbol">(</a><a id="1672" href="Data.Nat.Combinatorics.Base.html#1638" class="Bound">n</a> <a id="1674" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="1676" href="Data.Nat.Combinatorics.Base.html#1642" class="Bound">k</a><a id="1677" class="Symbol">))</a> <a id="1680" href="Data.Bool.Base.html#1505" class="Function Operator">else</a> <a id="1685" class="Number">0</a>
</pre></body></html>