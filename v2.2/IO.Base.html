<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>IO.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- IO: basic types and functions</a>
<a id="139" class="Comment">------------------------------------------------------------------------</a>

<a id="213" class="Symbol">{-#</a> <a id="217" class="Keyword">OPTIONS</a> <a id="225" class="Pragma">--cubical-compatible</a> <a id="246" class="Pragma">--guardedness</a> <a id="260" class="Symbol">#-}</a>

<a id="265" class="Keyword">module</a> <a id="272" href="IO.Base.html" class="Module">IO.Base</a> <a id="280" class="Keyword">where</a>

<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Level.html" class="Module">Level</a>
<a id="305" class="Keyword">open</a> <a id="310" class="Keyword">import</a> <a id="317" href="Codata.Musical.Notation.html" class="Module">Codata.Musical.Notation</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="368" class="Keyword">using</a> <a id="374" class="Symbol">(</a><a id="375" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="379" class="Symbol">;</a> <a id="381" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="385" class="Symbol">;</a> <a id="387" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="392" class="Symbol">;</a> <a id="394" href="Data.Bool.Base.html#941" class="Function">not</a><a id="397" class="Symbol">)</a>
<a id="399" class="Keyword">open</a> <a id="404" class="Keyword">import</a> <a id="411" href="Agda.Builtin.Maybe.html" class="Module">Agda.Builtin.Maybe</a> <a id="430" class="Keyword">using</a> <a id="436" class="Symbol">(</a><a id="437" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="442" class="Symbol">;</a> <a id="444" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="451" class="Symbol">;</a> <a id="453" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="457" class="Symbol">)</a>
<a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="Data.Sum.Base.html" class="Module">Data.Sum.Base</a> <a id="485" class="Keyword">using</a> <a id="491" class="Symbol">(</a><a id="492" href="Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="495" class="Symbol">;</a> <a id="497" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a><a id="501" class="Symbol">;</a> <a id="503" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a><a id="507" class="Symbol">)</a>
<a id="509" class="Keyword">import</a> <a id="516" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="534" class="Symbol">as</a> <a id="537" class="Module">Unit0</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Data.Unit.Polymorphic.Base.html" class="Module">Data.Unit.Polymorphic.Base</a>
<a id="582" class="Keyword">open</a> <a id="587" class="Keyword">import</a> <a id="594" href="Function.Base.html" class="Module">Function.Base</a> <a id="608" class="Keyword">using</a> <a id="614" class="Symbol">(</a><a id="615" href="Function.Base.html#3626" class="Function Operator">_∘′_</a><a id="619" class="Symbol">;</a> <a id="621" href="Function.Base.html#725" class="Function">const</a><a id="626" class="Symbol">;</a> <a id="628" href="Function.Base.html#1638" class="Function">flip</a><a id="632" class="Symbol">)</a>
<a id="634" class="Keyword">import</a> <a id="641" href="IO.Primitive.Core.html" class="Module">IO.Primitive.Core</a> <a id="659" class="Symbol">as</a> <a id="662" class="Module">Prim</a>

<a id="668" class="Keyword">private</a>
  <a id="678" class="Keyword">variable</a>
    <a id="691" href="IO.Base.html#691" class="Generalizable">a</a> <a id="693" href="IO.Base.html#693" class="Generalizable">b</a> <a id="695" href="IO.Base.html#695" class="Generalizable">e</a> <a id="697" class="Symbol">:</a> <a id="699" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="709" href="IO.Base.html#709" class="Generalizable">A</a> <a id="711" class="Symbol">:</a> <a id="713" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="717" href="IO.Base.html#691" class="Generalizable">a</a>
    <a id="723" href="IO.Base.html#723" class="Generalizable">B</a> <a id="725" class="Symbol">:</a> <a id="727" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="731" href="IO.Base.html#693" class="Generalizable">b</a>
    <a id="737" href="IO.Base.html#737" class="Generalizable">E</a> <a id="739" class="Symbol">:</a> <a id="741" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="745" href="IO.Base.html#695" class="Generalizable">e</a>

<a id="748" class="Comment">------------------------------------------------------------------------</a>
<a id="821" class="Comment">-- The IO monad</a>

<a id="838" class="Comment">-- One cannot write &quot;infinitely large&quot; computations with the</a>
<a id="899" class="Comment">-- postulated IO monad in IO.Primitive without turning off the</a>
<a id="962" class="Comment">-- termination checker (or going via the FFI, or perhaps abusing</a>
<a id="1027" class="Comment">-- something else). The following coinductive deep embedding is</a>
<a id="1091" class="Comment">-- introduced to avoid this problem. Possible non-termination is</a>
<a id="1156" class="Comment">-- isolated to the run function below.</a>

<a id="1196" class="Keyword">data</a> <a id="IO"></a><a id="1201" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1204" class="Symbol">(</a><a id="1205" href="IO.Base.html#1205" class="Bound">A</a> <a id="1207" class="Symbol">:</a> <a id="1209" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1213" href="IO.Base.html#691" class="Generalizable">a</a><a id="1214" class="Symbol">)</a> <a id="1216" class="Symbol">:</a> <a id="1218" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1222" class="Symbol">(</a><a id="1223" href="Agda.Primitive.html#931" class="Primitive">suc</a> <a id="1227" href="IO.Base.html#1213" class="Bound">a</a><a id="1228" class="Symbol">)</a> <a id="1230" class="Keyword">where</a>
  <a id="IO.lift"></a><a id="1238" href="IO.Base.html#1238" class="InductiveConstructor">lift</a> <a id="1243" class="Symbol">:</a> <a id="1245" class="Symbol">(</a><a id="1246" href="IO.Base.html#1246" class="Bound">m</a> <a id="1248" class="Symbol">:</a> <a id="1250" href="Agda.Builtin.IO.html#137" class="Postulate">Prim.IO</a> <a id="1258" href="IO.Base.html#1205" class="Bound">A</a><a id="1259" class="Symbol">)</a> <a id="1261" class="Symbol">→</a> <a id="1263" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1266" href="IO.Base.html#1205" class="Bound">A</a>
  <a id="IO.pure"></a><a id="1270" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="1275" class="Symbol">:</a> <a id="1277" class="Symbol">(</a><a id="1278" href="IO.Base.html#1278" class="Bound">x</a> <a id="1280" class="Symbol">:</a> <a id="1282" href="IO.Base.html#1205" class="Bound">A</a><a id="1283" class="Symbol">)</a> <a id="1285" class="Symbol">→</a> <a id="1287" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1290" href="IO.Base.html#1205" class="Bound">A</a>
  <a id="IO.bind"></a><a id="1294" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="1299" class="Symbol">:</a> <a id="1301" class="Symbol">{</a><a id="1302" href="IO.Base.html#1302" class="Bound">B</a> <a id="1304" class="Symbol">:</a> <a id="1306" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1310" href="IO.Base.html#1213" class="Bound">a</a><a id="1311" class="Symbol">}</a> <a id="1313" class="Symbol">(</a><a id="1314" href="IO.Base.html#1314" class="Bound">m</a> <a id="1316" class="Symbol">:</a> <a id="1318" href="Agda.Builtin.Coinduction.html#196" class="Record">∞</a> <a id="1320" class="Symbol">(</a><a id="1321" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1324" href="IO.Base.html#1302" class="Bound">B</a><a id="1325" class="Symbol">))</a> <a id="1328" class="Symbol">(</a><a id="1329" href="IO.Base.html#1329" class="Bound">f</a> <a id="1331" class="Symbol">:</a> <a id="1333" class="Symbol">(</a><a id="1334" href="IO.Base.html#1334" class="Bound">x</a> <a id="1336" class="Symbol">:</a> <a id="1338" href="IO.Base.html#1302" class="Bound">B</a><a id="1339" class="Symbol">)</a> <a id="1341" class="Symbol">→</a> <a id="1343" href="Agda.Builtin.Coinduction.html#196" class="Record">∞</a> <a id="1345" class="Symbol">(</a><a id="1346" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1349" href="IO.Base.html#1205" class="Bound">A</a><a id="1350" class="Symbol">))</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1358" href="IO.Base.html#1205" class="Bound">A</a>
  <a id="IO.seq"></a><a id="1362" href="IO.Base.html#1362" class="InductiveConstructor">seq</a>  <a id="1367" class="Symbol">:</a> <a id="1369" class="Symbol">{</a><a id="1370" href="IO.Base.html#1370" class="Bound">B</a> <a id="1372" class="Symbol">:</a> <a id="1374" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1378" href="IO.Base.html#1213" class="Bound">a</a><a id="1379" class="Symbol">}</a> <a id="1381" class="Symbol">(</a><a id="1382" href="IO.Base.html#1382" class="Bound">m₁</a> <a id="1385" class="Symbol">:</a> <a id="1387" href="Agda.Builtin.Coinduction.html#196" class="Record">∞</a> <a id="1389" class="Symbol">(</a><a id="1390" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1393" href="IO.Base.html#1370" class="Bound">B</a><a id="1394" class="Symbol">))</a> <a id="1397" class="Symbol">(</a><a id="1398" href="IO.Base.html#1398" class="Bound">m₂</a> <a id="1401" class="Symbol">:</a> <a id="1403" href="Agda.Builtin.Coinduction.html#196" class="Record">∞</a> <a id="1405" class="Symbol">(</a><a id="1406" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1409" href="IO.Base.html#1205" class="Bound">A</a><a id="1410" class="Symbol">))</a> <a id="1413" class="Symbol">→</a> <a id="1415" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1418" href="IO.Base.html#1205" class="Bound">A</a>

<a id="lift!"></a><a id="1421" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1427" class="Symbol">:</a> <a id="1429" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1432" href="IO.Base.html#709" class="Generalizable">A</a> <a id="1434" class="Symbol">→</a> <a id="1436" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1439" class="Symbol">(</a><a id="1440" href="Level.html#409" class="Record">Lift</a> <a id="1445" href="IO.Base.html#693" class="Generalizable">b</a> <a id="1447" href="IO.Base.html#709" class="Generalizable">A</a><a id="1448" class="Symbol">)</a>
<a id="1450" href="IO.Base.html#1421" class="Function">lift!</a>         <a id="1464" class="Symbol">(</a><a id="1465" href="IO.Base.html#1238" class="InductiveConstructor">lift</a> <a id="1470" href="IO.Base.html#1470" class="Bound">io</a><a id="1472" class="Symbol">)</a>   <a id="1476" class="Symbol">=</a> <a id="1478" href="IO.Base.html#1238" class="InductiveConstructor">lift</a> <a id="1483" class="Symbol">(</a><a id="1484" href="IO.Base.html#1470" class="Bound">io</a> <a id="1487" href="IO.Primitive.Core.html#648" class="Postulate Operator">Prim.&gt;&gt;=</a> <a id="1496" class="Symbol">λ</a> <a id="1498" href="IO.Base.html#1498" class="Bound">a</a> <a id="1500" class="Symbol">→</a> <a id="1502" href="IO.Primitive.Core.html#630" class="Postulate">Prim.pure</a> <a id="1512" class="Symbol">(</a><a id="1513" href="Level.html#466" class="InductiveConstructor">Level.lift</a> <a id="1524" href="IO.Base.html#1498" class="Bound">a</a><a id="1525" class="Symbol">))</a>
<a id="1528" href="IO.Base.html#1421" class="Function">lift!</a>         <a id="1542" class="Symbol">(</a><a id="1543" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="1548" href="IO.Base.html#1548" class="Bound">a</a><a id="1549" class="Symbol">)</a>    <a id="1554" class="Symbol">=</a> <a id="1556" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="1561" class="Symbol">(</a><a id="1562" href="Level.html#466" class="InductiveConstructor">Level.lift</a> <a id="1573" href="IO.Base.html#1548" class="Bound">a</a><a id="1574" class="Symbol">)</a>
<a id="1576" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1582" class="Symbol">{</a><a id="1583" class="Argument">b</a> <a id="1585" class="Symbol">=</a> <a id="1587" href="IO.Base.html#1587" class="Bound">b</a><a id="1588" class="Symbol">}</a> <a id="1590" class="Symbol">(</a><a id="1591" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="1596" href="IO.Base.html#1596" class="Bound">m</a> <a id="1598" href="IO.Base.html#1598" class="Bound">f</a><a id="1599" class="Symbol">)</a>  <a id="1602" class="Symbol">=</a> <a id="1604" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="1609" class="Symbol">(</a><a id="1610" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1612" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1618" class="Symbol">{</a><a id="1619" class="Argument">b</a> <a id="1621" class="Symbol">=</a> <a id="1623" href="IO.Base.html#1587" class="Bound">b</a><a id="1624" class="Symbol">}</a> <a id="1626" class="Symbol">(</a><a id="1627" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="1629" href="IO.Base.html#1596" class="Bound">m</a><a id="1630" class="Symbol">))</a>
                                 <a id="1666" class="Symbol">(λ</a> <a id="1669" href="IO.Base.html#1669" class="Bound">x</a> <a id="1671" class="Symbol">→</a> <a id="1673" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1675" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1681" class="Symbol">(</a><a id="1682" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="1684" class="Symbol">(</a><a id="1685" href="IO.Base.html#1598" class="Bound">f</a> <a id="1687" class="Symbol">(</a><a id="1688" href="Level.html#479" class="Field">lower</a> <a id="1694" href="IO.Base.html#1669" class="Bound">x</a><a id="1695" class="Symbol">))))</a>
<a id="1700" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1706" class="Symbol">{</a><a id="1707" class="Argument">b</a> <a id="1709" class="Symbol">=</a> <a id="1711" href="IO.Base.html#1711" class="Bound">b</a><a id="1712" class="Symbol">}</a> <a id="1714" class="Symbol">(</a><a id="1715" href="IO.Base.html#1362" class="InductiveConstructor">seq</a> <a id="1719" href="IO.Base.html#1719" class="Bound">m₁</a> <a id="1722" href="IO.Base.html#1722" class="Bound">m₂</a><a id="1724" class="Symbol">)</a> <a id="1726" class="Symbol">=</a> <a id="1728" href="IO.Base.html#1362" class="InductiveConstructor">seq</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1735" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1741" class="Symbol">{</a><a id="1742" class="Argument">b</a> <a id="1744" class="Symbol">=</a> <a id="1746" href="IO.Base.html#1711" class="Bound">b</a><a id="1747" class="Symbol">}</a> <a id="1749" class="Symbol">(</a><a id="1750" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="1752" href="IO.Base.html#1719" class="Bound">m₁</a><a id="1754" class="Symbol">))</a>
                                <a id="1789" class="Symbol">(</a><a id="1790" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1792" href="IO.Base.html#1421" class="Function">lift!</a> <a id="1798" class="Symbol">(</a><a id="1799" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="1801" href="IO.Base.html#1722" class="Bound">m₂</a><a id="1803" class="Symbol">))</a>

<a id="1807" class="Keyword">module</a> <a id="1814" href="IO.Base.html#1814" class="Module">_</a> <a id="1816" class="Symbol">{</a><a id="1817" href="IO.Base.html#1817" class="Bound">A</a> <a id="1819" href="IO.Base.html#1819" class="Bound">B</a> <a id="1821" class="Symbol">:</a> <a id="1823" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1827" href="IO.Base.html#691" class="Generalizable">a</a><a id="1828" class="Symbol">}</a> <a id="1830" class="Keyword">where</a>

  <a id="1839" class="Keyword">infixl</a> <a id="1846" class="Number">1</a> <a id="1848" href="IO.Base.html#1994" class="Function Operator">_&lt;$&gt;_</a> <a id="1854" href="IO.Base.html#1891" class="Function Operator">_&lt;*&gt;_</a> <a id="1860" href="IO.Base.html#2105" class="Function Operator">_&gt;&gt;=_</a> <a id="1866" href="IO.Base.html#2233" class="Function Operator">_&gt;&gt;_</a>
  <a id="1873" class="Keyword">infixr</a> <a id="1880" class="Number">1</a> <a id="1882" href="IO.Base.html#2176" class="Function Operator">_=&lt;&lt;_</a>

  <a id="1891" href="IO.Base.html#1891" class="Function Operator">_&lt;*&gt;_</a> <a id="1897" class="Symbol">:</a> <a id="1899" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1902" class="Symbol">(</a><a id="1903" href="IO.Base.html#1817" class="Bound">A</a> <a id="1905" class="Symbol">→</a> <a id="1907" href="IO.Base.html#1819" class="Bound">B</a><a id="1908" class="Symbol">)</a> <a id="1910" class="Symbol">→</a> <a id="1912" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1915" href="IO.Base.html#1817" class="Bound">A</a> <a id="1917" class="Symbol">→</a> <a id="1919" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="1922" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="1926" href="IO.Base.html#1926" class="Bound">mf</a> <a id="1929" href="IO.Base.html#1891" class="Function Operator">&lt;*&gt;</a> <a id="1933" href="IO.Base.html#1933" class="Bound">mx</a> <a id="1936" class="Symbol">=</a> <a id="1938" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="1943" class="Symbol">(</a><a id="1944" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1946" href="IO.Base.html#1926" class="Bound">mf</a><a id="1948" class="Symbol">)</a> <a id="1950" class="Symbol">λ</a> <a id="1952" href="IO.Base.html#1952" class="Bound">f</a> <a id="1954" class="Symbol">→</a> <a id="1956" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1958" class="Symbol">(</a><a id="1959" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="1964" class="Symbol">(</a><a id="1965" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1967" href="IO.Base.html#1933" class="Bound">mx</a><a id="1969" class="Symbol">)</a> <a id="1971" class="Symbol">λ</a> <a id="1973" href="IO.Base.html#1973" class="Bound">x</a> <a id="1975" class="Symbol">→</a> <a id="1977" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="1979" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="1984" class="Symbol">(</a><a id="1985" href="IO.Base.html#1952" class="Bound">f</a> <a id="1987" href="IO.Base.html#1973" class="Bound">x</a><a id="1988" class="Symbol">))</a>

  <a id="1994" href="IO.Base.html#1994" class="Function Operator">_&lt;$&gt;_</a> <a id="2000" class="Symbol">:</a> <a id="2002" class="Symbol">(</a><a id="2003" href="IO.Base.html#1817" class="Bound">A</a> <a id="2005" class="Symbol">→</a> <a id="2007" href="IO.Base.html#1819" class="Bound">B</a><a id="2008" class="Symbol">)</a> <a id="2010" class="Symbol">→</a> <a id="2012" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2015" href="IO.Base.html#1817" class="Bound">A</a> <a id="2017" class="Symbol">→</a> <a id="2019" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2022" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="2026" href="IO.Base.html#2026" class="Bound">f</a> <a id="2028" href="IO.Base.html#1994" class="Function Operator">&lt;$&gt;</a> <a id="2032" href="IO.Base.html#2032" class="Bound">m</a> <a id="2034" class="Symbol">=</a> <a id="2036" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="2041" href="IO.Base.html#2026" class="Bound">f</a> <a id="2043" href="IO.Base.html#1891" class="Function Operator">&lt;*&gt;</a> <a id="2047" href="IO.Base.html#2032" class="Bound">m</a>

  <a id="2052" href="IO.Base.html#2052" class="Function Operator">_&lt;$_</a> <a id="2057" class="Symbol">:</a> <a id="2059" href="IO.Base.html#1819" class="Bound">B</a> <a id="2061" class="Symbol">→</a> <a id="2063" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2066" href="IO.Base.html#1817" class="Bound">A</a> <a id="2068" class="Symbol">→</a> <a id="2070" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2073" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="2077" href="IO.Base.html#2077" class="Bound">b</a> <a id="2079" href="IO.Base.html#2052" class="Function Operator">&lt;$</a> <a id="2082" href="IO.Base.html#2082" class="Bound">m</a> <a id="2084" class="Symbol">=</a> <a id="2086" class="Symbol">(</a><a id="2087" href="Function.Base.html#725" class="Function">const</a> <a id="2093" href="IO.Base.html#2077" class="Bound">b</a><a id="2094" class="Symbol">)</a> <a id="2096" href="IO.Base.html#1994" class="Function Operator">&lt;$&gt;</a> <a id="2100" href="IO.Base.html#2082" class="Bound">m</a>

  <a id="2105" href="IO.Base.html#2105" class="Function Operator">_&gt;&gt;=_</a> <a id="2111" class="Symbol">:</a> <a id="2113" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2116" href="IO.Base.html#1817" class="Bound">A</a> <a id="2118" class="Symbol">→</a> <a id="2120" class="Symbol">(</a><a id="2121" href="IO.Base.html#1817" class="Bound">A</a> <a id="2123" class="Symbol">→</a> <a id="2125" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2128" href="IO.Base.html#1819" class="Bound">B</a><a id="2129" class="Symbol">)</a> <a id="2131" class="Symbol">→</a> <a id="2133" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2136" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="2140" href="IO.Base.html#2140" class="Bound">m</a> <a id="2142" href="IO.Base.html#2105" class="Function Operator">&gt;&gt;=</a> <a id="2146" href="IO.Base.html#2146" class="Bound">f</a> <a id="2148" class="Symbol">=</a> <a id="2150" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="2155" class="Symbol">(</a><a id="2156" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="2158" href="IO.Base.html#2140" class="Bound">m</a><a id="2159" class="Symbol">)</a> <a id="2161" class="Symbol">λ</a> <a id="2163" href="IO.Base.html#2163" class="Bound">x</a> <a id="2165" class="Symbol">→</a> <a id="2167" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="2169" href="IO.Base.html#2146" class="Bound">f</a> <a id="2171" href="IO.Base.html#2163" class="Bound">x</a>

  <a id="2176" href="IO.Base.html#2176" class="Function Operator">_=&lt;&lt;_</a> <a id="2182" class="Symbol">:</a> <a id="2184" class="Symbol">(</a><a id="2185" href="IO.Base.html#1817" class="Bound">A</a> <a id="2187" class="Symbol">→</a> <a id="2189" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2192" href="IO.Base.html#1819" class="Bound">B</a><a id="2193" class="Symbol">)</a> <a id="2195" class="Symbol">→</a> <a id="2197" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2200" href="IO.Base.html#1817" class="Bound">A</a> <a id="2202" class="Symbol">→</a> <a id="2204" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2207" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="2211" href="IO.Base.html#2176" class="Function Operator">_=&lt;&lt;_</a> <a id="2217" class="Symbol">=</a> <a id="2219" href="Function.Base.html#1638" class="Function">flip</a> <a id="2224" href="IO.Base.html#2105" class="Function Operator">_&gt;&gt;=_</a>

  <a id="2233" href="IO.Base.html#2233" class="Function Operator">_&gt;&gt;_</a> <a id="2238" class="Symbol">:</a> <a id="2240" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2243" href="IO.Base.html#1817" class="Bound">A</a> <a id="2245" class="Symbol">→</a> <a id="2247" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2250" href="IO.Base.html#1819" class="Bound">B</a> <a id="2252" class="Symbol">→</a> <a id="2254" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2257" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="2261" href="IO.Base.html#2261" class="Bound">m₁</a> <a id="2264" href="IO.Base.html#2233" class="Function Operator">&gt;&gt;</a> <a id="2267" href="IO.Base.html#2267" class="Bound">m₂</a> <a id="2270" class="Symbol">=</a> <a id="2272" href="IO.Base.html#1362" class="InductiveConstructor">seq</a> <a id="2276" class="Symbol">(</a><a id="2277" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="2279" href="IO.Base.html#2261" class="Bound">m₁</a><a id="2281" class="Symbol">)</a> <a id="2283" class="Symbol">(</a><a id="2284" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="2286" href="IO.Base.html#2267" class="Bound">m₂</a><a id="2288" class="Symbol">)</a>

  <a id="2293" href="IO.Base.html#2293" class="Function Operator">_&lt;&lt;_</a> <a id="2298" class="Symbol">:</a> <a id="2300" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2303" href="IO.Base.html#1819" class="Bound">B</a> <a id="2305" class="Symbol">→</a> <a id="2307" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2310" href="IO.Base.html#1817" class="Bound">A</a> <a id="2312" class="Symbol">→</a> <a id="2314" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2317" href="IO.Base.html#1819" class="Bound">B</a>
  <a id="2321" href="IO.Base.html#2293" class="Function Operator">_&lt;&lt;_</a> <a id="2326" class="Symbol">=</a> <a id="2328" href="Function.Base.html#1638" class="Function">flip</a> <a id="2333" href="IO.Base.html#2233" class="Function Operator">_&gt;&gt;_</a>

<a id="2339" class="Comment">------------------------------------------------------------------------</a>
<a id="2412" class="Comment">-- Running programs</a>

<a id="2433" class="Comment">-- A value of type `IO A` is a description of a computation that may</a>
<a id="2502" class="Comment">-- eventually produce an `A`. The `run` function converts this</a>
<a id="2565" class="Comment">-- description of a computation into calls to primitive functions that</a>
<a id="2636" class="Comment">-- will actually perform it.</a>

<a id="2666" class="Symbol">{-#</a> <a id="2670" class="Keyword">NON_TERMINATING</a> <a id="2686" class="Symbol">#-}</a>
<a id="run"></a><a id="2690" href="IO.Base.html#2690" class="Function">run</a> <a id="2694" class="Symbol">:</a> <a id="2696" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="2699" href="IO.Base.html#709" class="Generalizable">A</a> <a id="2701" class="Symbol">→</a> <a id="2703" href="Agda.Builtin.IO.html#137" class="Postulate">Prim.IO</a> <a id="2711" href="IO.Base.html#709" class="Generalizable">A</a>
<a id="2713" href="IO.Base.html#2690" class="Function">run</a> <a id="2717" class="Symbol">(</a><a id="2718" href="IO.Base.html#1238" class="InductiveConstructor">lift</a> <a id="2723" href="IO.Base.html#2723" class="Bound">m</a><a id="2724" class="Symbol">)</a>    <a id="2729" class="Symbol">=</a> <a id="2731" href="IO.Base.html#2723" class="Bound">m</a>
<a id="2733" href="IO.Base.html#2690" class="Function">run</a> <a id="2737" class="Symbol">(</a><a id="2738" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="2743" href="IO.Base.html#2743" class="Bound">x</a><a id="2744" class="Symbol">)</a>    <a id="2749" class="Symbol">=</a> <a id="2751" href="IO.Primitive.Core.html#630" class="Postulate">Prim.pure</a> <a id="2761" href="IO.Base.html#2743" class="Bound">x</a>
<a id="2763" href="IO.Base.html#2690" class="Function">run</a> <a id="2767" class="Symbol">(</a><a id="2768" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="2773" href="IO.Base.html#2773" class="Bound">m</a> <a id="2775" href="IO.Base.html#2775" class="Bound">f</a><a id="2776" class="Symbol">)</a>  <a id="2779" class="Symbol">=</a> <a id="2781" href="IO.Base.html#2690" class="Function">run</a> <a id="2785" class="Symbol">(</a><a id="2786" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="2788" href="IO.Base.html#2773" class="Bound">m</a> <a id="2790" class="Symbol">)</a> <a id="2792" href="IO.Primitive.Core.html#648" class="Postulate Operator">Prim.&gt;&gt;=</a> <a id="2801" class="Symbol">λ</a> <a id="2803" href="IO.Base.html#2803" class="Bound">x</a> <a id="2805" class="Symbol">→</a> <a id="2807" href="IO.Base.html#2690" class="Function">run</a> <a id="2811" class="Symbol">(</a><a id="2812" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="2814" class="Symbol">(</a><a id="2815" href="IO.Base.html#2775" class="Bound">f</a> <a id="2817" href="IO.Base.html#2803" class="Bound">x</a><a id="2818" class="Symbol">))</a>
<a id="2821" href="IO.Base.html#2690" class="Function">run</a> <a id="2825" class="Symbol">(</a><a id="2826" href="IO.Base.html#1362" class="InductiveConstructor">seq</a> <a id="2830" href="IO.Base.html#2830" class="Bound">m₁</a> <a id="2833" href="IO.Base.html#2833" class="Bound">m₂</a><a id="2835" class="Symbol">)</a> <a id="2837" class="Symbol">=</a> <a id="2839" href="IO.Base.html#2690" class="Function">run</a> <a id="2843" class="Symbol">(</a><a id="2844" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="2846" href="IO.Base.html#2830" class="Bound">m₁</a><a id="2848" class="Symbol">)</a> <a id="2850" href="IO.Primitive.Core.html#648" class="Postulate Operator">Prim.&gt;&gt;=</a> <a id="2859" class="Symbol">λ</a> <a id="2861" href="IO.Base.html#2861" class="Bound">_</a> <a id="2863" class="Symbol">→</a> <a id="2865" href="IO.Base.html#2690" class="Function">run</a> <a id="2869" class="Symbol">(</a><a id="2870" href="Agda.Builtin.Coinduction.html#264" class="Field">♭</a> <a id="2872" href="IO.Base.html#2833" class="Bound">m₂</a><a id="2874" class="Symbol">)</a>

<a id="2877" class="Comment">-- The entrypoint of an Agda program will be assigned type `Main` and</a>
<a id="2947" class="Comment">-- implemented using `run` on some `IO ⊤` program.</a>

<a id="Main"></a><a id="2999" href="IO.Base.html#2999" class="Function">Main</a> <a id="3004" class="Symbol">:</a> <a id="3006" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="3010" href="IO.Base.html#2999" class="Function">Main</a> <a id="3015" class="Symbol">=</a> <a id="3017" href="Agda.Builtin.IO.html#137" class="Postulate">Prim.IO</a> <a id="3025" class="Symbol">{</a><a id="3026" href="Level.html#521" class="Function">0ℓ</a><a id="3028" class="Symbol">}</a> <a id="3030" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>

<a id="3033" class="Comment">------------------------------------------------------------------------</a>
<a id="3106" class="Comment">-- Utilities</a>

<a id="3120" class="Comment">-- Make a unit-returning primitive level polymorphic</a>
<a id="lift′"></a><a id="3173" href="IO.Base.html#3173" class="Function">lift′</a> <a id="3179" class="Symbol">:</a> <a id="3181" href="Agda.Builtin.IO.html#137" class="Postulate">Prim.IO</a> <a id="3189" href="Agda.Builtin.Unit.html#175" class="Record">Unit0.⊤</a> <a id="3197" class="Symbol">→</a> <a id="3199" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3202" class="Symbol">{</a><a id="3203" href="IO.Base.html#691" class="Generalizable">a</a><a id="3204" class="Symbol">}</a> <a id="3206" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="3208" href="IO.Base.html#3173" class="Function">lift′</a> <a id="3214" href="IO.Base.html#3214" class="Bound">io</a> <a id="3217" class="Symbol">=</a> <a id="3219" href="IO.Base.html#1238" class="InductiveConstructor">lift</a> <a id="3224" class="Symbol">(</a><a id="3225" href="IO.Base.html#3214" class="Bound">io</a> <a id="3228" href="IO.Primitive.Core.html#648" class="Postulate Operator">Prim.&gt;&gt;=</a> <a id="3237" class="Symbol">λ</a> <a id="3239" href="IO.Base.html#3239" class="Bound">_</a> <a id="3241" class="Symbol">→</a> <a id="3243" href="IO.Primitive.Core.html#630" class="Postulate">Prim.pure</a> <a id="3253" class="Symbol">_)</a>

<a id="3257" class="Comment">-- Throw away the result</a>
<a id="ignore"></a><a id="3282" href="IO.Base.html#3282" class="Function">ignore</a> <a id="3289" class="Symbol">:</a> <a id="3291" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3294" href="IO.Base.html#709" class="Generalizable">A</a> <a id="3296" class="Symbol">→</a> <a id="3298" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3301" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="3303" href="IO.Base.html#3282" class="Function">ignore</a> <a id="3310" href="IO.Base.html#3310" class="Bound">io</a> <a id="3313" class="Symbol">=</a> <a id="3315" href="IO.Base.html#3310" class="Bound">io</a> <a id="3318" href="IO.Base.html#2233" class="Function Operator">&gt;&gt;</a> <a id="3321" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="3326" class="Symbol">_</a>


<a id="3330" class="Comment">------------------------------------------------------------------------</a>
<a id="3403" class="Comment">-- Conditional executions</a>

<a id="3430" class="Comment">-- Only run the action if the boolean is true</a>
<a id="when"></a><a id="3476" href="IO.Base.html#3476" class="Function">when</a> <a id="3481" class="Symbol">:</a> <a id="3483" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="3488" class="Symbol">→</a> <a id="3490" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3493" class="Symbol">{</a><a id="3494" href="IO.Base.html#691" class="Generalizable">a</a><a id="3495" class="Symbol">}</a> <a id="3497" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a> <a id="3499" class="Symbol">→</a> <a id="3501" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3504" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="3506" href="IO.Base.html#3476" class="Function">when</a> <a id="3511" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="3516" href="IO.Base.html#3516" class="Bound">m</a> <a id="3518" class="Symbol">=</a> <a id="3520" href="IO.Base.html#3516" class="Bound">m</a>
<a id="3522" href="IO.Base.html#3476" class="Function">when</a> <a id="3527" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3533" class="Symbol">_</a> <a id="3535" class="Symbol">=</a> <a id="3537" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="3542" class="Symbol">_</a>

<a id="3545" class="Comment">-- Only run the action if the boolean is false</a>
<a id="unless"></a><a id="3592" href="IO.Base.html#3592" class="Function">unless</a> <a id="3599" class="Symbol">:</a> <a id="3601" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="3606" class="Symbol">→</a> <a id="3608" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3611" class="Symbol">{</a><a id="3612" href="IO.Base.html#691" class="Generalizable">a</a><a id="3613" class="Symbol">}</a> <a id="3615" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a> <a id="3617" class="Symbol">→</a> <a id="3619" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3622" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="3624" href="IO.Base.html#3592" class="Function">unless</a> <a id="3631" class="Symbol">=</a> <a id="3633" href="IO.Base.html#3476" class="Function">when</a> <a id="3638" href="Function.Base.html#3626" class="Function Operator">∘′</a> <a id="3641" href="Data.Bool.Base.html#941" class="Function">not</a>

<a id="3646" class="Comment">-- Run the action if the `Maybe` computation was successful</a>
<a id="whenJust"></a><a id="3706" href="IO.Base.html#3706" class="Function">whenJust</a> <a id="3715" class="Symbol">:</a> <a id="3717" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3723" href="IO.Base.html#709" class="Generalizable">A</a> <a id="3725" class="Symbol">→</a> <a id="3727" class="Symbol">(</a><a id="3728" href="IO.Base.html#709" class="Generalizable">A</a> <a id="3730" class="Symbol">→</a> <a id="3732" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3735" class="Symbol">{</a><a id="3736" href="IO.Base.html#691" class="Generalizable">a</a><a id="3737" class="Symbol">}</a> <a id="3739" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a><a id="3740" class="Symbol">)</a> <a id="3742" class="Symbol">→</a> <a id="3744" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3747" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="3749" href="IO.Base.html#3706" class="Function">whenJust</a> <a id="3758" class="Symbol">(</a><a id="3759" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3764" href="IO.Base.html#3764" class="Bound">a</a><a id="3765" class="Symbol">)</a> <a id="3767" href="IO.Base.html#3767" class="Bound">k</a> <a id="3769" class="Symbol">=</a> <a id="3771" href="IO.Base.html#3767" class="Bound">k</a> <a id="3773" href="IO.Base.html#3764" class="Bound">a</a>
<a id="3775" href="IO.Base.html#3706" class="Function">whenJust</a> <a id="3784" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="3793" class="Symbol">_</a> <a id="3795" class="Symbol">=</a> <a id="3797" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="3802" class="Symbol">_</a>

<a id="3805" class="Comment">-- Run the action if the `E ⊎_` computation was successful</a>
<a id="whenInj₂"></a><a id="3864" href="IO.Base.html#3864" class="Function">whenInj₂</a> <a id="3873" class="Symbol">:</a> <a id="3875" href="IO.Base.html#737" class="Generalizable">E</a> <a id="3877" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3879" href="IO.Base.html#709" class="Generalizable">A</a> <a id="3881" class="Symbol">→</a> <a id="3883" class="Symbol">(</a><a id="3884" href="IO.Base.html#709" class="Generalizable">A</a> <a id="3886" class="Symbol">→</a> <a id="3888" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3891" class="Symbol">{</a><a id="3892" href="IO.Base.html#691" class="Generalizable">a</a><a id="3893" class="Symbol">}</a> <a id="3895" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a><a id="3896" class="Symbol">)</a> <a id="3898" class="Symbol">→</a> <a id="3900" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="3903" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="3905" href="IO.Base.html#3864" class="Function">whenInj₂</a> <a id="3914" class="Symbol">(</a><a id="3915" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3920" href="IO.Base.html#3920" class="Bound">a</a><a id="3921" class="Symbol">)</a> <a id="3923" href="IO.Base.html#3923" class="Bound">k</a> <a id="3925" class="Symbol">=</a> <a id="3927" href="IO.Base.html#3923" class="Bound">k</a> <a id="3929" href="IO.Base.html#3920" class="Bound">a</a>
<a id="3931" href="IO.Base.html#3864" class="Function">whenInj₂</a> <a id="3940" class="Symbol">(</a><a id="3941" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3946" class="Symbol">_)</a> <a id="3949" class="Symbol">_</a> <a id="3951" class="Symbol">=</a> <a id="3953" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="3958" class="Symbol">_</a>


<a id="3962" class="Comment">------------------------------------------------------------------------</a>
<a id="4035" class="Comment">-- Loops</a>

<a id="4045" class="Comment">-- Keep running the action forever</a>
<a id="forever"></a><a id="4080" href="IO.Base.html#4080" class="Function">forever</a> <a id="4088" class="Symbol">:</a> <a id="4090" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="4093" class="Symbol">{</a><a id="4094" href="IO.Base.html#691" class="Generalizable">a</a><a id="4095" class="Symbol">}</a> <a id="4097" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a> <a id="4099" class="Symbol">→</a> <a id="4101" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="4104" class="Symbol">{</a><a id="4105" href="IO.Base.html#691" class="Generalizable">a</a><a id="4106" class="Symbol">}</a> <a id="4108" href="Data.Unit.Polymorphic.Base.html#489" class="Function">⊤</a>
<a id="4110" href="IO.Base.html#4080" class="Function">forever</a> <a id="4118" href="IO.Base.html#4118" class="Bound">act</a> <a id="4122" class="Symbol">=</a> <a id="4124" href="IO.Base.html#1362" class="InductiveConstructor">seq</a> <a id="4128" class="Symbol">(</a><a id="4129" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4131" href="IO.Base.html#4118" class="Bound">act</a><a id="4134" class="Symbol">)</a> <a id="4136" class="Symbol">(</a><a id="4137" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4139" href="IO.Base.html#4080" class="Function">forever</a> <a id="4147" href="IO.Base.html#4118" class="Bound">act</a><a id="4150" class="Symbol">)</a>

<a id="4153" class="Comment">-- Keep running an IO action until we get a value. Convenient when user</a>
<a id="4225" class="Comment">-- input is involved and it may be malformed.</a>
<a id="untilJust"></a><a id="4271" href="IO.Base.html#4271" class="Function">untilJust</a> <a id="4281" class="Symbol">:</a> <a id="4283" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="4286" class="Symbol">(</a><a id="4287" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4293" href="IO.Base.html#709" class="Generalizable">A</a><a id="4294" class="Symbol">)</a> <a id="4296" class="Symbol">→</a> <a id="4298" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="4301" href="IO.Base.html#709" class="Generalizable">A</a>
<a id="4303" class="Comment">-- Note that here we are forced to use `bind` &amp; the musical notation</a>
<a id="4372" class="Comment">-- explicitly to guarantee that the corecursive call is guarded</a>
<a id="4436" href="IO.Base.html#4271" class="Function">untilJust</a> <a id="4446" href="IO.Base.html#4446" class="Bound">m</a> <a id="4448" class="Symbol">=</a> <a id="4450" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="4455" class="Symbol">(</a><a id="4456" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4458" href="IO.Base.html#4446" class="Bound">m</a><a id="4459" class="Symbol">)</a> <a id="4461" class="Symbol">λ</a> <a id="4463" class="Keyword">where</a>
  <a id="4471" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="4480" class="Symbol">→</a> <a id="4482" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4484" href="IO.Base.html#4271" class="Function">untilJust</a> <a id="4494" href="IO.Base.html#4446" class="Bound">m</a>
  <a id="4498" class="Symbol">(</a><a id="4499" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4504" href="IO.Base.html#4504" class="Bound">a</a><a id="4505" class="Symbol">)</a> <a id="4507" class="Symbol">→</a> <a id="4509" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4511" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="4516" href="IO.Base.html#4504" class="Bound">a</a>

<a id="untilInj₂"></a><a id="4519" href="IO.Base.html#4519" class="Function">untilInj₂</a> <a id="4529" class="Symbol">:</a> <a id="4531" class="Symbol">{</a><a id="4532" href="IO.Base.html#4532" class="Bound">A</a> <a id="4534" href="IO.Base.html#4534" class="Bound">B</a> <a id="4536" class="Symbol">:</a> <a id="4538" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="4542" href="IO.Base.html#691" class="Generalizable">a</a><a id="4543" class="Symbol">}</a> <a id="4545" class="Symbol">→</a> <a id="4547" class="Symbol">(</a><a id="4548" href="IO.Base.html#4532" class="Bound">A</a> <a id="4550" class="Symbol">→</a> <a id="4552" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="4555" class="Symbol">(</a><a id="4556" href="IO.Base.html#4532" class="Bound">A</a> <a id="4558" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4560" href="IO.Base.html#4534" class="Bound">B</a><a id="4561" class="Symbol">))</a> <a id="4564" class="Symbol">→</a> <a id="4566" href="IO.Base.html#4532" class="Bound">A</a> <a id="4568" class="Symbol">→</a> <a id="4570" href="IO.Base.html#1201" class="Datatype">IO</a> <a id="4573" href="IO.Base.html#4534" class="Bound">B</a>
<a id="4575" href="IO.Base.html#4519" class="Function">untilInj₂</a> <a id="4585" href="IO.Base.html#4585" class="Bound">f</a> <a id="4587" href="IO.Base.html#4587" class="Bound">x</a> <a id="4589" class="Symbol">=</a> <a id="4591" href="IO.Base.html#1294" class="InductiveConstructor">bind</a> <a id="4596" class="Symbol">(</a><a id="4597" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4599" href="IO.Base.html#4585" class="Bound">f</a> <a id="4601" href="IO.Base.html#4587" class="Bound">x</a><a id="4602" class="Symbol">)</a> <a id="4604" class="Symbol">λ</a> <a id="4606" class="Keyword">where</a>
  <a id="4614" class="Symbol">(</a><a id="4615" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4620" href="IO.Base.html#4620" class="Bound">x′</a><a id="4622" class="Symbol">)</a> <a id="4624" class="Symbol">→</a> <a id="4626" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4628" href="IO.Base.html#4519" class="Function">untilInj₂</a> <a id="4638" href="IO.Base.html#4585" class="Bound">f</a> <a id="4640" href="IO.Base.html#4620" class="Bound">x′</a>
  <a id="4645" class="Symbol">(</a><a id="4646" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="4651" href="IO.Base.html#4651" class="Bound">y</a><a id="4652" class="Symbol">)</a> <a id="4654" class="Symbol">→</a> <a id="4656" href="Agda.Builtin.Coinduction.html#229" class="CoinductiveConstructor Operator">♯</a> <a id="4658" href="IO.Base.html#1270" class="InductiveConstructor">pure</a> <a id="4663" href="IO.Base.html#4651" class="Bound">y</a>







<a id="4672" class="Comment">------------------------------------------------------------------------</a>
<a id="4745" class="Comment">-- DEPRECATIONS</a>

<a id="untilRight"></a><a id="4762" href="IO.Base.html#4762" class="Function">untilRight</a> <a id="4773" class="Symbol">=</a> <a id="4775" href="IO.Base.html#4519" class="Function">untilInj₂</a>
<a id="4785" class="Symbol">{-#</a> <a id="4789" class="Keyword">WARNING_ON_USAGE</a> <a id="4806" class="Pragma">untilRight</a>
<a id="4817" class="String">&quot;Warning: untilRight was deprecated in v2.1.
Please use untilInj₂ instead.&quot;</a>
<a id="4893" class="Symbol">#-}</a>
</pre></body></html>