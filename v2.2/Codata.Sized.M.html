<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Sized.M</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- M-types (the dual of W-types)</a>
<a id="139" class="Comment">------------------------------------------------------------------------</a>

<a id="213" class="Symbol">{-#</a> <a id="217" class="Keyword">OPTIONS</a> <a id="225" class="Pragma">--cubical-compatible</a> <a id="246" class="Pragma">--sized-types</a> <a id="260" class="Symbol">#-}</a>

<a id="265" class="Keyword">module</a> <a id="272" href="Codata.Sized.M.html" class="Module">Codata.Sized.M</a> <a id="287" class="Keyword">where</a>

<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Size.html" class="Module">Size</a>
<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Level.html" class="Module">Level</a>
<a id="329" class="Keyword">open</a> <a id="334" class="Keyword">import</a> <a id="341" href="Codata.Sized.Thunk.html" class="Module">Codata.Sized.Thunk</a> <a id="360" class="Keyword">using</a> <a id="366" class="Symbol">(</a><a id="367" href="Codata.Sized.Thunk.html#482" class="Record">Thunk</a><a id="372" class="Symbol">;</a> <a id="374" href="Codata.Sized.Thunk.html#556" class="Field">force</a><a id="379" class="Symbol">)</a>
<a id="381" class="Keyword">open</a> <a id="386" class="Keyword">import</a> <a id="393" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="411" class="Keyword">hiding</a> <a id="418" class="Symbol">(</a><a id="419" href="Data.Product.Base.html#2173" class="Function">map</a><a id="422" class="Symbol">)</a>
<a id="424" class="Keyword">open</a> <a id="429" class="Keyword">import</a> <a id="436" href="Data.Container.Core.html" class="Module">Data.Container.Core</a> <a id="456" class="Symbol">as</a> <a id="459" class="Module">C</a> <a id="461" class="Keyword">hiding</a> <a id="468" class="Symbol">(</a><a id="469" href="Data.Container.Core.html#888" class="Function">map</a><a id="472" class="Symbol">)</a>

<a id="475" class="Keyword">data</a> <a id="M"></a><a id="480" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="482" class="Symbol">{</a><a id="483" href="Codata.Sized.M.html#483" class="Bound">s</a> <a id="485" href="Codata.Sized.M.html#485" class="Bound">p</a><a id="486" class="Symbol">}</a> <a id="488" class="Symbol">(</a><a id="489" href="Codata.Sized.M.html#489" class="Bound">C</a> <a id="491" class="Symbol">:</a> <a id="493" href="Data.Container.Core.html#566" class="Record">Container</a> <a id="503" href="Codata.Sized.M.html#483" class="Bound">s</a> <a id="505" href="Codata.Sized.M.html#485" class="Bound">p</a><a id="506" class="Symbol">)</a> <a id="508" class="Symbol">(</a><a id="509" href="Codata.Sized.M.html#509" class="Bound">i</a> <a id="511" class="Symbol">:</a> <a id="513" href="Agda.Builtin.Size.html#213" class="Postulate">Size</a><a id="517" class="Symbol">)</a> <a id="519" class="Symbol">:</a> <a id="521" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="525" class="Symbol">(</a><a id="526" href="Codata.Sized.M.html#483" class="Bound">s</a> <a id="528" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="530" href="Codata.Sized.M.html#485" class="Bound">p</a><a id="531" class="Symbol">)</a> <a id="533" class="Keyword">where</a>
  <a id="M.inf"></a><a id="541" href="Codata.Sized.M.html#541" class="InductiveConstructor">inf</a> <a id="545" class="Symbol">:</a> <a id="547" href="Data.Container.Core.html#763" class="Function Operator">⟦</a> <a id="549" href="Codata.Sized.M.html#489" class="Bound">C</a> <a id="551" href="Data.Container.Core.html#763" class="Function Operator">⟧</a> <a id="553" class="Symbol">(</a><a id="554" href="Codata.Sized.Thunk.html#482" class="Record">Thunk</a> <a id="560" class="Symbol">(</a><a id="561" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="563" href="Codata.Sized.M.html#489" class="Bound">C</a><a id="564" class="Symbol">)</a> <a id="566" href="Codata.Sized.M.html#509" class="Bound">i</a><a id="567" class="Symbol">)</a> <a id="569" class="Symbol">→</a> <a id="571" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="573" href="Codata.Sized.M.html#489" class="Bound">C</a> <a id="575" href="Codata.Sized.M.html#509" class="Bound">i</a>

<a id="578" class="Keyword">module</a> <a id="585" href="Codata.Sized.M.html#585" class="Module">_</a> <a id="587" class="Symbol">{</a><a id="588" href="Codata.Sized.M.html#588" class="Bound">s</a> <a id="590" href="Codata.Sized.M.html#590" class="Bound">p</a><a id="591" class="Symbol">}</a> <a id="593" class="Symbol">{</a><a id="594" href="Codata.Sized.M.html#594" class="Bound">C</a> <a id="596" class="Symbol">:</a> <a id="598" href="Data.Container.Core.html#566" class="Record">Container</a> <a id="608" href="Codata.Sized.M.html#588" class="Bound">s</a> <a id="610" href="Codata.Sized.M.html#590" class="Bound">p</a><a id="611" class="Symbol">}</a> <a id="613" class="Keyword">where</a>

  <a id="622" href="Codata.Sized.M.html#622" class="Function">head</a> <a id="627" class="Symbol">:</a> <a id="629" class="Symbol">∀</a> <a id="631" class="Symbol">{</a><a id="632" href="Codata.Sized.M.html#632" class="Bound">i</a><a id="633" class="Symbol">}</a> <a id="635" class="Symbol">→</a> <a id="637" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="639" href="Codata.Sized.M.html#594" class="Bound">C</a> <a id="641" href="Codata.Sized.M.html#632" class="Bound">i</a> <a id="643" class="Symbol">→</a> <a id="645" href="Data.Container.Core.html#646" class="Field">Shape</a> <a id="651" href="Codata.Sized.M.html#594" class="Bound">C</a>
  <a id="655" href="Codata.Sized.M.html#622" class="Function">head</a> <a id="660" class="Symbol">(</a><a id="661" href="Codata.Sized.M.html#541" class="InductiveConstructor">inf</a> <a id="665" class="Symbol">(</a><a id="666" href="Codata.Sized.M.html#666" class="Bound">x</a> <a id="668" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="670" href="Codata.Sized.M.html#670" class="Bound">f</a><a id="671" class="Symbol">))</a> <a id="674" class="Symbol">=</a> <a id="676" href="Codata.Sized.M.html#666" class="Bound">x</a>

  <a id="681" href="Codata.Sized.M.html#681" class="Function">tail</a> <a id="686" class="Symbol">:</a> <a id="688" class="Symbol">(</a><a id="689" href="Codata.Sized.M.html#689" class="Bound">x</a> <a id="691" class="Symbol">:</a> <a id="693" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="695" href="Codata.Sized.M.html#594" class="Bound">C</a> <a id="697" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a><a id="698" class="Symbol">)</a> <a id="700" class="Symbol">→</a> <a id="702" href="Data.Container.Core.html#667" class="Field">Position</a> <a id="711" href="Codata.Sized.M.html#594" class="Bound">C</a> <a id="713" class="Symbol">(</a><a id="714" href="Codata.Sized.M.html#622" class="Function">head</a> <a id="719" href="Codata.Sized.M.html#689" class="Bound">x</a><a id="720" class="Symbol">)</a> <a id="722" class="Symbol">→</a> <a id="724" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="726" href="Codata.Sized.M.html#594" class="Bound">C</a> <a id="728" href="Agda.Builtin.Size.html#315" class="Postulate">∞</a>
  <a id="732" href="Codata.Sized.M.html#681" class="Function">tail</a> <a id="737" class="Symbol">(</a><a id="738" href="Codata.Sized.M.html#541" class="InductiveConstructor">inf</a> <a id="742" class="Symbol">(</a><a id="743" href="Codata.Sized.M.html#743" class="Bound">x</a> <a id="745" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="747" href="Codata.Sized.M.html#747" class="Bound">f</a><a id="748" class="Symbol">))</a> <a id="751" class="Symbol">=</a> <a id="753" class="Symbol">λ</a> <a id="755" href="Codata.Sized.M.html#755" class="Bound">p</a> <a id="757" class="Symbol">→</a> <a id="759" href="Codata.Sized.M.html#747" class="Bound">f</a> <a id="761" href="Codata.Sized.M.html#755" class="Bound">p</a> <a id="763" class="Symbol">.</a><a id="764" href="Codata.Sized.Thunk.html#556" class="Field">force</a>

<a id="771" class="Comment">-- map</a>

<a id="779" class="Keyword">module</a> <a id="786" href="Codata.Sized.M.html#786" class="Module">_</a> <a id="788" class="Symbol">{</a><a id="789" href="Codata.Sized.M.html#789" class="Bound">s₁</a> <a id="792" href="Codata.Sized.M.html#792" class="Bound">s₂</a> <a id="795" href="Codata.Sized.M.html#795" class="Bound">p₁</a> <a id="798" href="Codata.Sized.M.html#798" class="Bound">p₂</a><a id="800" class="Symbol">}</a> <a id="802" class="Symbol">{</a><a id="803" href="Codata.Sized.M.html#803" class="Bound">C₁</a> <a id="806" class="Symbol">:</a> <a id="808" href="Data.Container.Core.html#566" class="Record">Container</a> <a id="818" href="Codata.Sized.M.html#789" class="Bound">s₁</a> <a id="821" href="Codata.Sized.M.html#795" class="Bound">p₁</a><a id="823" class="Symbol">}</a> <a id="825" class="Symbol">{</a><a id="826" href="Codata.Sized.M.html#826" class="Bound">C₂</a> <a id="829" class="Symbol">:</a> <a id="831" href="Data.Container.Core.html#566" class="Record">Container</a> <a id="841" href="Codata.Sized.M.html#792" class="Bound">s₂</a> <a id="844" href="Codata.Sized.M.html#798" class="Bound">p₂</a><a id="846" class="Symbol">}</a>
         <a id="857" class="Symbol">(</a><a id="858" href="Codata.Sized.M.html#858" class="Bound">m</a> <a id="860" class="Symbol">:</a> <a id="862" href="Codata.Sized.M.html#803" class="Bound">C₁</a> <a id="865" href="Data.Container.Core.html#1083" class="Record Operator">⇒</a> <a id="867" href="Codata.Sized.M.html#826" class="Bound">C₂</a><a id="869" class="Symbol">)</a> <a id="871" class="Keyword">where</a>

  <a id="880" href="Codata.Sized.M.html#880" class="Function">map</a> <a id="884" class="Symbol">:</a> <a id="886" class="Symbol">∀</a> <a id="888" class="Symbol">{</a><a id="889" href="Codata.Sized.M.html#889" class="Bound">i</a><a id="890" class="Symbol">}</a> <a id="892" class="Symbol">→</a> <a id="894" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="896" href="Codata.Sized.M.html#803" class="Bound">C₁</a> <a id="899" href="Codata.Sized.M.html#889" class="Bound">i</a> <a id="901" class="Symbol">→</a> <a id="903" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="905" href="Codata.Sized.M.html#826" class="Bound">C₂</a> <a id="908" href="Codata.Sized.M.html#889" class="Bound">i</a>
  <a id="912" href="Codata.Sized.M.html#880" class="Function">map</a> <a id="916" class="Symbol">(</a><a id="917" href="Codata.Sized.M.html#541" class="InductiveConstructor">inf</a> <a id="921" href="Codata.Sized.M.html#921" class="Bound">t</a><a id="922" class="Symbol">)</a> <a id="924" class="Symbol">=</a> <a id="926" href="Codata.Sized.M.html#541" class="InductiveConstructor">inf</a> <a id="930" class="Symbol">(</a><a id="931" href="Data.Container.Core.html#1315" class="Function Operator">⟪</a> <a id="933" href="Codata.Sized.M.html#858" class="Bound">m</a> <a id="935" href="Data.Container.Core.html#1315" class="Function Operator">⟫</a> <a id="937" class="Symbol">(</a><a id="938" href="Data.Container.Core.html#888" class="Function">C.map</a> <a id="944" class="Symbol">(λ</a> <a id="947" href="Codata.Sized.M.html#947" class="Bound">t</a> <a id="949" class="Symbol">→</a> <a id="951" class="Symbol">λ</a> <a id="953" class="Keyword">where</a> <a id="959" class="Symbol">.</a><a id="960" href="Codata.Sized.Thunk.html#556" class="Field">force</a> <a id="966" class="Symbol">→</a> <a id="968" href="Codata.Sized.M.html#880" class="Function">map</a> <a id="972" class="Symbol">(</a><a id="973" href="Codata.Sized.M.html#947" class="Bound">t</a> <a id="975" class="Symbol">.</a><a id="976" href="Codata.Sized.Thunk.html#556" class="Field">force</a><a id="981" class="Symbol">))</a> <a id="984" href="Codata.Sized.M.html#921" class="Bound">t</a><a id="985" class="Symbol">))</a>

<a id="989" class="Comment">-- unfold</a>

<a id="1000" class="Keyword">module</a> <a id="1007" href="Codata.Sized.M.html#1007" class="Module">_</a> <a id="1009" class="Symbol">{</a><a id="1010" href="Codata.Sized.M.html#1010" class="Bound">s</a> <a id="1012" href="Codata.Sized.M.html#1012" class="Bound">p</a> <a id="1014" href="Codata.Sized.M.html#1014" class="Bound">ℓ</a><a id="1015" class="Symbol">}</a> <a id="1017" class="Symbol">{</a><a id="1018" href="Codata.Sized.M.html#1018" class="Bound">C</a> <a id="1020" class="Symbol">:</a> <a id="1022" href="Data.Container.Core.html#566" class="Record">Container</a> <a id="1032" href="Codata.Sized.M.html#1010" class="Bound">s</a> <a id="1034" href="Codata.Sized.M.html#1012" class="Bound">p</a><a id="1035" class="Symbol">}</a> <a id="1037" class="Symbol">(</a><a id="1038" class="Keyword">open</a> <a id="1043" href="Data.Container.Core.html#566" class="Module">Container</a> <a id="1053" href="Codata.Sized.M.html#1018" class="Bound">C</a><a id="1054" class="Symbol">)</a>
         <a id="1065" class="Symbol">{</a><a id="1066" href="Codata.Sized.M.html#1066" class="Bound">S</a> <a id="1068" class="Symbol">:</a> <a id="1070" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1074" href="Codata.Sized.M.html#1014" class="Bound">ℓ</a><a id="1075" class="Symbol">}</a> <a id="1077" class="Symbol">(</a><a id="1078" href="Codata.Sized.M.html#1078" class="Bound">alg</a> <a id="1082" class="Symbol">:</a> <a id="1084" href="Codata.Sized.M.html#1066" class="Bound">S</a> <a id="1086" class="Symbol">→</a> <a id="1088" href="Data.Container.Core.html#763" class="Function Operator">⟦</a> <a id="1090" href="Codata.Sized.M.html#1018" class="Bound">C</a> <a id="1092" href="Data.Container.Core.html#763" class="Function Operator">⟧</a> <a id="1094" href="Codata.Sized.M.html#1066" class="Bound">S</a><a id="1095" class="Symbol">)</a> <a id="1097" class="Keyword">where</a>

  <a id="1106" href="Codata.Sized.M.html#1106" class="Function">unfold</a> <a id="1113" class="Symbol">:</a> <a id="1115" href="Codata.Sized.M.html#1066" class="Bound">S</a> <a id="1117" class="Symbol">→</a> <a id="1119" class="Symbol">∀</a> <a id="1121" class="Symbol">{</a><a id="1122" href="Codata.Sized.M.html#1122" class="Bound">i</a><a id="1123" class="Symbol">}</a> <a id="1125" class="Symbol">→</a> <a id="1127" href="Codata.Sized.M.html#480" class="Datatype">M</a> <a id="1129" href="Codata.Sized.M.html#1018" class="Bound">C</a> <a id="1131" href="Codata.Sized.M.html#1122" class="Bound">i</a>
  <a id="1135" href="Codata.Sized.M.html#1106" class="Function">unfold</a> <a id="1142" href="Codata.Sized.M.html#1142" class="Bound">seed</a> <a id="1147" class="Symbol">=</a> <a id="1149" class="Keyword">let</a> <a id="1153" class="Symbol">(</a><a id="1154" href="Codata.Sized.M.html#1154" class="Bound">x</a> <a id="1156" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1158" href="Codata.Sized.M.html#1158" class="Bound">next</a><a id="1162" class="Symbol">)</a> <a id="1164" class="Symbol">=</a> <a id="1166" href="Codata.Sized.M.html#1078" class="Bound">alg</a> <a id="1170" href="Codata.Sized.M.html#1142" class="Bound">seed</a> <a id="1175" class="Keyword">in</a>
                <a id="1194" href="Codata.Sized.M.html#541" class="InductiveConstructor">inf</a> <a id="1198" class="Symbol">(</a><a id="1199" href="Codata.Sized.M.html#1154" class="Bound">x</a> <a id="1201" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1203" class="Symbol">λ</a> <a id="1205" href="Codata.Sized.M.html#1205" class="Bound">p</a> <a id="1207" class="Symbol">→</a> <a id="1209" class="Symbol">λ</a> <a id="1211" class="Keyword">where</a> <a id="1217" class="Symbol">.</a><a id="1218" href="Codata.Sized.Thunk.html#556" class="Field">force</a> <a id="1224" class="Symbol">→</a> <a id="1226" href="Codata.Sized.M.html#1106" class="Function">unfold</a> <a id="1233" class="Symbol">(</a><a id="1234" href="Codata.Sized.M.html#1158" class="Bound">next</a> <a id="1239" href="Codata.Sized.M.html#1205" class="Bound">p</a><a id="1240" class="Symbol">))</a>
</pre></body></html>