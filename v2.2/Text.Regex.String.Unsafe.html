<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Text.Regex.String.Unsafe</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Regular expressions acting on strings, using unsafe features</a>
<a id="170" class="Comment">------------------------------------------------------------------------</a>

<a id="244" class="Symbol">{-#</a> <a id="248" class="Keyword">OPTIONS</a> <a id="256" class="Pragma">--with-K</a> <a id="265" class="Symbol">#-}</a>

<a id="270" class="Keyword">module</a> <a id="277" href="Text.Regex.String.Unsafe.html" class="Module">Text.Regex.String.Unsafe</a> <a id="302" class="Keyword">where</a>

<a id="309" class="Keyword">open</a> <a id="314" class="Keyword">import</a> <a id="321" href="Data.String.Base.html" class="Module">Data.String.Base</a> <a id="338" class="Keyword">using</a> <a id="344" class="Symbol">(</a><a id="345" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="351" class="Symbol">;</a> <a id="353" href="Data.String.Base.html#1558" class="Primitive">toList</a><a id="359" class="Symbol">;</a> <a id="361" href="Data.String.Base.html#1591" class="Primitive">fromList</a><a id="369" class="Symbol">)</a>
<a id="371" class="Keyword">import</a> <a id="378" href="Data.String.Unsafe.html" class="Module">Data.String.Unsafe</a> <a id="397" class="Symbol">as</a> <a id="400" class="Module">Stringₚ</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Function.Base.html" class="Module">Function.Base</a> <a id="434" class="Keyword">using</a> <a id="440" class="Symbol">(</a><a id="441" href="Function.Base.html#6209" class="Function Operator">_on_</a><a id="445" class="Symbol">;</a> <a id="447" href="Function.Base.html#704" class="Function">id</a><a id="449" class="Symbol">)</a>
<a id="451" class="Keyword">open</a> <a id="456" class="Keyword">import</a> <a id="463" href="Level.html" class="Module">Level</a> <a id="469" class="Keyword">using</a> <a id="475" class="Symbol">(</a><a id="476" href="Level.html#521" class="Function">0ℓ</a><a id="478" class="Symbol">)</a>
<a id="480" class="Keyword">open</a> <a id="485" class="Keyword">import</a> <a id="492" href="Relation.Binary.Core.html" class="Module">Relation.Binary.Core</a> <a id="513" class="Keyword">using</a> <a id="519" class="Symbol">(</a><a id="520" href="Relation.Binary.Core.html#896" class="Function">Rel</a><a id="523" class="Symbol">)</a>
<a id="525" class="Keyword">open</a> <a id="530" class="Keyword">import</a> <a id="537" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a> <a id="565" class="Keyword">using</a> <a id="571" class="Symbol">(</a><a id="572" href="Relation.Binary.Definitions.html#6713" class="Function">Decidable</a><a id="581" class="Symbol">)</a>
<a id="583" class="Keyword">open</a> <a id="588" class="Keyword">import</a> <a id="595" href="Relation.Binary.PropositionalEquality.Core.html" class="Module">Relation.Binary.PropositionalEquality.Core</a> <a id="638" class="Keyword">using</a> <a id="644" class="Symbol">(</a><a id="645" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="648" class="Symbol">;</a> <a id="650" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a><a id="653" class="Symbol">;</a> <a id="655" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a><a id="660" class="Symbol">)</a>
<a id="662" class="Keyword">open</a> <a id="667" class="Keyword">import</a> <a id="674" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="701" class="Keyword">using</a> <a id="707" class="Symbol">(</a><a id="708" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">map′</a><a id="712" class="Symbol">)</a>

<a id="715" class="Comment">------------------------------------------------------------------------</a>
<a id="788" class="Comment">-- Re-exporting safe definitions</a>

<a id="822" class="Keyword">open</a> <a id="827" class="Keyword">import</a> <a id="834" href="Text.Regex.String.html" class="Module">Text.Regex.String</a> <a id="852" class="Symbol">as</a> <a id="855" class="Module">Regex</a> <a id="861" class="Keyword">public</a>
  <a id="870" class="Keyword">hiding</a> <a id="877" class="Symbol">(</a><a id="878" href="Text.Regex.Base.html#2231" class="Datatype Operator">_∈_</a><a id="881" class="Symbol">;</a> <a id="883" href="Text.Regex.Base.html#2752" class="Function Operator">_∉_</a><a id="886" class="Symbol">;</a> <a id="888" href="Text.Regex.Derivative.Brzozowski.html#4569" class="Function Operator">_∈?_</a><a id="892" class="Symbol">;</a> <a id="894" href="Text.Regex.Derivative.Brzozowski.html#4686" class="Function Operator">_∉?_</a><a id="898" class="Symbol">;</a> <a id="900" href="Text.Regex.Search.html#1923" class="Function">Span</a><a id="904" class="Symbol">;</a> <a id="906" href="Text.Regex.Search.html#2562" class="Record">Match</a><a id="911" class="Symbol">;</a> <a id="913" href="Text.Regex.Search.html#9374" class="Function">search</a><a id="919" class="Symbol">)</a>

<a id="922" class="Comment">------------------------------------------------------------------------</a>
<a id="995" class="Comment">-- Specialised definitions</a>

<a id="1023" class="Keyword">infix</a> <a id="1029" class="Number">4</a> <a id="1031" href="Text.Regex.String.Unsafe.html#1050" class="Function Operator">_∈_</a> <a id="1035" href="Text.Regex.String.Unsafe.html#1107" class="Function Operator">_∉_</a> <a id="1039" href="Text.Regex.String.Unsafe.html#1164" class="Function Operator">_∈?_</a> <a id="1044" href="Text.Regex.String.Unsafe.html#1219" class="Function Operator">_∉?_</a>

<a id="_∈_"></a><a id="1050" href="Text.Regex.String.Unsafe.html#1050" class="Function Operator">_∈_</a> <a id="1054" class="Symbol">:</a> <a id="1056" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1063" class="Symbol">→</a> <a id="1065" href="Text.Regex.Base.html#1121" class="Datatype">Exp</a> <a id="1069" class="Symbol">→</a> <a id="1071" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1075" href="Text.Regex.String.Unsafe.html#1075" class="Bound">str</a> <a id="1079" href="Text.Regex.String.Unsafe.html#1050" class="Function Operator">∈</a> <a id="1081" href="Text.Regex.String.Unsafe.html#1081" class="Bound">e</a> <a id="1083" class="Symbol">=</a> <a id="1085" href="Data.String.Base.html#1558" class="Primitive">toList</a> <a id="1092" href="Text.Regex.String.Unsafe.html#1075" class="Bound">str</a> <a id="1096" href="Text.Regex.Base.html#2231" class="Datatype Operator">Regex.∈</a> <a id="1104" href="Text.Regex.String.Unsafe.html#1081" class="Bound">e</a>

<a id="_∉_"></a><a id="1107" href="Text.Regex.String.Unsafe.html#1107" class="Function Operator">_∉_</a> <a id="1111" class="Symbol">:</a> <a id="1113" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1120" class="Symbol">→</a> <a id="1122" href="Text.Regex.Base.html#1121" class="Datatype">Exp</a> <a id="1126" class="Symbol">→</a> <a id="1128" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1132" href="Text.Regex.String.Unsafe.html#1132" class="Bound">str</a> <a id="1136" href="Text.Regex.String.Unsafe.html#1107" class="Function Operator">∉</a> <a id="1138" href="Text.Regex.String.Unsafe.html#1138" class="Bound">e</a> <a id="1140" class="Symbol">=</a> <a id="1142" href="Data.String.Base.html#1558" class="Primitive">toList</a> <a id="1149" href="Text.Regex.String.Unsafe.html#1132" class="Bound">str</a> <a id="1153" href="Text.Regex.Base.html#2752" class="Function Operator">Regex.∉</a> <a id="1161" href="Text.Regex.String.Unsafe.html#1138" class="Bound">e</a>

<a id="_∈?_"></a><a id="1164" href="Text.Regex.String.Unsafe.html#1164" class="Function Operator">_∈?_</a> <a id="1169" class="Symbol">:</a> <a id="1171" href="Relation.Binary.Definitions.html#6713" class="Function">Decidable</a> <a id="1181" href="Text.Regex.String.Unsafe.html#1050" class="Function Operator">_∈_</a>
<a id="1185" href="Text.Regex.String.Unsafe.html#1185" class="Bound">str</a> <a id="1189" href="Text.Regex.String.Unsafe.html#1164" class="Function Operator">∈?</a> <a id="1192" href="Text.Regex.String.Unsafe.html#1192" class="Bound">e</a> <a id="1194" class="Symbol">=</a> <a id="1196" href="Data.String.Base.html#1558" class="Primitive">toList</a> <a id="1203" href="Text.Regex.String.Unsafe.html#1185" class="Bound">str</a> <a id="1207" href="Text.Regex.Derivative.Brzozowski.html#4569" class="Function Operator">Regex.∈?</a> <a id="1216" href="Text.Regex.String.Unsafe.html#1192" class="Bound">e</a>

<a id="_∉?_"></a><a id="1219" href="Text.Regex.String.Unsafe.html#1219" class="Function Operator">_∉?_</a> <a id="1224" class="Symbol">:</a> <a id="1226" href="Relation.Binary.Definitions.html#6713" class="Function">Decidable</a> <a id="1236" href="Text.Regex.String.Unsafe.html#1107" class="Function Operator">_∉_</a>
<a id="1240" href="Text.Regex.String.Unsafe.html#1240" class="Bound">str</a> <a id="1244" href="Text.Regex.String.Unsafe.html#1219" class="Function Operator">∉?</a> <a id="1247" href="Text.Regex.String.Unsafe.html#1247" class="Bound">e</a> <a id="1249" class="Symbol">=</a> <a id="1251" href="Data.String.Base.html#1558" class="Primitive">toList</a> <a id="1258" href="Text.Regex.String.Unsafe.html#1240" class="Bound">str</a> <a id="1262" href="Text.Regex.Derivative.Brzozowski.html#4686" class="Function Operator">Regex.∉?</a> <a id="1271" href="Text.Regex.String.Unsafe.html#1247" class="Bound">e</a>

<a id="Span"></a><a id="1274" href="Text.Regex.String.Unsafe.html#1274" class="Function">Span</a> <a id="1279" class="Symbol">:</a> <a id="1281" href="Text.Regex.Base.html#1457" class="Record">Regex</a> <a id="1287" class="Symbol">→</a> <a id="1289" href="Relation.Binary.Core.html#896" class="Function">Rel</a> <a id="1293" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1300" href="Level.html#521" class="Function">0ℓ</a>
<a id="1303" href="Text.Regex.String.Unsafe.html#1274" class="Function">Span</a> <a id="1308" href="Text.Regex.String.Unsafe.html#1308" class="Bound">e</a> <a id="1310" class="Symbol">=</a> <a id="1312" href="Text.Regex.Search.html#1923" class="Function">Regex.Span</a> <a id="1323" href="Text.Regex.String.Unsafe.html#1308" class="Bound">e</a> <a id="1325" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a> <a id="1329" href="Function.Base.html#6209" class="Function Operator">on</a> <a id="1332" href="Data.String.Base.html#1558" class="Primitive">toList</a>

<a id="1340" class="Comment">-- A match is a string, a proof it matches the regular expression,</a>
<a id="1407" class="Comment">-- and a proof it appears as the right sort of substring.</a>
<a id="1465" class="Keyword">record</a> <a id="Match"></a><a id="1472" href="Text.Regex.String.Unsafe.html#1472" class="Record">Match</a> <a id="1478" class="Symbol">(</a><a id="1479" href="Text.Regex.String.Unsafe.html#1479" class="Bound">str</a> <a id="1483" class="Symbol">:</a> <a id="1485" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1491" class="Symbol">)</a> <a id="1493" class="Symbol">(</a><a id="1494" href="Text.Regex.String.Unsafe.html#1494" class="Bound">e</a> <a id="1496" class="Symbol">:</a> <a id="1498" href="Text.Regex.Base.html#1457" class="Record">Regex</a><a id="1503" class="Symbol">)</a> <a id="1505" class="Symbol">:</a> <a id="1507" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1511" class="Keyword">where</a>
  <a id="1519" class="Keyword">constructor</a> <a id="mkMatch"></a><a id="1531" href="Text.Regex.String.Unsafe.html#1531" class="InductiveConstructor">mkMatch</a>
  <a id="1541" class="Keyword">field</a>
    <a id="Match.string"></a><a id="1551" href="Text.Regex.String.Unsafe.html#1551" class="Field">string</a>  <a id="1559" class="Symbol">:</a> <a id="1561" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
    <a id="Match.match"></a><a id="1572" href="Text.Regex.String.Unsafe.html#1572" class="Field">match</a>   <a id="1580" class="Symbol">:</a> <a id="1582" href="Text.Regex.String.Unsafe.html#1551" class="Field">string</a> <a id="1589" href="Text.Regex.String.Unsafe.html#1050" class="Function Operator">∈</a> <a id="1591" href="Text.Regex.Base.html#1533" class="Field">Regex.expression</a> <a id="1608" href="Text.Regex.String.Unsafe.html#1494" class="Bound">e</a>
    <a id="Match.related"></a><a id="1614" href="Text.Regex.String.Unsafe.html#1614" class="Field">related</a> <a id="1622" class="Symbol">:</a> <a id="1624" href="Text.Regex.String.Unsafe.html#1274" class="Function">Span</a> <a id="1629" href="Text.Regex.String.Unsafe.html#1494" class="Bound">e</a> <a id="1631" href="Text.Regex.String.Unsafe.html#1551" class="Field">string</a> <a id="1638" href="Text.Regex.String.Unsafe.html#1479" class="Bound">str</a>
<a id="1642" class="Keyword">open</a> <a id="1647" href="Text.Regex.String.Unsafe.html#1472" class="Module">Match</a> <a id="1653" class="Keyword">public</a>

<a id="search"></a><a id="1661" href="Text.Regex.String.Unsafe.html#1661" class="Function">search</a> <a id="1668" class="Symbol">:</a> <a id="1670" href="Relation.Binary.Definitions.html#6713" class="Function">Decidable</a> <a id="1680" href="Text.Regex.String.Unsafe.html#1472" class="Record">Match</a>
<a id="1686" href="Text.Regex.String.Unsafe.html#1661" class="Function">search</a> <a id="1693" href="Text.Regex.String.Unsafe.html#1693" class="Bound">str</a> <a id="1697" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a> <a id="1699" class="Symbol">=</a> <a id="1701" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">map′</a> <a id="1706" href="Text.Regex.String.Unsafe.html#1795" class="Function">from</a> <a id="1711" href="Text.Regex.String.Unsafe.html#2095" class="Function">to</a> <a id="1714" class="Symbol">(</a><a id="1715" href="Text.Regex.Search.html#9374" class="Function">Regex.search</a> <a id="1728" href="Text.Regex.String.Unsafe.html#1746" class="Function">input</a> <a id="1734" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a><a id="1735" class="Symbol">)</a> <a id="1737" class="Keyword">where</a>

  <a id="1746" href="Text.Regex.String.Unsafe.html#1746" class="Function">input</a> <a id="1752" class="Symbol">=</a> <a id="1754" href="Data.String.Base.html#1558" class="Primitive">toList</a> <a id="1761" href="Text.Regex.String.Unsafe.html#1693" class="Bound">str</a>
  <a id="1767" href="Text.Regex.String.Unsafe.html#1767" class="Function">exp</a> <a id="1771" class="Symbol">=</a> <a id="1773" href="Text.Regex.Base.html#1533" class="Field">Regex.expression</a> <a id="1790" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a>

  <a id="1795" href="Text.Regex.String.Unsafe.html#1795" class="Function">from</a> <a id="1800" class="Symbol">:</a> <a id="1802" href="Text.Regex.Search.html#2562" class="Record">Regex.Match</a> <a id="1814" class="Symbol">(</a><a id="1815" href="Text.Regex.Search.html#1923" class="Function">Regex.Span</a> <a id="1826" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a> <a id="1828" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="1831" class="Symbol">)</a> <a id="1833" href="Text.Regex.String.Unsafe.html#1746" class="Function">input</a> <a id="1839" href="Text.Regex.String.Unsafe.html#1767" class="Function">exp</a> <a id="1843" class="Symbol">→</a> <a id="1845" href="Text.Regex.String.Unsafe.html#1472" class="Record">Match</a> <a id="1851" href="Text.Regex.String.Unsafe.html#1693" class="Bound">str</a> <a id="1855" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a>
  <a id="1859" href="Text.Regex.String.Unsafe.html#1795" class="Function">from</a> <a id="1864" class="Symbol">(</a><a id="1865" href="Text.Regex.Search.html#2668" class="InductiveConstructor">Regex.mkMatch</a> <a id="1879" href="Text.Regex.String.Unsafe.html#1879" class="Bound">list</a> <a id="1884" href="Text.Regex.String.Unsafe.html#1884" class="Bound">match</a> <a id="1890" href="Text.Regex.String.Unsafe.html#1890" class="Bound">related</a><a id="1897" class="Symbol">)</a> <a id="1899" class="Symbol">=</a>
    <a id="1905" class="Keyword">let</a> <a id="1909" href="Text.Regex.String.Unsafe.html#1909" class="Bound">eq</a> <a id="1912" class="Symbol">=</a> <a id="1914" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="1918" class="Symbol">(</a><a id="1919" href="Data.String.Unsafe.html#1088" class="Function">Stringₚ.toList∘fromList</a> <a id="1943" href="Text.Regex.String.Unsafe.html#1879" class="Bound">list</a><a id="1947" class="Symbol">)</a> <a id="1949" class="Keyword">in</a>
    <a id="1956" href="Text.Regex.String.Unsafe.html#1531" class="InductiveConstructor">mkMatch</a> <a id="1964" class="Symbol">(</a><a id="1965" href="Data.String.Base.html#1591" class="Primitive">fromList</a> <a id="1974" href="Text.Regex.String.Unsafe.html#1879" class="Bound">list</a><a id="1978" class="Symbol">)</a>
            <a id="1992" class="Symbol">(</a><a id="1993" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="1999" class="Symbol">(</a><a id="2000" href="Text.Regex.Base.html#2231" class="Datatype Operator">Regex._∈</a> <a id="2009" href="Text.Regex.String.Unsafe.html#1767" class="Function">exp</a><a id="2012" class="Symbol">)</a> <a id="2014" href="Text.Regex.String.Unsafe.html#1909" class="Bound">eq</a> <a id="2017" href="Text.Regex.String.Unsafe.html#1884" class="Bound">match</a><a id="2022" class="Symbol">)</a>
            <a id="2036" class="Symbol">(</a><a id="2037" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="2043" class="Symbol">(λ</a> <a id="2046" href="Text.Regex.String.Unsafe.html#2046" class="Bound">str</a> <a id="2050" class="Symbol">→</a> <a id="2052" href="Text.Regex.Search.html#1923" class="Function">Regex.Span</a> <a id="2063" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a> <a id="2065" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a> <a id="2069" href="Text.Regex.String.Unsafe.html#2046" class="Bound">str</a> <a id="2073" href="Text.Regex.String.Unsafe.html#1746" class="Function">input</a><a id="2078" class="Symbol">)</a> <a id="2080" href="Text.Regex.String.Unsafe.html#1909" class="Bound">eq</a> <a id="2083" href="Text.Regex.String.Unsafe.html#1890" class="Bound">related</a><a id="2090" class="Symbol">)</a>

  <a id="2095" href="Text.Regex.String.Unsafe.html#2095" class="Function">to</a> <a id="2098" class="Symbol">:</a> <a id="2100" href="Text.Regex.String.Unsafe.html#1472" class="Record">Match</a> <a id="2106" href="Text.Regex.String.Unsafe.html#1693" class="Bound">str</a> <a id="2110" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a> <a id="2112" class="Symbol">→</a> <a id="2114" href="Text.Regex.Search.html#2562" class="Record">Regex.Match</a> <a id="2126" class="Symbol">(</a><a id="2127" href="Text.Regex.Search.html#1923" class="Function">Regex.Span</a> <a id="2138" href="Text.Regex.String.Unsafe.html#1697" class="Bound">e</a> <a id="2140" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2143" class="Symbol">)</a> <a id="2145" href="Text.Regex.String.Unsafe.html#1746" class="Function">input</a> <a id="2151" href="Text.Regex.String.Unsafe.html#1767" class="Function">exp</a>
  <a id="2157" href="Text.Regex.String.Unsafe.html#2095" class="Function">to</a> <a id="2160" class="Symbol">(</a><a id="2161" href="Text.Regex.String.Unsafe.html#1531" class="InductiveConstructor">mkMatch</a> <a id="2169" href="Text.Regex.String.Unsafe.html#2169" class="Bound">string</a> <a id="2176" href="Text.Regex.String.Unsafe.html#2176" class="Bound">match</a> <a id="2182" href="Text.Regex.String.Unsafe.html#2182" class="Bound">related</a><a id="2189" class="Symbol">)</a> <a id="2191" class="Symbol">=</a>
    <a id="2197" href="Text.Regex.Search.html#2668" class="InductiveConstructor">Regex.mkMatch</a> <a id="2211" class="Symbol">(</a><a id="2212" href="Data.String.Base.html#1558" class="Primitive">toList</a> <a id="2219" href="Text.Regex.String.Unsafe.html#2169" class="Bound">string</a><a id="2225" class="Symbol">)</a> <a id="2227" href="Text.Regex.String.Unsafe.html#2176" class="Bound">match</a> <a id="2233" href="Text.Regex.String.Unsafe.html#2182" class="Bound">related</a>
</pre></body></html>