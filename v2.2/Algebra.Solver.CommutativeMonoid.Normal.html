<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Algebra.Solver.CommutativeMonoid.Normal</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Normal forms in commutative monoids</a>
<a id="145" class="Comment">--</a>
<a id="148" class="Comment">-- Adapted from Algebra.Solver.Monoid.Normal</a>
<a id="193" class="Comment">------------------------------------------------------------------------</a>

<a id="267" class="Symbol">{-#</a> <a id="271" class="Keyword">OPTIONS</a> <a id="279" class="Pragma">--cubical-compatible</a> <a id="300" class="Pragma">--safe</a> <a id="307" class="Symbol">#-}</a>

<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Algebra.Bundles.html" class="Module">Algebra.Bundles</a> <a id="340" class="Keyword">using</a> <a id="346" class="Symbol">(</a><a id="347" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="364" class="Symbol">)</a>

<a id="367" class="Keyword">module</a> <a id="374" href="Algebra.Solver.CommutativeMonoid.Normal.html" class="Module">Algebra.Solver.CommutativeMonoid.Normal</a> <a id="414" class="Symbol">{</a><a id="415" href="Algebra.Solver.CommutativeMonoid.Normal.html#415" class="Bound">c</a> <a id="417" href="Algebra.Solver.CommutativeMonoid.Normal.html#417" class="Bound">ℓ</a><a id="418" class="Symbol">}</a> <a id="420" class="Symbol">(</a><a id="421" href="Algebra.Solver.CommutativeMonoid.Normal.html#421" class="Bound">M</a> <a id="423" class="Symbol">:</a> <a id="425" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a> <a id="443" href="Algebra.Solver.CommutativeMonoid.Normal.html#415" class="Bound">c</a> <a id="445" href="Algebra.Solver.CommutativeMonoid.Normal.html#417" class="Bound">ℓ</a><a id="446" class="Symbol">)</a> <a id="448" class="Keyword">where</a>

<a id="455" class="Keyword">import</a> <a id="462" href="Algebra.Properties.CommutativeSemigroup.html" class="Module">Algebra.Properties.CommutativeSemigroup</a> <a id="502" class="Symbol">as</a> <a id="505" class="Module">CSProperties</a>
<a id="518" class="Keyword">import</a> <a id="525" href="Algebra.Properties.Monoid.Mult.html" class="Module">Algebra.Properties.Monoid.Mult</a> <a id="556" class="Symbol">as</a> <a id="559" class="Module">MultProperties</a>
<a id="574" class="Keyword">open</a> <a id="579" class="Keyword">import</a> <a id="586" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="600" class="Keyword">using</a> <a id="606" class="Symbol">(</a><a id="607" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a><a id="610" class="Symbol">;</a> <a id="612" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a><a id="616" class="Symbol">;</a> <a id="618" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a><a id="621" class="Symbol">)</a>
<a id="623" class="Keyword">open</a> <a id="628" class="Keyword">import</a> <a id="635" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="644" class="Symbol">as</a> <a id="647" class="Module">ℕ</a> <a id="649" class="Keyword">using</a> <a id="655" class="Symbol">(</a><a id="656" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="657" class="Symbol">;</a> <a id="659" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="663" class="Symbol">;</a> <a id="665" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="668" class="Symbol">;</a> <a id="670" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="673" class="Symbol">)</a>
<a id="675" class="Keyword">open</a> <a id="680" class="Keyword">import</a> <a id="687" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="701" class="Keyword">using</a> <a id="707" class="Symbol">(</a><a id="708" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a><a id="711" class="Symbol">;</a> <a id="713" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a><a id="715" class="Symbol">;</a> <a id="717" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">_∷_</a><a id="720" class="Symbol">;</a> <a id="722" href="Data.Vec.Base.html#1676" class="Function">lookup</a><a id="728" class="Symbol">;</a> <a id="730" href="Data.Vec.Base.html#6493" class="Function">replicate</a><a id="739" class="Symbol">;</a> <a id="741" href="Data.Vec.Base.html#3745" class="Function">zipWith</a><a id="748" class="Symbol">)</a>
<a id="750" class="Keyword">import</a> <a id="757" href="Data.Vec.Relation.Binary.Pointwise.Inductive.html" class="Module">Data.Vec.Relation.Binary.Pointwise.Inductive</a> <a id="802" class="Symbol">as</a> <a id="805" class="Module">Pointwise</a>
<a id="815" class="Keyword">open</a> <a id="820" class="Keyword">import</a> <a id="827" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a> <a id="855" class="Keyword">using</a> <a id="861" class="Symbol">(</a><a id="862" href="Relation.Binary.Definitions.html#6834" class="Function">DecidableEquality</a><a id="879" class="Symbol">)</a>
<a id="881" class="Keyword">import</a> <a id="888" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="921" class="Symbol">as</a> <a id="924" class="Module">≈-Reasoning</a>
<a id="936" class="Keyword">import</a> <a id="943" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="970" class="Symbol">as</a> <a id="973" class="Module">Dec</a>

<a id="978" class="Keyword">open</a> <a id="983" href="Algebra.Bundles.html#7886" class="Module">CommutativeMonoid</a> <a id="1001" href="Algebra.Solver.CommutativeMonoid.Normal.html#421" class="Bound">M</a>
<a id="1003" class="Keyword">open</a> <a id="1008" href="Algebra.Properties.Monoid.Mult.html" class="Module">MultProperties</a> <a id="1023" href="Algebra.Bundles.html#8230" class="Function">monoid</a> <a id="1030" class="Keyword">using</a> <a id="1036" class="Symbol">(</a><a id="1037" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">_×_</a><a id="1040" class="Symbol">;</a> <a id="1042" href="Algebra.Properties.Monoid.Mult.html#1595" class="Function">×-homo-1</a><a id="1050" class="Symbol">;</a> <a id="1052" href="Algebra.Properties.Monoid.Mult.html#1646" class="Function">×-homo-+</a><a id="1060" class="Symbol">)</a>
<a id="1062" class="Keyword">open</a> <a id="1067" href="Algebra.Properties.CommutativeSemigroup.html" class="Module">CSProperties</a> <a id="1080" href="Algebra.Bundles.html#8392" class="Function">commutativeSemigroup</a> <a id="1101" class="Keyword">using</a> <a id="1107" class="Symbol">(</a><a id="1108" href="Algebra.Properties.CommutativeSemigroup.html#833" class="Function">interchange</a><a id="1119" class="Symbol">)</a>
<a id="1121" class="Keyword">open</a> <a id="1126" href="Relation.Binary.Reasoning.Setoid.html" class="Module">≈-Reasoning</a> <a id="1138" href="Algebra.Structures.html#1873" class="Function">setoid</a>

<a id="1146" class="Keyword">private</a>
  <a id="1156" class="Keyword">variable</a>
    <a id="1169" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a> <a id="1171" class="Symbol">:</a> <a id="1173" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>


<a id="1177" class="Comment">------------------------------------------------------------------------</a>
<a id="1250" class="Comment">-- Monoid expressions</a>

<a id="1273" class="Keyword">open</a> <a id="1278" class="Keyword">import</a> <a id="1285" href="Algebra.Solver.Monoid.Expression.html" class="Module">Algebra.Solver.Monoid.Expression</a> <a id="1318" href="Algebra.Bundles.html#7708" class="Function">rawMonoid</a> <a id="1328" class="Keyword">public</a>
  <a id="1337" class="Keyword">hiding</a> <a id="1344" class="Symbol">(</a><a id="1345" href="Algebra.Solver.Monoid.Expression.html#1386" class="Record">NormalAPI</a><a id="1354" class="Symbol">)</a>

<a id="1357" class="Comment">------------------------------------------------------------------------</a>
<a id="1430" class="Comment">-- Normal forms</a>

<a id="1447" class="Comment">-- A normal form is a vector of multiplicities (a bag).</a>

<a id="Normal"></a><a id="1504" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="1511" class="Symbol">:</a> <a id="1513" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1515" class="Symbol">→</a> <a id="1517" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1521" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="1528" href="Algebra.Solver.CommutativeMonoid.Normal.html#1528" class="Bound">n</a> <a id="1530" class="Symbol">=</a> <a id="1532" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1536" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1538" href="Algebra.Solver.CommutativeMonoid.Normal.html#1528" class="Bound">n</a>

<a id="1541" class="Comment">-- The semantics of a normal form.</a>

<a id="⟦_⟧⇓"></a><a id="1577" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦_⟧⇓</a> <a id="1582" class="Symbol">:</a> <a id="1584" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="1591" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a> <a id="1593" class="Symbol">→</a> <a id="1595" href="Algebra.Solver.Monoid.Expression.html#1039" class="Function">Env</a> <a id="1599" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a> <a id="1601" class="Symbol">→</a> <a id="1603" href="Algebra.Bundles.html#7976" class="Field">Carrier</a>
<a id="1611" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="1613" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a>    <a id="1619" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="1622" class="Symbol">_</a>       <a id="1630" class="Symbol">=</a> <a id="1632" href="Algebra.Bundles.html#8086" class="Field">ε</a>
<a id="1634" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="1636" href="Algebra.Solver.CommutativeMonoid.Normal.html#1636" class="Bound">n</a> <a id="1638" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="1640" href="Algebra.Solver.CommutativeMonoid.Normal.html#1640" class="Bound">v</a> <a id="1642" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="1645" class="Symbol">(</a><a id="1646" href="Algebra.Solver.CommutativeMonoid.Normal.html#1646" class="Bound">a</a> <a id="1648" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="1650" href="Algebra.Solver.CommutativeMonoid.Normal.html#1650" class="Bound">ρ</a><a id="1651" class="Symbol">)</a> <a id="1653" class="Symbol">=</a> <a id="1655" class="Symbol">(</a><a id="1656" href="Algebra.Solver.CommutativeMonoid.Normal.html#1636" class="Bound">n</a> <a id="1658" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="1660" href="Algebra.Solver.CommutativeMonoid.Normal.html#1646" class="Bound">a</a><a id="1661" class="Symbol">)</a> <a id="1663" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="1665" class="Symbol">(</a><a id="1666" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="1668" href="Algebra.Solver.CommutativeMonoid.Normal.html#1640" class="Bound">v</a> <a id="1670" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="1673" href="Algebra.Solver.CommutativeMonoid.Normal.html#1650" class="Bound">ρ</a><a id="1674" class="Symbol">)</a>

<a id="1677" class="Comment">-- We can decide if two normal forms are /syntactically/ equal.</a>

<a id="1742" class="Keyword">infix</a> <a id="1748" class="Number">5</a> <a id="1750" href="Algebra.Solver.CommutativeMonoid.Normal.html#1755" class="Function Operator">_≟_</a>

<a id="_≟_"></a><a id="1755" href="Algebra.Solver.CommutativeMonoid.Normal.html#1755" class="Function Operator">_≟_</a> <a id="1759" class="Symbol">:</a> <a id="1761" href="Relation.Binary.Definitions.html#6834" class="Function">DecidableEquality</a> <a id="1779" class="Symbol">(</a><a id="1780" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="1787" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="1788" class="Symbol">)</a>
<a id="1790" href="Algebra.Solver.CommutativeMonoid.Normal.html#1790" class="Bound">nf₁</a> <a id="1794" href="Algebra.Solver.CommutativeMonoid.Normal.html#1755" class="Function Operator">≟</a> <a id="1796" href="Algebra.Solver.CommutativeMonoid.Normal.html#1796" class="Bound">nf₂</a> <a id="1800" class="Symbol">=</a> <a id="1802" href="Relation.Nullary.Decidable.html#1241" class="Function">Dec.map</a> <a id="1810" href="Data.Vec.Relation.Binary.Pointwise.Inductive.html#9718" class="Function">Pointwise-≡↔≡</a> <a id="1824" class="Symbol">(</a><a id="1825" href="Data.Vec.Relation.Binary.Pointwise.Inductive.html#3736" class="Function">decidable</a> <a id="1835" href="Data.Nat.Properties.html#3874" class="Function Operator">ℕ._≟_</a> <a id="1841" href="Algebra.Solver.CommutativeMonoid.Normal.html#1790" class="Bound">nf₁</a> <a id="1845" href="Algebra.Solver.CommutativeMonoid.Normal.html#1796" class="Bound">nf₂</a><a id="1848" class="Symbol">)</a>
  <a id="1852" class="Keyword">where</a> <a id="1858" class="Keyword">open</a> <a id="1863" href="Data.Vec.Relation.Binary.Pointwise.Inductive.html" class="Module">Pointwise</a> <a id="1873" class="Keyword">using</a> <a id="1879" class="Symbol">(</a><a id="1880" href="Data.Vec.Relation.Binary.Pointwise.Inductive.html#9718" class="Function">Pointwise-≡↔≡</a><a id="1893" class="Symbol">;</a> <a id="1895" href="Data.Vec.Relation.Binary.Pointwise.Inductive.html#3736" class="Function">decidable</a><a id="1904" class="Symbol">)</a>

<a id="1907" class="Comment">------------------------------------------------------------------------</a>
<a id="1980" class="Comment">-- Constructions on normal forms</a>

<a id="2014" class="Comment">-- The empty bag.</a>

<a id="empty"></a><a id="2033" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2039" class="Symbol">:</a> <a id="2041" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="2048" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a>
<a id="2050" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2056" class="Symbol">=</a> <a id="2058" href="Data.Vec.Base.html#6493" class="Function">replicate</a> <a id="2068" class="Symbol">_</a> <a id="2070" class="Number">0</a>

<a id="2073" class="Comment">-- A singleton bag.</a>

<a id="singleton"></a><a id="2094" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="2104" class="Symbol">:</a> <a id="2106" class="Symbol">(</a><a id="2107" href="Algebra.Solver.CommutativeMonoid.Normal.html#2107" class="Bound">i</a> <a id="2109" class="Symbol">:</a> <a id="2111" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="2115" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="2116" class="Symbol">)</a> <a id="2118" class="Symbol">→</a> <a id="2120" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="2127" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a>
<a id="2129" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="2139" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a>    <a id="2147" class="Symbol">=</a> <a id="2149" class="Number">1</a> <a id="2151" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="2153" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a>
<a id="2159" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="2169" class="Symbol">(</a><a id="2170" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="2174" href="Algebra.Solver.CommutativeMonoid.Normal.html#2174" class="Bound">i</a><a id="2175" class="Symbol">)</a> <a id="2177" class="Symbol">=</a> <a id="2179" class="Number">0</a> <a id="2181" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="2183" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="2193" href="Algebra.Solver.CommutativeMonoid.Normal.html#2174" class="Bound">i</a>

<a id="2196" class="Comment">-- The composition of normal forms.</a>
<a id="2232" class="Keyword">infixr</a> <a id="2239" class="Number">10</a> <a id="2242" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">_•_</a>

<a id="_•_"></a><a id="2247" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">_•_</a>  <a id="2252" class="Symbol">:</a> <a id="2254" class="Symbol">(</a><a id="2255" href="Algebra.Solver.CommutativeMonoid.Normal.html#2255" class="Bound">v</a> <a id="2257" href="Algebra.Solver.CommutativeMonoid.Normal.html#2257" class="Bound">w</a> <a id="2259" class="Symbol">:</a> <a id="2261" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="2268" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="2269" class="Symbol">)</a> <a id="2271" class="Symbol">→</a> <a id="2273" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="2280" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a>
<a id="2282" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">_•_</a> <a id="2286" class="Symbol">=</a> <a id="2288" href="Data.Vec.Base.html#3745" class="Function">zipWith</a> <a id="2296" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a>

<a id="2301" class="Comment">------------------------------------------------------------------------</a>
<a id="2374" class="Comment">-- Correctness of the constructions on normal forms</a>

<a id="2427" class="Comment">-- The empty bag stands for the unit ε.</a>

<a id="empty-correct"></a><a id="2468" href="Algebra.Solver.CommutativeMonoid.Normal.html#2468" class="Function">empty-correct</a> <a id="2482" class="Symbol">:</a> <a id="2484" class="Symbol">(</a><a id="2485" href="Algebra.Solver.CommutativeMonoid.Normal.html#2485" class="Bound">ρ</a> <a id="2487" class="Symbol">:</a> <a id="2489" href="Algebra.Solver.Monoid.Expression.html#1039" class="Function">Env</a> <a id="2493" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="2494" class="Symbol">)</a> <a id="2496" class="Symbol">→</a> <a id="2498" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="2500" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2506" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="2509" href="Algebra.Solver.CommutativeMonoid.Normal.html#2485" class="Bound">ρ</a> <a id="2511" href="Algebra.Bundles.html#8008" class="Field Operator">≈</a> <a id="2513" href="Algebra.Bundles.html#8086" class="Field">ε</a>
<a id="2515" href="Algebra.Solver.CommutativeMonoid.Normal.html#2468" class="Function">empty-correct</a> <a id="2529" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a> <a id="2532" class="Symbol">=</a> <a id="2534" href="Relation.Binary.Structures.html#1596" class="Function">refl</a>
<a id="2539" href="Algebra.Solver.CommutativeMonoid.Normal.html#2468" class="Function">empty-correct</a> <a id="2553" class="Symbol">(</a><a id="2554" href="Algebra.Solver.CommutativeMonoid.Normal.html#2554" class="Bound">a</a> <a id="2556" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="2558" href="Algebra.Solver.CommutativeMonoid.Normal.html#2558" class="Bound">ρ</a><a id="2559" class="Symbol">)</a> <a id="2561" class="Symbol">=</a> <a id="2563" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="2573" href="Algebra.Bundles.html#8086" class="Field">ε</a> <a id="2575" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="2577" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="2579" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2585" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="2588" href="Algebra.Solver.CommutativeMonoid.Normal.html#2558" class="Bound">ρ</a>   <a id="2592" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="2595" href="Algebra.Structures.html#4987" class="Function">identityˡ</a> <a id="2605" class="Symbol">_</a> <a id="2607" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="2613" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="2615" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2621" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="2624" href="Algebra.Solver.CommutativeMonoid.Normal.html#2558" class="Bound">ρ</a>       <a id="2632" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="2635" href="Algebra.Solver.CommutativeMonoid.Normal.html#2468" class="Function">empty-correct</a> <a id="2649" href="Algebra.Solver.CommutativeMonoid.Normal.html#2558" class="Bound">ρ</a> <a id="2651" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="2657" href="Algebra.Bundles.html#8086" class="Field">ε</a>                  <a id="2676" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="2679" class="Comment">-- The singleton bag stands for a single variable.</a>

<a id="singleton-correct"></a><a id="2731" href="Algebra.Solver.CommutativeMonoid.Normal.html#2731" class="Function">singleton-correct</a> <a id="2749" class="Symbol">:</a> <a id="2751" class="Symbol">(</a><a id="2752" href="Algebra.Solver.CommutativeMonoid.Normal.html#2752" class="Bound">x</a> <a id="2754" class="Symbol">:</a> <a id="2756" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="2760" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="2761" class="Symbol">)</a> <a id="2763" class="Symbol">(</a><a id="2764" href="Algebra.Solver.CommutativeMonoid.Normal.html#2764" class="Bound">ρ</a> <a id="2766" class="Symbol">:</a> <a id="2768" href="Algebra.Solver.Monoid.Expression.html#1039" class="Function">Env</a> <a id="2772" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="2773" class="Symbol">)</a> <a id="2775" class="Symbol">→</a>
                    <a id="2797" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="2799" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="2809" href="Algebra.Solver.CommutativeMonoid.Normal.html#2752" class="Bound">x</a> <a id="2811" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="2814" href="Algebra.Solver.CommutativeMonoid.Normal.html#2764" class="Bound">ρ</a> <a id="2816" href="Algebra.Bundles.html#8008" class="Field Operator">≈</a> <a id="2818" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="2825" href="Algebra.Solver.CommutativeMonoid.Normal.html#2764" class="Bound">ρ</a> <a id="2827" href="Algebra.Solver.CommutativeMonoid.Normal.html#2752" class="Bound">x</a>
<a id="2829" href="Algebra.Solver.CommutativeMonoid.Normal.html#2731" class="Function">singleton-correct</a> <a id="2847" href="Data.Fin.Base.html#1181" class="InductiveConstructor">zero</a> <a id="2852" class="Symbol">(</a><a id="2853" href="Algebra.Solver.CommutativeMonoid.Normal.html#2853" class="Bound">x</a> <a id="2855" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="2857" href="Algebra.Solver.CommutativeMonoid.Normal.html#2857" class="Bound">ρ</a><a id="2858" class="Symbol">)</a> <a id="2860" class="Symbol">=</a> <a id="2862" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="2872" class="Symbol">(</a><a id="2873" class="Number">1</a> <a id="2875" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="2877" href="Algebra.Solver.CommutativeMonoid.Normal.html#2853" class="Bound">x</a><a id="2878" class="Symbol">)</a> <a id="2880" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="2882" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="2884" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2890" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="2893" href="Algebra.Solver.CommutativeMonoid.Normal.html#2857" class="Bound">ρ</a>   <a id="2897" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="2900" href="Algebra.Structures.html#2009" class="Function">∙-congʳ</a> <a id="2908" class="Symbol">(</a><a id="2909" href="Algebra.Properties.Monoid.Mult.html#1595" class="Function">×-homo-1</a> <a id="2918" class="Symbol">_)</a> <a id="2921" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="2927" href="Algebra.Solver.CommutativeMonoid.Normal.html#2853" class="Bound">x</a> <a id="2929" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="2931" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="2933" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a> <a id="2939" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="2942" href="Algebra.Solver.CommutativeMonoid.Normal.html#2857" class="Bound">ρ</a>         <a id="2952" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="2955" href="Algebra.Structures.html#1948" class="Function">∙-congˡ</a> <a id="2963" class="Symbol">(</a><a id="2964" href="Algebra.Solver.CommutativeMonoid.Normal.html#2468" class="Function">empty-correct</a> <a id="2978" href="Algebra.Solver.CommutativeMonoid.Normal.html#2857" class="Bound">ρ</a><a id="2979" class="Symbol">)</a> <a id="2981" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="2987" href="Algebra.Solver.CommutativeMonoid.Normal.html#2853" class="Bound">x</a> <a id="2989" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="2991" href="Algebra.Bundles.html#8086" class="Field">ε</a>                    <a id="3012" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3015" href="Algebra.Structures.html#5048" class="Function">identityʳ</a> <a id="3025" class="Symbol">_</a> <a id="3027" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="3033" href="Algebra.Solver.CommutativeMonoid.Normal.html#2853" class="Bound">x</a>                        <a id="3058" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
<a id="3060" href="Algebra.Solver.CommutativeMonoid.Normal.html#2731" class="Function">singleton-correct</a> <a id="3078" class="Symbol">(</a><a id="3079" href="Data.Fin.Base.html#1202" class="InductiveConstructor">suc</a> <a id="3083" href="Algebra.Solver.CommutativeMonoid.Normal.html#3083" class="Bound">x</a><a id="3084" class="Symbol">)</a> <a id="3086" class="Symbol">(</a><a id="3087" href="Algebra.Solver.CommutativeMonoid.Normal.html#3087" class="Bound">m</a> <a id="3089" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3091" href="Algebra.Solver.CommutativeMonoid.Normal.html#3091" class="Bound">ρ</a><a id="3092" class="Symbol">)</a> <a id="3094" class="Symbol">=</a> <a id="3096" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="3106" href="Algebra.Bundles.html#8086" class="Field">ε</a> <a id="3108" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3110" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3112" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="3122" href="Algebra.Solver.CommutativeMonoid.Normal.html#3083" class="Bound">x</a> <a id="3124" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3127" href="Algebra.Solver.CommutativeMonoid.Normal.html#3091" class="Bound">ρ</a>   <a id="3131" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3134" href="Algebra.Structures.html#4987" class="Function">identityˡ</a> <a id="3144" class="Symbol">_</a> <a id="3146" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="3152" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3154" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="3164" href="Algebra.Solver.CommutativeMonoid.Normal.html#3083" class="Bound">x</a> <a id="3166" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3169" href="Algebra.Solver.CommutativeMonoid.Normal.html#3091" class="Bound">ρ</a>       <a id="3177" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3180" href="Algebra.Solver.CommutativeMonoid.Normal.html#2731" class="Function">singleton-correct</a> <a id="3198" href="Algebra.Solver.CommutativeMonoid.Normal.html#3083" class="Bound">x</a> <a id="3200" href="Algebra.Solver.CommutativeMonoid.Normal.html#3091" class="Bound">ρ</a> <a id="3202" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
    <a id="3208" href="Data.Vec.Base.html#1676" class="Function">lookup</a> <a id="3215" href="Algebra.Solver.CommutativeMonoid.Normal.html#3091" class="Bound">ρ</a> <a id="3217" href="Algebra.Solver.CommutativeMonoid.Normal.html#3083" class="Bound">x</a>        <a id="3226" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="3229" class="Comment">-- Normal form composition corresponds to the composition of the monoid.</a>

<a id="comp-correct"></a><a id="3303" href="Algebra.Solver.CommutativeMonoid.Normal.html#3303" class="Function">comp-correct</a> <a id="3316" class="Symbol">:</a> <a id="3318" class="Symbol">∀</a> <a id="3320" href="Algebra.Solver.CommutativeMonoid.Normal.html#3320" class="Bound">v</a> <a id="3322" href="Algebra.Solver.CommutativeMonoid.Normal.html#3322" class="Bound">w</a> <a id="3324" class="Symbol">(</a><a id="3325" href="Algebra.Solver.CommutativeMonoid.Normal.html#3325" class="Bound">ρ</a> <a id="3327" class="Symbol">:</a> <a id="3329" href="Algebra.Solver.Monoid.Expression.html#1039" class="Function">Env</a> <a id="3333" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="3334" class="Symbol">)</a> <a id="3336" class="Symbol">→</a>
               <a id="3353" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3355" href="Algebra.Solver.CommutativeMonoid.Normal.html#3320" class="Bound">v</a> <a id="3357" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">•</a> <a id="3359" href="Algebra.Solver.CommutativeMonoid.Normal.html#3322" class="Bound">w</a> <a id="3361" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3364" href="Algebra.Solver.CommutativeMonoid.Normal.html#3325" class="Bound">ρ</a> <a id="3366" href="Algebra.Bundles.html#8008" class="Field Operator">≈</a> <a id="3368" class="Symbol">(</a><a id="3369" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3371" href="Algebra.Solver.CommutativeMonoid.Normal.html#3320" class="Bound">v</a> <a id="3373" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3376" href="Algebra.Solver.CommutativeMonoid.Normal.html#3325" class="Bound">ρ</a> <a id="3378" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3380" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3382" href="Algebra.Solver.CommutativeMonoid.Normal.html#3322" class="Bound">w</a> <a id="3384" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3387" href="Algebra.Solver.CommutativeMonoid.Normal.html#3325" class="Bound">ρ</a><a id="3388" class="Symbol">)</a>
<a id="3390" href="Algebra.Solver.CommutativeMonoid.Normal.html#3303" class="Function">comp-correct</a> <a id="3403" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a> <a id="3406" href="Data.Vec.Base.html#1155" class="InductiveConstructor">[]</a> <a id="3409" class="Symbol">_</a> <a id="3411" class="Symbol">=</a>  <a id="3414" href="Relation.Binary.Structures.html#1622" class="Function">sym</a> <a id="3418" class="Symbol">(</a><a id="3419" href="Algebra.Structures.html#4987" class="Function">identityˡ</a> <a id="3429" class="Symbol">_)</a>
<a id="3432" href="Algebra.Solver.CommutativeMonoid.Normal.html#3303" class="Function">comp-correct</a> <a id="3445" class="Symbol">(</a><a id="3446" href="Algebra.Solver.CommutativeMonoid.Normal.html#3446" class="Bound">l</a> <a id="3448" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3450" href="Algebra.Solver.CommutativeMonoid.Normal.html#3450" class="Bound">v</a><a id="3451" class="Symbol">)</a> <a id="3453" class="Symbol">(</a><a id="3454" href="Algebra.Solver.CommutativeMonoid.Normal.html#3454" class="Bound">m</a> <a id="3456" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3458" href="Algebra.Solver.CommutativeMonoid.Normal.html#3458" class="Bound">w</a><a id="3459" class="Symbol">)</a> <a id="3461" class="Symbol">(</a><a id="3462" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a> <a id="3464" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3466" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a><a id="3467" class="Symbol">)</a> <a id="3469" class="Symbol">=</a> <a id="3471" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
  <a id="3479" class="Symbol">((</a><a id="3481" href="Algebra.Solver.CommutativeMonoid.Normal.html#3446" class="Bound">l</a> <a id="3483" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3485" href="Algebra.Solver.CommutativeMonoid.Normal.html#3454" class="Bound">m</a><a id="3486" class="Symbol">)</a> <a id="3488" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="3490" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a><a id="3491" class="Symbol">)</a> <a id="3493" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3495" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3497" href="Algebra.Solver.CommutativeMonoid.Normal.html#3450" class="Bound">v</a> <a id="3499" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">•</a> <a id="3501" href="Algebra.Solver.CommutativeMonoid.Normal.html#3458" class="Bound">w</a> <a id="3503" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3506" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a>              <a id="3521" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3524" href="Algebra.Structures.html#2009" class="Function">∙-congʳ</a>  <a id="3533" class="Symbol">(</a><a id="3534" href="Algebra.Properties.Monoid.Mult.html#1646" class="Function">×-homo-+</a> <a id="3543" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a> <a id="3545" href="Algebra.Solver.CommutativeMonoid.Normal.html#3446" class="Bound">l</a> <a id="3547" href="Algebra.Solver.CommutativeMonoid.Normal.html#3454" class="Bound">m</a><a id="3548" class="Symbol">)</a> <a id="3550" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
  <a id="3554" class="Symbol">(</a><a id="3555" href="Algebra.Solver.CommutativeMonoid.Normal.html#3446" class="Bound">l</a> <a id="3557" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="3559" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a><a id="3560" class="Symbol">)</a> <a id="3562" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3564" class="Symbol">(</a><a id="3565" href="Algebra.Solver.CommutativeMonoid.Normal.html#3454" class="Bound">m</a> <a id="3567" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="3569" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a><a id="3570" class="Symbol">)</a> <a id="3572" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3574" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3576" href="Algebra.Solver.CommutativeMonoid.Normal.html#3450" class="Bound">v</a> <a id="3578" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">•</a> <a id="3580" href="Algebra.Solver.CommutativeMonoid.Normal.html#3458" class="Bound">w</a> <a id="3582" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3585" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a>          <a id="3596" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3599" href="Algebra.Structures.html#1948" class="Function">∙-congˡ</a>  <a id="3608" class="Symbol">(</a><a id="3609" href="Algebra.Solver.CommutativeMonoid.Normal.html#3303" class="Function">comp-correct</a> <a id="3622" href="Algebra.Solver.CommutativeMonoid.Normal.html#3450" class="Bound">v</a> <a id="3624" href="Algebra.Solver.CommutativeMonoid.Normal.html#3458" class="Bound">w</a> <a id="3626" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a><a id="3627" class="Symbol">)</a> <a id="3629" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
  <a id="3633" class="Symbol">(</a><a id="3634" href="Algebra.Solver.CommutativeMonoid.Normal.html#3446" class="Bound">l</a> <a id="3636" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="3638" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a><a id="3639" class="Symbol">)</a> <a id="3641" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3643" class="Symbol">(</a><a id="3644" href="Algebra.Solver.CommutativeMonoid.Normal.html#3454" class="Bound">m</a> <a id="3646" href="Algebra.Definitions.RawMonoid.html#1089" class="Function Operator">×</a> <a id="3648" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a><a id="3649" class="Symbol">)</a> <a id="3651" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3653" class="Symbol">(</a><a id="3654" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3656" href="Algebra.Solver.CommutativeMonoid.Normal.html#3450" class="Bound">v</a> <a id="3658" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3661" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a> <a id="3663" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3665" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3667" href="Algebra.Solver.CommutativeMonoid.Normal.html#3458" class="Bound">w</a> <a id="3669" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3672" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a><a id="3673" class="Symbol">)</a> <a id="3675" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3678" href="Algebra.Properties.CommutativeSemigroup.html#833" class="Function">interchange</a> <a id="3690" class="Symbol">_</a> <a id="3692" class="Symbol">_</a> <a id="3694" class="Symbol">_</a> <a id="3696" class="Symbol">_</a> <a id="3698" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
  <a id="3702" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3704" href="Algebra.Solver.CommutativeMonoid.Normal.html#3446" class="Bound">l</a> <a id="3706" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3708" href="Algebra.Solver.CommutativeMonoid.Normal.html#3450" class="Bound">v</a> <a id="3710" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3713" class="Symbol">(</a><a id="3714" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a> <a id="3716" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3718" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a><a id="3719" class="Symbol">)</a> <a id="3721" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="3723" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="3725" href="Algebra.Solver.CommutativeMonoid.Normal.html#3454" class="Bound">m</a> <a id="3727" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3729" href="Algebra.Solver.CommutativeMonoid.Normal.html#3458" class="Bound">w</a> <a id="3731" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="3734" class="Symbol">(</a><a id="3735" href="Algebra.Solver.CommutativeMonoid.Normal.html#3462" class="Bound">a</a> <a id="3737" href="Data.Vec.Base.html#1174" class="InductiveConstructor Operator">∷</a> <a id="3739" href="Algebra.Solver.CommutativeMonoid.Normal.html#3466" class="Bound">ρ</a><a id="3740" class="Symbol">)</a>   <a id="3744" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="3747" class="Comment">------------------------------------------------------------------------</a>
<a id="3820" class="Comment">-- Normalization</a>

<a id="3838" class="Comment">-- A normaliser.</a>

<a id="normalise"></a><a id="3856" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="3866" class="Symbol">:</a> <a id="3868" href="Algebra.Solver.Monoid.Expression.html#884" class="Datatype">Expr</a> <a id="3873" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a> <a id="3875" class="Symbol">→</a> <a id="3877" href="Algebra.Solver.CommutativeMonoid.Normal.html#1504" class="Function">Normal</a> <a id="3884" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a>
<a id="3886" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="3896" class="Symbol">(</a><a id="3897" href="Algebra.Solver.Monoid.Expression.html#911" class="InductiveConstructor">var</a> <a id="3901" href="Algebra.Solver.CommutativeMonoid.Normal.html#3901" class="Bound">x</a><a id="3902" class="Symbol">)</a>   <a id="3906" class="Symbol">=</a> <a id="3908" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a> <a id="3918" href="Algebra.Solver.CommutativeMonoid.Normal.html#3901" class="Bound">x</a>
<a id="3920" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="3930" href="Algebra.Solver.Monoid.Expression.html#934" class="InductiveConstructor">id</a>        <a id="3940" class="Symbol">=</a> <a id="3942" href="Algebra.Solver.CommutativeMonoid.Normal.html#2033" class="Function">empty</a>
<a id="3948" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="3958" class="Symbol">(</a><a id="3959" href="Algebra.Solver.CommutativeMonoid.Normal.html#3959" class="Bound">e₁</a> <a id="3962" href="Algebra.Solver.Monoid.Expression.html#949" class="InductiveConstructor Operator">⊕</a> <a id="3964" href="Algebra.Solver.CommutativeMonoid.Normal.html#3964" class="Bound">e₂</a><a id="3966" class="Symbol">)</a> <a id="3968" class="Symbol">=</a> <a id="3970" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="3980" href="Algebra.Solver.CommutativeMonoid.Normal.html#3959" class="Bound">e₁</a> <a id="3983" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">•</a> <a id="3985" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="3995" href="Algebra.Solver.CommutativeMonoid.Normal.html#3964" class="Bound">e₂</a>

<a id="3999" class="Comment">-- The normaliser preserves the semantics of the expression.</a>

<a id="correct"></a><a id="4061" href="Algebra.Solver.CommutativeMonoid.Normal.html#4061" class="Function">correct</a> <a id="4069" class="Symbol">:</a> <a id="4071" class="Symbol">∀</a> <a id="4073" href="Algebra.Solver.CommutativeMonoid.Normal.html#4073" class="Bound">e</a> <a id="4075" href="Algebra.Solver.CommutativeMonoid.Normal.html#4075" class="Bound">ρ</a> <a id="4077" class="Symbol">→</a> <a id="4079" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="4081" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4091" class="Symbol">{</a><a id="4092" class="Argument">n</a> <a id="4094" class="Symbol">=</a> <a id="4096" href="Algebra.Solver.CommutativeMonoid.Normal.html#1169" class="Generalizable">n</a><a id="4097" class="Symbol">}</a> <a id="4099" href="Algebra.Solver.CommutativeMonoid.Normal.html#4073" class="Bound">e</a> <a id="4101" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="4104" href="Algebra.Solver.CommutativeMonoid.Normal.html#4075" class="Bound">ρ</a> <a id="4106" href="Algebra.Bundles.html#8008" class="Field Operator">≈</a> <a id="4108" href="Algebra.Solver.Monoid.Expression.html#1162" class="Function Operator">⟦</a> <a id="4110" href="Algebra.Solver.CommutativeMonoid.Normal.html#4073" class="Bound">e</a> <a id="4112" href="Algebra.Solver.Monoid.Expression.html#1162" class="Function Operator">⟧</a> <a id="4114" href="Algebra.Solver.CommutativeMonoid.Normal.html#4075" class="Bound">ρ</a>
<a id="4116" href="Algebra.Solver.CommutativeMonoid.Normal.html#4061" class="Function">correct</a> <a id="4124" class="Symbol">(</a><a id="4125" href="Algebra.Solver.Monoid.Expression.html#911" class="InductiveConstructor">var</a> <a id="4129" href="Algebra.Solver.CommutativeMonoid.Normal.html#4129" class="Bound">x</a><a id="4130" class="Symbol">)</a>   <a id="4134" href="Algebra.Solver.CommutativeMonoid.Normal.html#4134" class="Bound">ρ</a> <a id="4136" class="Symbol">=</a> <a id="4138" href="Algebra.Solver.CommutativeMonoid.Normal.html#2731" class="Function">singleton-correct</a> <a id="4156" href="Algebra.Solver.CommutativeMonoid.Normal.html#4129" class="Bound">x</a> <a id="4158" href="Algebra.Solver.CommutativeMonoid.Normal.html#4134" class="Bound">ρ</a>
<a id="4160" href="Algebra.Solver.CommutativeMonoid.Normal.html#4061" class="Function">correct</a> <a id="4168" href="Algebra.Solver.Monoid.Expression.html#934" class="InductiveConstructor">id</a>        <a id="4178" href="Algebra.Solver.CommutativeMonoid.Normal.html#4178" class="Bound">ρ</a> <a id="4180" class="Symbol">=</a> <a id="4182" href="Algebra.Solver.CommutativeMonoid.Normal.html#2468" class="Function">empty-correct</a> <a id="4196" href="Algebra.Solver.CommutativeMonoid.Normal.html#4178" class="Bound">ρ</a>
<a id="4198" href="Algebra.Solver.CommutativeMonoid.Normal.html#4061" class="Function">correct</a> <a id="4206" class="Symbol">(</a><a id="4207" href="Algebra.Solver.CommutativeMonoid.Normal.html#4207" class="Bound">e₁</a> <a id="4210" href="Algebra.Solver.Monoid.Expression.html#949" class="InductiveConstructor Operator">⊕</a> <a id="4212" href="Algebra.Solver.CommutativeMonoid.Normal.html#4212" class="Bound">e₂</a><a id="4214" class="Symbol">)</a> <a id="4216" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a> <a id="4218" class="Symbol">=</a> <a id="4220" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
  <a id="4228" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="4230" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4240" href="Algebra.Solver.CommutativeMonoid.Normal.html#4207" class="Bound">e₁</a> <a id="4243" href="Algebra.Solver.CommutativeMonoid.Normal.html#2247" class="Function Operator">•</a> <a id="4245" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4255" href="Algebra.Solver.CommutativeMonoid.Normal.html#4212" class="Bound">e₂</a> <a id="4258" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="4261" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a>
    <a id="4267" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="4270" href="Algebra.Solver.CommutativeMonoid.Normal.html#3303" class="Function">comp-correct</a> <a id="4283" class="Symbol">(</a><a id="4284" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4294" href="Algebra.Solver.CommutativeMonoid.Normal.html#4207" class="Bound">e₁</a><a id="4296" class="Symbol">)</a> <a id="4298" class="Symbol">(</a><a id="4299" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4309" href="Algebra.Solver.CommutativeMonoid.Normal.html#4212" class="Bound">e₂</a><a id="4311" class="Symbol">)</a> <a id="4313" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a> <a id="4315" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
  <a id="4319" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="4321" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4331" href="Algebra.Solver.CommutativeMonoid.Normal.html#4207" class="Bound">e₁</a> <a id="4334" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="4337" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a> <a id="4339" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="4341" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟦</a> <a id="4343" href="Algebra.Solver.CommutativeMonoid.Normal.html#3856" class="Function">normalise</a> <a id="4353" href="Algebra.Solver.CommutativeMonoid.Normal.html#4212" class="Bound">e₂</a> <a id="4356" href="Algebra.Solver.CommutativeMonoid.Normal.html#1577" class="Function Operator">⟧⇓</a> <a id="4359" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a>
    <a id="4365" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="4368" href="Algebra.Structures.html#1798" class="Function">∙-cong</a> <a id="4375" class="Symbol">(</a><a id="4376" href="Algebra.Solver.CommutativeMonoid.Normal.html#4061" class="Function">correct</a> <a id="4384" href="Algebra.Solver.CommutativeMonoid.Normal.html#4207" class="Bound">e₁</a> <a id="4387" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a><a id="4388" class="Symbol">)</a> <a id="4390" class="Symbol">(</a><a id="4391" href="Algebra.Solver.CommutativeMonoid.Normal.html#4061" class="Function">correct</a> <a id="4399" href="Algebra.Solver.CommutativeMonoid.Normal.html#4212" class="Bound">e₂</a> <a id="4402" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a><a id="4403" class="Symbol">)</a> <a id="4405" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
  <a id="4409" href="Algebra.Solver.Monoid.Expression.html#1162" class="Function Operator">⟦</a> <a id="4411" href="Algebra.Solver.CommutativeMonoid.Normal.html#4207" class="Bound">e₁</a> <a id="4414" href="Algebra.Solver.Monoid.Expression.html#1162" class="Function Operator">⟧</a> <a id="4416" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a> <a id="4418" href="Algebra.Bundles.html#8048" class="Field Operator">∙</a> <a id="4420" href="Algebra.Solver.Monoid.Expression.html#1162" class="Function Operator">⟦</a> <a id="4422" href="Algebra.Solver.CommutativeMonoid.Normal.html#4212" class="Bound">e₂</a> <a id="4425" href="Algebra.Solver.Monoid.Expression.html#1162" class="Function Operator">⟧</a> <a id="4427" href="Algebra.Solver.CommutativeMonoid.Normal.html#4216" class="Bound">ρ</a>
    <a id="4433" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>


<a id="4437" class="Comment">------------------------------------------------------------------------</a>
<a id="4510" class="Comment">-- DEPRECATED NAMES</a>
<a id="4530" class="Comment">------------------------------------------------------------------------</a>
<a id="4603" class="Comment">-- Please use the new names as continuing support for the old names is</a>
<a id="4674" class="Comment">-- not guaranteed.</a>

<a id="4694" class="Comment">-- Version 2.2</a>

<a id="sg"></a><a id="4710" href="Algebra.Solver.CommutativeMonoid.Normal.html#4710" class="Function">sg</a> <a id="4713" class="Symbol">=</a> <a id="4715" href="Algebra.Solver.CommutativeMonoid.Normal.html#2094" class="Function">singleton</a>
<a id="4725" class="Symbol">{-#</a> <a id="4729" class="Keyword">WARNING_ON_USAGE</a> <a id="4746" class="Pragma">sg</a>
<a id="4749" class="String">&quot;Warning: sg was deprecated in v2.2.
Please use singleton instead.&quot;</a>
<a id="4817" class="Symbol">#-}</a>
<a id="sg-correct"></a><a id="4821" href="Algebra.Solver.CommutativeMonoid.Normal.html#4821" class="Function">sg-correct</a> <a id="4832" class="Symbol">=</a> <a id="4834" href="Algebra.Solver.CommutativeMonoid.Normal.html#2731" class="Function">singleton-correct</a>
<a id="4852" class="Symbol">{-#</a> <a id="4856" class="Keyword">WARNING_ON_USAGE</a> <a id="4873" class="Pragma">sg-correct</a>
<a id="4884" class="String">&quot;Warning: sg-correct was deprecated in v2.2.
Please use singleton-correct instead.&quot;</a>
<a id="4968" class="Symbol">#-}</a>
</pre></body></html>