<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Word64.Unsafe</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Machine words: unsafe functions using the FFI</a>
<a id="155" class="Comment">------------------------------------------------------------------------</a>

<a id="229" class="Symbol">{-#</a> <a id="233" class="Keyword">OPTIONS</a> <a id="241" class="Pragma">--cubical-compatible</a> <a id="262" class="Symbol">#-}</a>

<a id="267" class="Keyword">module</a> <a id="274" href="Data.Word64.Unsafe.html" class="Module">Data.Word64.Unsafe</a> <a id="293" class="Keyword">where</a>

<a id="300" class="Keyword">open</a> <a id="305" class="Keyword">import</a> <a id="312" href="Agda.Builtin.Bool.html" class="Module">Agda.Builtin.Bool</a> <a id="330" class="Keyword">using</a> <a id="336" class="Symbol">(</a><a id="337" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="341" class="Symbol">;</a> <a id="343" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="347" class="Symbol">;</a> <a id="349" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="354" class="Symbol">)</a>
<a id="356" class="Keyword">open</a> <a id="361" class="Keyword">import</a> <a id="368" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="382" class="Symbol">as</a> <a id="385" class="Module">Fin</a> <a id="389" class="Keyword">using</a> <a id="395" class="Symbol">(</a><a id="396" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a><a id="399" class="Symbol">)</a>
<a id="401" class="Keyword">open</a> <a id="406" class="Keyword">import</a> <a id="413" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="431" class="Keyword">using</a> <a id="437" class="Symbol">(</a><a id="438" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="443" class="Symbol">)</a>
<a id="445" class="Keyword">open</a> <a id="450" class="Keyword">import</a> <a id="457" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="471" class="Symbol">as</a> <a id="474" class="Module">Vec</a> <a id="478" class="Keyword">using</a> <a id="484" class="Symbol">(</a><a id="485" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a><a id="488" class="Symbol">)</a>
<a id="490" class="Keyword">open</a> <a id="495" class="Keyword">import</a> <a id="502" href="Data.Word8.Base.html" class="Module">Data.Word8.Base</a> <a id="518" class="Symbol">as</a> <a id="521" class="Module">Word8</a> <a id="527" class="Keyword">using</a> <a id="533" class="Symbol">(</a><a id="534" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a><a id="539" class="Symbol">)</a>
<a id="541" class="Keyword">open</a> <a id="546" class="Keyword">import</a> <a id="553" href="Data.Word64.Base.html" class="Module">Data.Word64.Base</a>
<a id="570" class="Keyword">open</a> <a id="575" class="Keyword">import</a> <a id="582" href="Function.Base.html" class="Module">Function.Base</a> <a id="596" class="Keyword">using</a> <a id="602" class="Symbol">(</a><a id="603" href="Function.Base.html#1974" class="Function Operator">_$_</a><a id="606" class="Symbol">;</a> <a id="608" href="Function.Base.html#2127" class="Function Operator">_|&gt;_</a><a id="612" class="Symbol">)</a>

<a id="615" class="Comment">------------------------------------------------------------------------</a>
<a id="688" class="Comment">-- Re-export primitives publicly</a>

<a id="722" class="Keyword">open</a> <a id="727" class="Keyword">import</a> <a id="734" href="Data.Word64.Primitive.html" class="Module">Data.Word64.Primitive</a> <a id="756" class="Symbol">as</a> <a id="759" class="Module">Prim</a> <a id="764" class="Keyword">public</a>
  <a id="773" class="Keyword">using</a> <a id="779" class="Symbol">(</a> <a id="781" href="Data.Word64.Primitive.html#601" class="Postulate">show</a> <a id="786" class="Symbol">)</a>

<a id="testBit"></a><a id="789" href="Data.Word64.Unsafe.html#789" class="Function">testBit</a> <a id="797" class="Symbol">:</a> <a id="799" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="806" class="Symbol">→</a> <a id="808" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="812" class="Number">64</a> <a id="815" class="Symbol">→</a> <a id="817" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="822" href="Data.Word64.Unsafe.html#789" class="Function">testBit</a> <a id="830" href="Data.Word64.Unsafe.html#830" class="Bound">w</a> <a id="832" href="Data.Word64.Unsafe.html#832" class="Bound">i</a> <a id="834" class="Symbol">=</a> <a id="836" href="Data.Word64.Primitive.html#501" class="Postulate">Prim.testBit</a> <a id="849" href="Data.Word64.Unsafe.html#830" class="Bound">w</a> <a id="851" class="Symbol">(</a><a id="852" href="Data.Fin.Base.html#1267" class="Function">Fin.toℕ</a> <a id="860" href="Data.Word64.Unsafe.html#832" class="Bound">i</a><a id="861" class="Symbol">)</a>

<a id="_[_]≔_"></a><a id="864" href="Data.Word64.Unsafe.html#864" class="Function Operator">_[_]≔_</a> <a id="871" class="Symbol">:</a> <a id="873" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="880" class="Symbol">→</a> <a id="882" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="886" class="Number">64</a> <a id="889" class="Symbol">→</a> <a id="891" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="896" class="Symbol">→</a> <a id="898" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a>
<a id="905" href="Data.Word64.Unsafe.html#905" class="Bound">w</a> <a id="907" href="Data.Word64.Unsafe.html#864" class="Function Operator">[</a> <a id="909" href="Data.Word64.Unsafe.html#909" class="Bound">i</a> <a id="911" href="Data.Word64.Unsafe.html#864" class="Function Operator">]≔</a> <a id="914" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="920" class="Symbol">=</a> <a id="922" href="Data.Word64.Primitive.html#566" class="Postulate">Prim.clearBit</a> <a id="936" href="Data.Word64.Unsafe.html#905" class="Bound">w</a> <a id="938" class="Symbol">(</a><a id="939" href="Data.Fin.Base.html#1267" class="Function">Fin.toℕ</a> <a id="947" href="Data.Word64.Unsafe.html#909" class="Bound">i</a><a id="948" class="Symbol">)</a>
<a id="950" href="Data.Word64.Unsafe.html#950" class="Bound">w</a> <a id="952" href="Data.Word64.Unsafe.html#864" class="Function Operator">[</a> <a id="954" href="Data.Word64.Unsafe.html#954" class="Bound">i</a> <a id="956" href="Data.Word64.Unsafe.html#864" class="Function Operator">]≔</a> <a id="959" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>  <a id="965" class="Symbol">=</a> <a id="967" href="Data.Word64.Primitive.html#533" class="Postulate">Prim.setBit</a> <a id="979" href="Data.Word64.Unsafe.html#950" class="Bound">w</a> <a id="981" class="Symbol">(</a><a id="982" href="Data.Fin.Base.html#1267" class="Function">Fin.toℕ</a> <a id="990" href="Data.Word64.Unsafe.html#954" class="Bound">i</a><a id="991" class="Symbol">)</a>

<a id="994" class="Comment">------------------------------------------------------------------------</a>
<a id="1067" class="Comment">-- Convert to its components</a>

<a id="toBits"></a><a id="1097" href="Data.Word64.Unsafe.html#1097" class="Function">toBits</a> <a id="1104" class="Symbol">:</a> <a id="1106" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1113" class="Symbol">→</a> <a id="1115" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1119" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="1124" class="Number">64</a>
<a id="1127" href="Data.Word64.Unsafe.html#1097" class="Function">toBits</a> <a id="1134" href="Data.Word64.Unsafe.html#1134" class="Bound">w</a> <a id="1136" class="Symbol">=</a> <a id="1138" href="Data.Vec.Base.html#6593" class="Function">Vec.tabulate</a> <a id="1151" class="Symbol">(</a><a id="1152" href="Data.Word64.Unsafe.html#789" class="Function">testBit</a> <a id="1160" href="Data.Word64.Unsafe.html#1134" class="Bound">w</a><a id="1161" class="Symbol">)</a>

<a id="fromBits"></a><a id="1164" href="Data.Word64.Unsafe.html#1164" class="Function">fromBits</a> <a id="1173" class="Symbol">:</a> <a id="1175" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1179" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="1184" class="Number">64</a> <a id="1187" class="Symbol">→</a> <a id="1189" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a>
<a id="1196" href="Data.Word64.Unsafe.html#1164" class="Function">fromBits</a> <a id="1205" href="Data.Word64.Unsafe.html#1205" class="Bound">bs</a> <a id="1208" class="Symbol">=</a> <a id="1210" href="Data.Vec.Base.html#5801" class="Function">Vec.foldl′</a> <a id="1221" href="Function.Base.html#2127" class="Function Operator">_|&gt;_</a> <a id="1226" class="Symbol">(</a><a id="1227" href="Data.Word64.Base.html#803" class="Primitive">fromℕ</a> <a id="1233" class="Number">0</a><a id="1234" class="Symbol">)</a>
            <a id="1248" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1250" href="Data.Vec.Base.html#3745" class="Function">Vec.zipWith</a> <a id="1262" class="Symbol">(λ</a> <a id="1265" href="Data.Word64.Unsafe.html#1265" class="Bound">i</a> <a id="1267" href="Data.Word64.Unsafe.html#1267" class="Bound">b</a> <a id="1269" class="Symbol">→</a> <a id="1271" href="Data.Word64.Unsafe.html#864" class="Function Operator">_[</a> <a id="1274" href="Data.Word64.Unsafe.html#1265" class="Bound">i</a> <a id="1276" href="Data.Word64.Unsafe.html#864" class="Function Operator">]≔</a> <a id="1279" href="Data.Word64.Unsafe.html#1267" class="Bound">b</a><a id="1280" class="Symbol">)</a> <a id="1282" class="Symbol">(</a><a id="1283" href="Data.Vec.Base.html#6708" class="Function">Vec.allFin</a> <a id="1294" class="Number">64</a><a id="1296" class="Symbol">)</a> <a id="1298" href="Data.Word64.Unsafe.html#1205" class="Bound">bs</a>

<a id="toWord64s"></a><a id="1302" href="Data.Word64.Unsafe.html#1302" class="Function">toWord64s</a> <a id="1312" class="Symbol">:</a> <a id="1314" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1321" class="Symbol">→</a> <a id="1323" href="Data.Vec.Base.html#1119" class="Datatype">Vec</a> <a id="1327" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a> <a id="1333" class="Number">8</a>
<a id="1335" href="Data.Word64.Unsafe.html#1302" class="Function">toWord64s</a> <a id="1345" href="Data.Word64.Unsafe.html#1345" class="Bound">w</a> <a id="1347" class="Symbol">=</a>
  <a id="1351" class="Keyword">let</a> <a id="1355" href="Data.Word64.Unsafe.html#1355" class="Bound">ws</a> <a id="1358" class="Symbol">=</a> <a id="1360" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1366" class="Symbol">(</a><a id="1367" href="Data.Vec.Base.html#7275" class="Function">Vec.group</a> <a id="1377" class="Number">8</a> <a id="1379" class="Number">8</a> <a id="1381" class="Symbol">(</a><a id="1382" href="Data.Word64.Unsafe.html#1097" class="Function">toBits</a> <a id="1389" href="Data.Word64.Unsafe.html#1345" class="Bound">w</a><a id="1390" class="Symbol">))</a> <a id="1393" class="Keyword">in</a>
  <a id="1398" href="Data.Vec.Base.html#2955" class="Function">Vec.map</a> <a id="1406" href="Data.Word8.Base.html#1264" class="Function">Word8.fromBits</a> <a id="1421" href="Data.Word64.Unsafe.html#1355" class="Bound">ws</a>
</pre></body></html>