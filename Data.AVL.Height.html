<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.AVL.Height</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Types and functions which are used to keep track of height</a>
<a id="168" class="Comment">-- invariants in AVL Trees</a>
<a id="195" class="Comment">------------------------------------------------------------------------</a>

<a id="269" class="Symbol">{-#</a> <a id="273" class="Keyword">OPTIONS</a> <a id="281" class="Option">--without-K</a> <a id="293" class="Option">--safe</a> <a id="300" class="Symbol">#-}</a>

<a id="305" class="Keyword">module</a> <a id="312" href="Data.AVL.Height.html" class="Module">Data.AVL.Height</a> <a id="328" class="Keyword">where</a>

<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="361" class="Keyword">open</a> <a id="366" class="Keyword">import</a> <a id="373" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="382" class="Keyword">using</a> <a id="388" class="Symbol">(</a><a id="389" href="Data.Fin.Base.html#951" class="Datatype">Fin</a><a id="392" class="Symbol">;</a> <a id="394" href="Data.Fin.Base.html#973" class="InductiveConstructor">zero</a><a id="398" class="Symbol">;</a> <a id="400" href="Data.Fin.Base.html#1004" class="InductiveConstructor">suc</a><a id="403" class="Symbol">)</a>

<a id="ℕ₂"></a><a id="406" href="Data.AVL.Height.html#406" class="Function">ℕ₂</a> <a id="409" class="Symbol">=</a> <a id="411" href="Data.Fin.Base.html#951" class="Datatype">Fin</a> <a id="415" class="Number">2</a>
<a id="417" class="Keyword">pattern</a> <a id="0#"></a><a id="425" href="Data.AVL.Height.html#425" class="InductiveConstructor">0#</a> <a id="428" class="Symbol">=</a> <a id="430" class="InductiveConstructor">zero</a>
<a id="435" class="Keyword">pattern</a> <a id="1#"></a><a id="443" href="Data.AVL.Height.html#443" class="InductiveConstructor">1#</a> <a id="446" class="Symbol">=</a> <a id="448" class="InductiveConstructor">suc</a> <a id="452" class="InductiveConstructor">zero</a>
<a id="457" class="Keyword">pattern</a> <a id="##"></a><a id="465" href="Data.AVL.Height.html#465" class="InductiveConstructor">##</a> <a id="468" class="Symbol">=</a> <a id="470" class="InductiveConstructor">suc</a> <a id="474" class="Symbol">(</a><a id="475" class="InductiveConstructor">suc</a> <a id="479" class="Symbol">())</a>

<a id="484" class="Comment">-- Addition.</a>

<a id="498" class="Keyword">infixl</a> <a id="505" class="Number">6</a> <a id="507" href="Data.AVL.Height.html#512" class="Function Operator">_⊕_</a>

<a id="_⊕_"></a><a id="512" href="Data.AVL.Height.html#512" class="Function Operator">_⊕_</a> <a id="516" class="Symbol">:</a> <a id="518" href="Data.AVL.Height.html#406" class="Function">ℕ₂</a> <a id="521" class="Symbol">→</a> <a id="523" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="525" class="Symbol">→</a> <a id="527" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a>
<a id="529" href="Data.AVL.Height.html#425" class="InductiveConstructor">0#</a> <a id="532" href="Data.AVL.Height.html#512" class="Function Operator">⊕</a> <a id="534" href="Data.AVL.Height.html#534" class="Bound">n</a> <a id="536" class="Symbol">=</a> <a id="538" href="Data.AVL.Height.html#534" class="Bound">n</a>
<a id="540" href="Data.AVL.Height.html#443" class="InductiveConstructor">1#</a> <a id="543" href="Data.AVL.Height.html#512" class="Function Operator">⊕</a> <a id="545" href="Data.AVL.Height.html#545" class="Bound">n</a> <a id="547" class="Symbol">=</a> <a id="549" class="Number">1</a> <a id="551" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="553" href="Data.AVL.Height.html#545" class="Bound">n</a>
<a id="555" href="Data.AVL.Height.html#465" class="InductiveConstructor">##</a> <a id="558" href="Data.AVL.Height.html#512" class="Function Operator">⊕</a> <a id="560" href="Data.AVL.Height.html#560" class="Bound">n</a>

<a id="563" class="Comment">-- pred[ i ⊕ n ] = pred (i ⊕ n).</a>

<a id="pred[_⊕_]"></a><a id="597" href="Data.AVL.Height.html#597" class="Function Operator">pred[_⊕_]</a> <a id="607" class="Symbol">:</a> <a id="609" href="Data.AVL.Height.html#406" class="Function">ℕ₂</a> <a id="612" class="Symbol">→</a> <a id="614" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="616" class="Symbol">→</a> <a id="618" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a>
<a id="620" href="Data.AVL.Height.html#597" class="Function Operator">pred[</a> <a id="626" href="Data.AVL.Height.html#626" class="Bound">i</a> <a id="628" href="Data.AVL.Height.html#597" class="Function Operator">⊕</a> <a id="630" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a>  <a id="636" href="Data.AVL.Height.html#597" class="Function Operator">]</a> <a id="638" class="Symbol">=</a> <a id="640" class="Number">0</a>
<a id="642" href="Data.AVL.Height.html#597" class="Function Operator">pred[</a> <a id="648" href="Data.AVL.Height.html#648" class="Bound">i</a> <a id="650" href="Data.AVL.Height.html#597" class="Function Operator">⊕</a> <a id="652" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="656" href="Data.AVL.Height.html#656" class="Bound">n</a> <a id="658" href="Data.AVL.Height.html#597" class="Function Operator">]</a> <a id="660" class="Symbol">=</a> <a id="662" href="Data.AVL.Height.html#648" class="Bound">i</a> <a id="664" href="Data.AVL.Height.html#512" class="Function Operator">⊕</a> <a id="666" href="Data.AVL.Height.html#656" class="Bound">n</a>

<a id="669" class="Keyword">infix</a> <a id="675" class="Number">4</a> <a id="677" href="Data.AVL.Height.html#947" class="Datatype Operator">_∼_⊔_</a>

<a id="684" class="Comment">-- If i ∼ j ⊔ m, then the difference between i and j is at most 1,</a>
<a id="751" class="Comment">-- and the maximum of i and j is m. _∼_⊔_ is used to record the</a>
<a id="815" class="Comment">-- balance factor of the AVL trees, and also to ensure that the</a>
<a id="879" class="Comment">-- absolute value of the balance factor is never more than 1.</a>

<a id="942" class="Keyword">data</a> <a id="_∼_⊔_"></a><a id="947" href="Data.AVL.Height.html#947" class="Datatype Operator">_∼_⊔_</a> <a id="953" class="Symbol">:</a> <a id="955" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="957" class="Symbol">→</a> <a id="959" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="961" class="Symbol">→</a> <a id="963" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="965" class="Symbol">→</a> <a id="967" class="PrimitiveType">Set</a> <a id="971" class="Keyword">where</a>
  <a id="_∼_⊔_.∼+"></a><a id="979" href="Data.AVL.Height.html#979" class="InductiveConstructor">∼+</a> <a id="982" class="Symbol">:</a> <a id="984" class="Symbol">∀</a> <a id="986" class="Symbol">{</a><a id="987" href="Data.AVL.Height.html#987" class="Bound">n</a><a id="988" class="Symbol">}</a> <a id="990" class="Symbol">→</a>     <a id="996" href="Data.AVL.Height.html#987" class="Bound">n</a> <a id="998" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1000" class="Number">1</a> <a id="1002" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1004" href="Data.AVL.Height.html#987" class="Bound">n</a> <a id="1006" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1008" class="Number">1</a> <a id="1010" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1012" href="Data.AVL.Height.html#987" class="Bound">n</a>
  <a id="_∼_⊔_.∼0"></a><a id="1016" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a> <a id="1019" class="Symbol">:</a> <a id="1021" class="Symbol">∀</a> <a id="1023" class="Symbol">{</a><a id="1024" href="Data.AVL.Height.html#1024" class="Bound">n</a><a id="1025" class="Symbol">}</a> <a id="1027" class="Symbol">→</a>     <a id="1033" href="Data.AVL.Height.html#1024" class="Bound">n</a> <a id="1035" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1037" href="Data.AVL.Height.html#1024" class="Bound">n</a>     <a id="1043" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1045" href="Data.AVL.Height.html#1024" class="Bound">n</a>
  <a id="_∼_⊔_.∼-"></a><a id="1049" href="Data.AVL.Height.html#1049" class="InductiveConstructor">∼-</a> <a id="1052" class="Symbol">:</a> <a id="1054" class="Symbol">∀</a> <a id="1056" class="Symbol">{</a><a id="1057" href="Data.AVL.Height.html#1057" class="Bound">n</a><a id="1058" class="Symbol">}</a> <a id="1060" class="Symbol">→</a> <a id="1062" class="Number">1</a> <a id="1064" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1066" href="Data.AVL.Height.html#1057" class="Bound">n</a> <a id="1068" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1070" href="Data.AVL.Height.html#1057" class="Bound">n</a>     <a id="1076" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1078" class="Number">1</a> <a id="1080" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1082" href="Data.AVL.Height.html#1057" class="Bound">n</a>

<a id="1085" class="Comment">-- Some lemmas.</a>

<a id="max∼"></a><a id="1102" href="Data.AVL.Height.html#1102" class="Function">max∼</a> <a id="1107" class="Symbol">:</a> <a id="1109" class="Symbol">∀</a> <a id="1111" class="Symbol">{</a><a id="1112" href="Data.AVL.Height.html#1112" class="Bound">i</a> <a id="1114" href="Data.AVL.Height.html#1114" class="Bound">j</a> <a id="1116" href="Data.AVL.Height.html#1116" class="Bound">m</a><a id="1117" class="Symbol">}</a> <a id="1119" class="Symbol">→</a> <a id="1121" href="Data.AVL.Height.html#1112" class="Bound">i</a> <a id="1123" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1125" href="Data.AVL.Height.html#1114" class="Bound">j</a> <a id="1127" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1129" href="Data.AVL.Height.html#1116" class="Bound">m</a> <a id="1131" class="Symbol">→</a> <a id="1133" href="Data.AVL.Height.html#1116" class="Bound">m</a> <a id="1135" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1137" href="Data.AVL.Height.html#1112" class="Bound">i</a> <a id="1139" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1141" href="Data.AVL.Height.html#1116" class="Bound">m</a>
<a id="1143" href="Data.AVL.Height.html#1102" class="Function">max∼</a> <a id="1148" href="Data.AVL.Height.html#979" class="InductiveConstructor">∼+</a> <a id="1151" class="Symbol">=</a> <a id="1153" href="Data.AVL.Height.html#1049" class="InductiveConstructor">∼-</a>
<a id="1156" href="Data.AVL.Height.html#1102" class="Function">max∼</a> <a id="1161" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a> <a id="1164" class="Symbol">=</a> <a id="1166" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a>
<a id="1169" href="Data.AVL.Height.html#1102" class="Function">max∼</a> <a id="1174" href="Data.AVL.Height.html#1049" class="InductiveConstructor">∼-</a> <a id="1177" class="Symbol">=</a> <a id="1179" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a>

<a id="∼max"></a><a id="1183" href="Data.AVL.Height.html#1183" class="Function">∼max</a> <a id="1188" class="Symbol">:</a> <a id="1190" class="Symbol">∀</a> <a id="1192" class="Symbol">{</a><a id="1193" href="Data.AVL.Height.html#1193" class="Bound">i</a> <a id="1195" href="Data.AVL.Height.html#1195" class="Bound">j</a> <a id="1197" href="Data.AVL.Height.html#1197" class="Bound">m</a><a id="1198" class="Symbol">}</a> <a id="1200" class="Symbol">→</a> <a id="1202" href="Data.AVL.Height.html#1193" class="Bound">i</a> <a id="1204" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1206" href="Data.AVL.Height.html#1195" class="Bound">j</a> <a id="1208" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1210" href="Data.AVL.Height.html#1197" class="Bound">m</a> <a id="1212" class="Symbol">→</a> <a id="1214" href="Data.AVL.Height.html#1195" class="Bound">j</a> <a id="1216" href="Data.AVL.Height.html#947" class="Datatype Operator">∼</a> <a id="1218" href="Data.AVL.Height.html#1197" class="Bound">m</a> <a id="1220" href="Data.AVL.Height.html#947" class="Datatype Operator">⊔</a> <a id="1222" href="Data.AVL.Height.html#1197" class="Bound">m</a>
<a id="1224" href="Data.AVL.Height.html#1183" class="Function">∼max</a> <a id="1229" href="Data.AVL.Height.html#979" class="InductiveConstructor">∼+</a> <a id="1232" class="Symbol">=</a> <a id="1234" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a>
<a id="1237" href="Data.AVL.Height.html#1183" class="Function">∼max</a> <a id="1242" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a> <a id="1245" class="Symbol">=</a> <a id="1247" href="Data.AVL.Height.html#1016" class="InductiveConstructor">∼0</a>
<a id="1250" href="Data.AVL.Height.html#1183" class="Function">∼max</a> <a id="1255" href="Data.AVL.Height.html#1049" class="InductiveConstructor">∼-</a> <a id="1258" class="Symbol">=</a> <a id="1260" href="Data.AVL.Height.html#979" class="InductiveConstructor">∼+</a>
</pre></body></html>