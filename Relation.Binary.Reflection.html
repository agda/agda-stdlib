<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Relation.Binary.Reflection</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Helpers intended to ease the development of &quot;tactics&quot; which use</a>
<a id="173" class="Comment">-- proof by reflection</a>
<a id="196" class="Comment">------------------------------------------------------------------------</a>

<a id="270" class="Symbol">{-#</a> <a id="274" class="Keyword">OPTIONS</a> <a id="282" class="Pragma">--without-K</a> <a id="294" class="Pragma">--safe</a> <a id="301" class="Symbol">#-}</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Data.Fin.html" class="Module">Data.Fin</a>
<a id="327" class="Keyword">open</a> <a id="332" class="Keyword">import</a> <a id="339" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="369" class="Symbol">as</a> <a id="372" class="Module">Vec</a>
<a id="376" class="Keyword">open</a> <a id="381" class="Keyword">import</a> <a id="388" href="Function.Core.html" class="Module">Function.Core</a>
<a id="402" class="Keyword">open</a> <a id="407" class="Keyword">import</a> <a id="414" href="Function.Equality.html" class="Module">Function.Equality</a> <a id="432" class="Keyword">using</a> <a id="438" class="Symbol">(</a><a id="439" href="Function.Equality.html#836" class="Field Operator">_⟨$⟩_</a><a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Function.Equivalence.html" class="Module">Function.Equivalence</a> <a id="479" class="Keyword">using</a> <a id="485" class="Symbol">(</a><a id="486" class="Keyword">module</a> <a id="493" href="Function.Equivalence.html#596" class="Module">Equivalence</a><a id="504" class="Symbol">)</a>
<a id="506" class="Keyword">open</a> <a id="511" class="Keyword">import</a> <a id="518" href="Level.html" class="Module">Level</a>
<a id="524" class="Keyword">open</a> <a id="529" class="Keyword">import</a> <a id="536" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="552" class="Keyword">import</a> <a id="559" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="597" class="Symbol">as</a> <a id="600" class="Module">P</a>

<a id="603" class="Comment">-- Think of the parameters as follows:</a>
<a id="642" class="Comment">--</a>
<a id="645" class="Comment">-- * Expr:    A representation of code.</a>
<a id="685" class="Comment">-- * var:     The Expr type should support a notion of variables.</a>
<a id="751" class="Comment">-- * ⟦_⟧:     Computes the semantics of an expression. Takes an</a>
<a id="815" class="Comment">--            environment mapping variables to something.</a>
<a id="873" class="Comment">-- * ⟦_⇓⟧:    Computes the semantics of the normal form of the</a>
<a id="936" class="Comment">--            expression.</a>
<a id="962" class="Comment">-- * correct: Normalisation preserves the semantics.</a>
<a id="1015" class="Comment">--</a>
<a id="1018" class="Comment">-- Given these parameters two &quot;tactics&quot; are returned, prove and solve.</a>
<a id="1089" class="Comment">--</a>
<a id="1092" class="Comment">-- For an example of the use of this module, see Algebra.RingSolver.</a>

<a id="1162" class="Keyword">module</a> <a id="1169" href="Relation.Binary.Reflection.html" class="Module">Relation.Binary.Reflection</a>
         <a id="1205" class="Symbol">{</a><a id="1206" href="Relation.Binary.Reflection.html#1206" class="Bound">e</a> <a id="1208" href="Relation.Binary.Reflection.html#1208" class="Bound">a</a> <a id="1210" href="Relation.Binary.Reflection.html#1210" class="Bound">s</a><a id="1211" class="Symbol">}</a>
         <a id="1222" class="Symbol">{</a><a id="1223" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="1228" class="Symbol">:</a> <a id="1230" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="1232" class="Symbol">→</a> <a id="1234" class="PrimitiveType">Set</a> <a id="1238" href="Relation.Binary.Reflection.html#1206" class="Bound">e</a><a id="1239" class="Symbol">}</a> <a id="1241" class="Symbol">{</a><a id="1242" href="Relation.Binary.Reflection.html#1242" class="Bound">A</a> <a id="1244" class="Symbol">:</a> <a id="1246" class="PrimitiveType">Set</a> <a id="1250" href="Relation.Binary.Reflection.html#1208" class="Bound">a</a><a id="1251" class="Symbol">}</a>
         <a id="1262" class="Symbol">(</a><a id="1263" href="Relation.Binary.Reflection.html#1263" class="Bound">Sem</a> <a id="1267" class="Symbol">:</a> <a id="1269" href="Relation.Binary.html#1975" class="Record">Setoid</a> <a id="1276" href="Relation.Binary.Reflection.html#1208" class="Bound">a</a> <a id="1278" href="Relation.Binary.Reflection.html#1210" class="Bound">s</a><a id="1279" class="Symbol">)</a>
         <a id="1290" class="Symbol">(</a><a id="1291" href="Relation.Binary.Reflection.html#1291" class="Bound">var</a> <a id="1295" class="Symbol">:</a> <a id="1297" class="Symbol">∀</a> <a id="1299" class="Symbol">{</a><a id="1300" href="Relation.Binary.Reflection.html#1300" class="Bound">n</a><a id="1301" class="Symbol">}</a> <a id="1303" class="Symbol">→</a> <a id="1305" href="Data.Fin.Base.html#1005" class="Datatype">Fin</a> <a id="1309" href="Relation.Binary.Reflection.html#1300" class="Bound">n</a> <a id="1311" class="Symbol">→</a> <a id="1313" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="1318" href="Relation.Binary.Reflection.html#1300" class="Bound">n</a><a id="1319" class="Symbol">)</a>
         <a id="1330" class="Symbol">(</a><a id="1331" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦_⟧</a> <a id="1335" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦_⇓⟧</a> <a id="1340" class="Symbol">:</a> <a id="1342" class="Symbol">∀</a> <a id="1344" class="Symbol">{</a><a id="1345" href="Relation.Binary.Reflection.html#1345" class="Bound">n</a><a id="1346" class="Symbol">}</a> <a id="1348" class="Symbol">→</a> <a id="1350" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="1355" href="Relation.Binary.Reflection.html#1345" class="Bound">n</a> <a id="1357" class="Symbol">→</a> <a id="1359" href="Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="1363" href="Relation.Binary.Reflection.html#1242" class="Bound">A</a> <a id="1365" href="Relation.Binary.Reflection.html#1345" class="Bound">n</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Relation.Binary.html#2038" class="Field">Setoid.Carrier</a> <a id="1384" href="Relation.Binary.Reflection.html#1263" class="Bound">Sem</a><a id="1387" class="Symbol">)</a>
         <a id="1398" class="Symbol">(</a><a id="1399" href="Relation.Binary.Reflection.html#1399" class="Bound">correct</a> <a id="1407" class="Symbol">:</a> <a id="1409" class="Symbol">∀</a> <a id="1411" class="Symbol">{</a><a id="1412" href="Relation.Binary.Reflection.html#1412" class="Bound">n</a><a id="1413" class="Symbol">}</a> <a id="1415" class="Symbol">(</a><a id="1416" href="Relation.Binary.Reflection.html#1416" class="Bound">e</a> <a id="1418" class="Symbol">:</a> <a id="1420" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="1425" href="Relation.Binary.Reflection.html#1412" class="Bound">n</a><a id="1426" class="Symbol">)</a> <a id="1428" href="Relation.Binary.Reflection.html#1428" class="Bound">ρ</a> <a id="1430" class="Symbol">→</a>
                    <a id="1452" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="1454" href="Relation.Binary.Reflection.html#1416" class="Bound">e</a> <a id="1456" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="1459" href="Relation.Binary.Reflection.html#1428" class="Bound">ρ</a> <a id="1461" href="Function.Core.html#4000" class="Function Operator">⟨</a> <a id="1463" href="Relation.Binary.html#2064" class="Field Operator">Setoid._≈_</a> <a id="1474" href="Relation.Binary.Reflection.html#1263" class="Bound">Sem</a> <a id="1478" href="Function.Core.html#4000" class="Function Operator">⟩</a> <a id="1480" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="1482" href="Relation.Binary.Reflection.html#1416" class="Bound">e</a> <a id="1484" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="1486" href="Relation.Binary.Reflection.html#1428" class="Bound">ρ</a><a id="1487" class="Symbol">)</a>
         <a id="1498" class="Keyword">where</a>

<a id="1505" class="Keyword">open</a> <a id="1510" class="Keyword">import</a> <a id="1517" href="Data.Vec.N-ary.html" class="Module">Data.Vec.N-ary</a>
<a id="1532" class="Keyword">open</a> <a id="1537" class="Keyword">import</a> <a id="1544" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1557" class="Keyword">import</a> <a id="1564" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="1597" class="Symbol">as</a> <a id="1600" class="Module">Eq</a>

<a id="1604" class="Keyword">open</a> <a id="1609" href="Relation.Binary.html#1975" class="Module">Setoid</a> <a id="1616" href="Relation.Binary.Reflection.html#1263" class="Bound">Sem</a>
<a id="1620" class="Keyword">open</a> <a id="1625" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Eq</a> <a id="1628" href="Relation.Binary.Reflection.html#1263" class="Bound">Sem</a>

<a id="1633" class="Comment">-- If two normalised expressions are semantically equal, then their</a>
<a id="1701" class="Comment">-- non-normalised forms are also equal.</a>

<a id="prove"></a><a id="1742" href="Relation.Binary.Reflection.html#1742" class="Function">prove</a> <a id="1748" class="Symbol">:</a> <a id="1750" class="Symbol">∀</a> <a id="1752" class="Symbol">{</a><a id="1753" href="Relation.Binary.Reflection.html#1753" class="Bound">n</a><a id="1754" class="Symbol">}</a> <a id="1756" class="Symbol">(</a><a id="1757" href="Relation.Binary.Reflection.html#1757" class="Bound">ρ</a> <a id="1759" class="Symbol">:</a> <a id="1761" href="Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="1765" href="Relation.Binary.Reflection.html#1242" class="Bound">A</a> <a id="1767" href="Relation.Binary.Reflection.html#1753" class="Bound">n</a><a id="1768" class="Symbol">)</a> <a id="1770" href="Relation.Binary.Reflection.html#1770" class="Bound">e₁</a> <a id="1773" href="Relation.Binary.Reflection.html#1773" class="Bound">e₂</a> <a id="1776" class="Symbol">→</a>
        <a id="1786" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="1788" href="Relation.Binary.Reflection.html#1770" class="Bound">e₁</a> <a id="1791" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="1794" href="Relation.Binary.Reflection.html#1757" class="Bound">ρ</a> <a id="1796" href="Relation.Binary.html#2064" class="Function Operator">≈</a> <a id="1798" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="1800" href="Relation.Binary.Reflection.html#1773" class="Bound">e₂</a> <a id="1803" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="1806" href="Relation.Binary.Reflection.html#1757" class="Bound">ρ</a> <a id="1808" class="Symbol">→</a>
        <a id="1818" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="1820" href="Relation.Binary.Reflection.html#1770" class="Bound">e₁</a>  <a id="1824" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="1826" href="Relation.Binary.Reflection.html#1757" class="Bound">ρ</a> <a id="1828" href="Relation.Binary.html#2064" class="Function Operator">≈</a> <a id="1830" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="1832" href="Relation.Binary.Reflection.html#1773" class="Bound">e₂</a>  <a id="1836" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="1838" href="Relation.Binary.Reflection.html#1757" class="Bound">ρ</a>
<a id="1840" href="Relation.Binary.Reflection.html#1742" class="Function">prove</a> <a id="1846" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a> <a id="1848" href="Relation.Binary.Reflection.html#1848" class="Bound">e₁</a> <a id="1851" href="Relation.Binary.Reflection.html#1851" class="Bound">e₂</a> <a id="1854" href="Relation.Binary.Reflection.html#1854" class="Bound">hyp</a> <a id="1858" class="Symbol">=</a> <a id="1860" href="Relation.Binary.Reasoning.Base.Single.html#866" class="Function Operator">begin</a>
  <a id="1868" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="1870" href="Relation.Binary.Reflection.html#1848" class="Bound">e₁</a>  <a id="1874" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="1876" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a> <a id="1878" href="Relation.Binary.Reasoning.Base.Single.html#932" class="Function Operator">≈⟨</a> <a id="1881" href="Relation.Binary.Core.html#7051" class="Function">sym</a> <a id="1885" class="Symbol">(</a><a id="1886" href="Relation.Binary.Reflection.html#1399" class="Bound">correct</a> <a id="1894" href="Relation.Binary.Reflection.html#1848" class="Bound">e₁</a> <a id="1897" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a><a id="1898" class="Symbol">)</a> <a id="1900" href="Relation.Binary.Reasoning.Base.Single.html#932" class="Function Operator">⟩</a>
  <a id="1904" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="1906" href="Relation.Binary.Reflection.html#1848" class="Bound">e₁</a> <a id="1909" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="1912" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a> <a id="1914" href="Relation.Binary.Reasoning.Base.Single.html#932" class="Function Operator">≈⟨</a> <a id="1917" href="Relation.Binary.Reflection.html#1854" class="Bound">hyp</a> <a id="1921" href="Relation.Binary.Reasoning.Base.Single.html#932" class="Function Operator">⟩</a>
  <a id="1925" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="1927" href="Relation.Binary.Reflection.html#1851" class="Bound">e₂</a> <a id="1930" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="1933" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a> <a id="1935" href="Relation.Binary.Reasoning.Base.Single.html#932" class="Function Operator">≈⟨</a> <a id="1938" href="Relation.Binary.Reflection.html#1399" class="Bound">correct</a> <a id="1946" href="Relation.Binary.Reflection.html#1851" class="Bound">e₂</a> <a id="1949" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a> <a id="1951" href="Relation.Binary.Reasoning.Base.Single.html#932" class="Function Operator">⟩</a>
  <a id="1955" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="1957" href="Relation.Binary.Reflection.html#1851" class="Bound">e₂</a>  <a id="1961" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="1963" href="Relation.Binary.Reflection.html#1846" class="Bound">ρ</a> <a id="1965" href="Relation.Binary.Reasoning.Base.Single.html#1302" class="Function Operator">∎</a>

<a id="1968" class="Comment">-- Applies the function to all possible &quot;variables&quot;.</a>

<a id="close"></a><a id="2022" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2028" class="Symbol">:</a> <a id="2030" class="Symbol">∀</a> <a id="2032" class="Symbol">{</a><a id="2033" href="Relation.Binary.Reflection.html#2033" class="Bound">A</a> <a id="2035" class="Symbol">:</a> <a id="2037" class="PrimitiveType">Set</a> <a id="2041" href="Relation.Binary.Reflection.html#1206" class="Bound">e</a><a id="2042" class="Symbol">}</a> <a id="2044" href="Relation.Binary.Reflection.html#2044" class="Bound">n</a> <a id="2046" class="Symbol">→</a> <a id="2048" href="Data.Vec.N-ary.html#946" class="Function">N-ary</a> <a id="2054" href="Relation.Binary.Reflection.html#2044" class="Bound">n</a> <a id="2056" class="Symbol">(</a><a id="2057" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="2062" href="Relation.Binary.Reflection.html#2044" class="Bound">n</a><a id="2063" class="Symbol">)</a> <a id="2065" href="Relation.Binary.Reflection.html#2033" class="Bound">A</a> <a id="2067" class="Symbol">→</a> <a id="2069" href="Relation.Binary.Reflection.html#2033" class="Bound">A</a>
<a id="2071" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2077" href="Relation.Binary.Reflection.html#2077" class="Bound">n</a> <a id="2079" href="Relation.Binary.Reflection.html#2079" class="Bound">f</a> <a id="2081" class="Symbol">=</a> <a id="2083" href="Relation.Binary.Reflection.html#2079" class="Bound">f</a> <a id="2085" href="Data.Vec.N-ary.html#1279" class="Function Operator">$ⁿ</a> <a id="2088" href="Data.Vec.Base.html#2466" class="Function">Vec.map</a> <a id="2096" href="Relation.Binary.Reflection.html#1291" class="Bound">var</a> <a id="2100" class="Symbol">(</a><a id="2101" href="Data.Vec.Base.html#5890" class="Function">allFin</a> <a id="2108" href="Relation.Binary.Reflection.html#2077" class="Bound">n</a><a id="2109" class="Symbol">)</a>

<a id="2112" class="Comment">-- A variant of prove which should in many cases be easier to use,</a>
<a id="2179" class="Comment">-- because variables and environments are handled in a less explicit</a>
<a id="2248" class="Comment">-- way.</a>
<a id="2256" class="Comment">--</a>
<a id="2259" class="Comment">-- If the type signature of solve is a bit daunting, then it may be</a>
<a id="2327" class="Comment">-- helpful to instantiate n with a small natural number and normalise</a>
<a id="2397" class="Comment">-- the remainder of the type.</a>

<a id="solve"></a><a id="2428" href="Relation.Binary.Reflection.html#2428" class="Function">solve</a> <a id="2434" class="Symbol">:</a> <a id="2436" class="Symbol">∀</a> <a id="2438" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2440" class="Symbol">(</a><a id="2441" href="Relation.Binary.Reflection.html#2441" class="Bound">f</a> <a id="2443" class="Symbol">:</a> <a id="2445" href="Data.Vec.N-ary.html#946" class="Function">N-ary</a> <a id="2451" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2453" class="Symbol">(</a><a id="2454" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="2459" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a><a id="2460" class="Symbol">)</a> <a id="2462" class="Symbol">(</a><a id="2463" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="2468" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2470" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2472" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="2477" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a><a id="2478" class="Symbol">))</a> <a id="2481" class="Symbol">→</a>
  <a id="2485" href="Data.Vec.N-ary.html#2289" class="Function">Eqʰ</a> <a id="2489" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2491" href="Relation.Binary.html#2064" class="Function Operator">_≈_</a> <a id="2495" class="Symbol">(</a><a id="2496" href="Data.Vec.N-ary.html#1157" class="Function">curryⁿ</a> <a id="2503" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="2505" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="2511" class="Symbol">(</a><a id="2512" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2518" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2520" href="Relation.Binary.Reflection.html#2441" class="Bound">f</a><a id="2521" class="Symbol">)</a> <a id="2523" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a><a id="2525" class="Symbol">)</a> <a id="2527" class="Symbol">(</a><a id="2528" href="Data.Vec.N-ary.html#1157" class="Function">curryⁿ</a> <a id="2535" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="2537" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="2543" class="Symbol">(</a><a id="2544" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2550" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2552" href="Relation.Binary.Reflection.html#2441" class="Bound">f</a><a id="2553" class="Symbol">)</a> <a id="2555" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a><a id="2557" class="Symbol">)</a> <a id="2559" class="Symbol">→</a>
  <a id="2563" href="Data.Vec.N-ary.html#2045" class="Function">Eq</a>  <a id="2567" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2569" href="Relation.Binary.html#2064" class="Function Operator">_≈_</a> <a id="2573" class="Symbol">(</a><a id="2574" href="Data.Vec.N-ary.html#1157" class="Function">curryⁿ</a> <a id="2581" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="2583" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="2589" class="Symbol">(</a><a id="2590" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2596" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2598" href="Relation.Binary.Reflection.html#2441" class="Bound">f</a><a id="2599" class="Symbol">)</a>  <a id="2602" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a><a id="2603" class="Symbol">)</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Data.Vec.N-ary.html#1157" class="Function">curryⁿ</a> <a id="2613" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="2615" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="2621" class="Symbol">(</a><a id="2622" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2628" href="Relation.Binary.Reflection.html#2438" class="Bound">n</a> <a id="2630" href="Relation.Binary.Reflection.html#2441" class="Bound">f</a><a id="2631" class="Symbol">)</a>  <a id="2634" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a><a id="2635" class="Symbol">)</a>
<a id="2637" href="Relation.Binary.Reflection.html#2428" class="Function">solve</a> <a id="2643" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2645" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a> <a id="2647" href="Relation.Binary.Reflection.html#2647" class="Bound">hyp</a> <a id="2651" class="Symbol">=</a>
  <a id="2655" href="Data.Vec.N-ary.html#4046" class="Function">curryⁿ-cong</a> <a id="2667" href="Relation.Binary.html#2064" class="Function Operator">_≈_</a> <a id="2671" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="2673" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="2679" class="Symbol">(</a><a id="2680" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2686" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2688" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a><a id="2689" class="Symbol">)</a> <a id="2691" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="2693" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="2695" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="2701" class="Symbol">(</a><a id="2702" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2708" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2710" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a><a id="2711" class="Symbol">)</a> <a id="2713" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a>
    <a id="2719" class="Symbol">(λ</a> <a id="2722" href="Relation.Binary.Reflection.html#2722" class="Bound">ρ</a> <a id="2724" class="Symbol">→</a> <a id="2726" href="Relation.Binary.Reflection.html#1742" class="Function">prove</a> <a id="2732" href="Relation.Binary.Reflection.html#2722" class="Bound">ρ</a> <a id="2734" class="Symbol">(</a><a id="2735" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="2741" class="Symbol">(</a><a id="2742" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2748" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2750" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a><a id="2751" class="Symbol">))</a> <a id="2754" class="Symbol">(</a><a id="2755" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="2761" class="Symbol">(</a><a id="2762" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2768" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2770" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a><a id="2771" class="Symbol">))</a>
             <a id="2787" class="Symbol">(</a><a id="2788" href="Data.Vec.N-ary.html#4340" class="Function">curryⁿ-cong⁻¹</a> <a id="2802" href="Relation.Binary.html#2064" class="Function Operator">_≈_</a>
                <a id="2822" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="2824" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="2830" class="Symbol">(</a><a id="2831" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2837" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2839" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a><a id="2840" class="Symbol">)</a> <a id="2842" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="2845" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="2847" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="2853" class="Symbol">(</a><a id="2854" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="2860" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2862" href="Relation.Binary.Reflection.html#2645" class="Bound">f</a><a id="2863" class="Symbol">)</a> <a id="2865" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a>
                <a id="2884" class="Symbol">(</a><a id="2885" href="Data.Vec.N-ary.html#5365" class="Function">Eqʰ-to-Eq</a> <a id="2895" href="Relation.Binary.Reflection.html#2643" class="Bound">n</a> <a id="2897" href="Relation.Binary.html#2064" class="Function Operator">_≈_</a> <a id="2901" href="Relation.Binary.Reflection.html#2647" class="Bound">hyp</a><a id="2904" class="Symbol">)</a> <a id="2906" href="Relation.Binary.Reflection.html#2722" class="Bound">ρ</a><a id="2907" class="Symbol">))</a>

<a id="2911" class="Comment">-- A variant of solve which does not require that the normal form</a>
<a id="2977" class="Comment">-- equality is proved for an arbitrary environment.</a>

<a id="solve₁"></a><a id="3030" href="Relation.Binary.Reflection.html#3030" class="Function">solve₁</a> <a id="3037" class="Symbol">:</a> <a id="3039" class="Symbol">∀</a> <a id="3041" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3043" class="Symbol">(</a><a id="3044" href="Relation.Binary.Reflection.html#3044" class="Bound">f</a> <a id="3046" class="Symbol">:</a> <a id="3048" href="Data.Vec.N-ary.html#946" class="Function">N-ary</a> <a id="3054" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3056" class="Symbol">(</a><a id="3057" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3062" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a><a id="3063" class="Symbol">)</a> <a id="3065" class="Symbol">(</a><a id="3066" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3071" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3073" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3075" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3080" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a><a id="3081" class="Symbol">))</a> <a id="3084" class="Symbol">→</a>
         <a id="3095" href="Data.Vec.N-ary.html#1514" class="Function">∀ⁿ</a> <a id="3098" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3100" class="Symbol">(</a><a id="3101" href="Data.Vec.N-ary.html#1157" class="Function">curryⁿ</a> <a id="3108" class="Symbol">λ</a> <a id="3110" href="Relation.Binary.Reflection.html#3110" class="Bound">ρ</a> <a id="3112" class="Symbol">→</a>
                 <a id="3131" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="3133" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="3139" class="Symbol">(</a><a id="3140" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="3146" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3148" href="Relation.Binary.Reflection.html#3044" class="Bound">f</a><a id="3149" class="Symbol">)</a> <a id="3151" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="3154" href="Relation.Binary.Reflection.html#3110" class="Bound">ρ</a> <a id="3156" href="Relation.Binary.html#2064" class="Function Operator">≈</a> <a id="3158" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⟦</a> <a id="3160" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="3166" class="Symbol">(</a><a id="3167" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="3173" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3175" href="Relation.Binary.Reflection.html#3044" class="Bound">f</a><a id="3176" class="Symbol">)</a> <a id="3178" href="Relation.Binary.Reflection.html#1335" class="Bound Operator">⇓⟧</a> <a id="3181" href="Relation.Binary.Reflection.html#3110" class="Bound">ρ</a> <a id="3183" class="Symbol">→</a>
                 <a id="3202" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="3204" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="3210" class="Symbol">(</a><a id="3211" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="3217" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3219" href="Relation.Binary.Reflection.html#3044" class="Bound">f</a><a id="3220" class="Symbol">)</a>  <a id="3223" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="3225" href="Relation.Binary.Reflection.html#3110" class="Bound">ρ</a> <a id="3227" href="Relation.Binary.html#2064" class="Function Operator">≈</a> <a id="3229" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟦</a> <a id="3231" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="3237" class="Symbol">(</a><a id="3238" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="3244" href="Relation.Binary.Reflection.html#3041" class="Bound">n</a> <a id="3246" href="Relation.Binary.Reflection.html#3044" class="Bound">f</a><a id="3247" class="Symbol">)</a>  <a id="3250" href="Relation.Binary.Reflection.html#1331" class="Bound Operator">⟧</a> <a id="3252" href="Relation.Binary.Reflection.html#3110" class="Bound">ρ</a><a id="3253" class="Symbol">)</a>
<a id="3255" href="Relation.Binary.Reflection.html#3030" class="Function">solve₁</a> <a id="3262" href="Relation.Binary.Reflection.html#3262" class="Bound">n</a> <a id="3264" href="Relation.Binary.Reflection.html#3264" class="Bound">f</a> <a id="3266" class="Symbol">=</a>
  <a id="3270" href="Function.Equivalence.html#767" class="Field">Equivalence.from</a> <a id="3287" class="Symbol">(</a><a id="3288" href="Data.Vec.N-ary.html#3012" class="Function">uncurry-∀ⁿ</a> <a id="3299" href="Relation.Binary.Reflection.html#3262" class="Bound">n</a><a id="3300" class="Symbol">)</a> <a id="3302" href="Function.Equality.html#836" class="Field Operator">⟨$⟩</a> <a id="3306" class="Symbol">λ</a> <a id="3308" href="Relation.Binary.Reflection.html#3308" class="Bound">ρ</a> <a id="3310" class="Symbol">→</a>
    <a id="3316" href="Relation.Binary.PropositionalEquality.Core.html#1036" class="Function">P.subst</a> <a id="3324" href="Function.Core.html#787" class="Function">id</a> <a id="3327" class="Symbol">(</a><a id="3328" href="Relation.Binary.PropositionalEquality.Core.html#940" class="Function">P.sym</a> <a id="3334" class="Symbol">(</a><a id="3335" href="Data.Vec.N-ary.html#2613" class="Function">left-inverse</a> <a id="3348" class="Symbol">(λ</a> <a id="3351" href="Relation.Binary.Reflection.html#3351" class="Bound">_</a> <a id="3353" class="Symbol">→</a> <a id="3355" class="Symbol">_</a> <a id="3357" href="Relation.Binary.html#2064" class="Function Operator">≈</a> <a id="3359" class="Symbol">_</a> <a id="3361" class="Symbol">→</a> <a id="3363" class="Symbol">_</a> <a id="3365" href="Relation.Binary.html#2064" class="Function Operator">≈</a> <a id="3367" class="Symbol">_)</a> <a id="3370" href="Relation.Binary.Reflection.html#3308" class="Bound">ρ</a><a id="3371" class="Symbol">))</a>
      <a id="3380" class="Symbol">(</a><a id="3381" href="Relation.Binary.Reflection.html#1742" class="Function">prove</a> <a id="3387" href="Relation.Binary.Reflection.html#3308" class="Bound">ρ</a> <a id="3389" class="Symbol">(</a><a id="3390" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="3396" class="Symbol">(</a><a id="3397" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="3403" href="Relation.Binary.Reflection.html#3262" class="Bound">n</a> <a id="3405" href="Relation.Binary.Reflection.html#3264" class="Bound">f</a><a id="3406" class="Symbol">))</a> <a id="3409" class="Symbol">(</a><a id="3410" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="3416" class="Symbol">(</a><a id="3417" href="Relation.Binary.Reflection.html#2022" class="Function">close</a> <a id="3423" href="Relation.Binary.Reflection.html#3262" class="Bound">n</a> <a id="3425" href="Relation.Binary.Reflection.html#3264" class="Bound">f</a><a id="3426" class="Symbol">)))</a>

<a id="3431" class="Comment">-- A variant of _,_ which is intended to make uses of solve and solve₁</a>
<a id="3502" class="Comment">-- look a bit nicer.</a>

<a id="3524" class="Keyword">infix</a> <a id="3530" class="Number">4</a> <a id="3532" href="Relation.Binary.Reflection.html#3537" class="Function Operator">_⊜_</a>

<a id="_⊜_"></a><a id="3537" href="Relation.Binary.Reflection.html#3537" class="Function Operator">_⊜_</a> <a id="3541" class="Symbol">:</a> <a id="3543" class="Symbol">∀</a> <a id="3545" class="Symbol">{</a><a id="3546" href="Relation.Binary.Reflection.html#3546" class="Bound">n</a><a id="3547" class="Symbol">}</a> <a id="3549" class="Symbol">→</a> <a id="3551" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3556" href="Relation.Binary.Reflection.html#3546" class="Bound">n</a> <a id="3558" class="Symbol">→</a> <a id="3560" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3565" href="Relation.Binary.Reflection.html#3546" class="Bound">n</a> <a id="3567" class="Symbol">→</a> <a id="3569" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3574" href="Relation.Binary.Reflection.html#3546" class="Bound">n</a> <a id="3576" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3578" href="Relation.Binary.Reflection.html#1223" class="Bound">Expr</a> <a id="3583" href="Relation.Binary.Reflection.html#3546" class="Bound">n</a>
<a id="3585" href="Relation.Binary.Reflection.html#3537" class="Function Operator">_⊜_</a> <a id="3589" class="Symbol">=</a> <a id="3591" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">_,_</a>
</pre></body></html>