<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Text.Printf</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Printf</a>
<a id="116" class="Comment">------------------------------------------------------------------------</a>

<a id="190" class="Symbol">{-#</a> <a id="194" class="Keyword">OPTIONS</a> <a id="202" class="Pragma">--without-K</a> <a id="214" class="Pragma">--safe</a> <a id="221" class="Symbol">#-}</a>

<a id="226" class="Keyword">module</a> <a id="233" href="Text.Printf.html" class="Module">Text.Printf</a> <a id="245" class="Keyword">where</a>

<a id="252" class="Keyword">open</a> <a id="257" class="Keyword">import</a> <a id="264" href="Level.html" class="Module">Level</a> <a id="270" class="Keyword">using</a> <a id="276" class="Symbol">(</a><a id="277" href="Level.html#512" class="Function">0ℓ</a><a id="279" class="Symbol">;</a> <a id="281" href="Level.html#400" class="Record">Lift</a><a id="285" class="Symbol">)</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="314" class="Symbol">as</a> <a id="317" class="Module">List</a> <a id="322" class="Keyword">using</a> <a id="328" class="Symbol">(</a><a id="329" href="Agda.Builtin.List.html#121" class="Datatype">List</a><a id="333" class="Symbol">;</a> <a id="335" href="Data.List.Base.html#8786" class="InductiveConstructor">[]</a><a id="337" class="Symbol">;</a> <a id="339" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">_∷_</a><a id="342" class="Symbol">)</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="370" class="Keyword">using</a> <a id="376" class="Symbol">(</a><a id="377" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="378" class="Symbol">)</a>
<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Data.Product.html" class="Module">Data.Product</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Data.Product.Nary.NonDependent.html" class="Module">Data.Product.Nary.NonDependent</a>
<a id="448" class="Keyword">open</a> <a id="453" class="Keyword">import</a> <a id="460" href="Data.String.Base.html" class="Module">Data.String.Base</a>
<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Data.Sum.Base.html" class="Module">Data.Sum.Base</a> <a id="503" class="Keyword">using</a> <a id="509" class="Symbol">(</a><a id="510" href="Data.Sum.Base.html#612" class="Datatype Operator">_⊎_</a><a id="513" class="Symbol">;</a> <a id="515" href="Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a><a id="519" class="Symbol">;</a> <a id="521" href="Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a><a id="525" class="Symbol">)</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="549" class="Keyword">using</a> <a id="555" class="Symbol">(</a><a id="556" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a><a id="557" class="Symbol">)</a>
<a id="559" class="Keyword">open</a> <a id="564" class="Keyword">import</a> <a id="571" href="Function.Nary.NonDependent.html" class="Module">Function.Nary.NonDependent</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Function.html" class="Module">Function</a>
<a id="619" class="Keyword">open</a> <a id="624" class="Keyword">import</a> <a id="631" href="Strict.html" class="Module">Strict</a>

<a id="639" class="Keyword">import</a> <a id="646" href="Data.Char.Base.html" class="Module">Data.Char.Base</a> <a id="661" class="Symbol">as</a> <a id="664" class="Module">Cₛ</a>
<a id="667" class="Keyword">import</a> <a id="674" href="Data.Integer.html" class="Module">Data.Integer</a>   <a id="689" class="Symbol">as</a> <a id="692" class="Module">ℤₛ</a>
<a id="695" class="Keyword">import</a> <a id="702" href="Data.Float.html" class="Module">Data.Float</a>     <a id="717" class="Symbol">as</a> <a id="720" class="Module">Fₛ</a>
<a id="723" class="Keyword">import</a> <a id="730" href="Data.Nat.Show.html" class="Module">Data.Nat.Show</a>  <a id="745" class="Symbol">as</a> <a id="748" class="Module">ℕₛ</a>

<a id="752" class="Keyword">open</a> <a id="757" class="Keyword">import</a> <a id="764" href="Text.Format.html" class="Module">Text.Format</a> <a id="776" class="Symbol">as</a> <a id="779" class="Module">Format</a> <a id="786" class="Keyword">hiding</a> <a id="793" class="Symbol">(</a><a id="794" href="Text.Format.html#1666" class="Datatype">Error</a><a id="799" class="Symbol">)</a>

<a id="assemble"></a><a id="802" href="Text.Printf.html#802" class="Function">assemble</a> <a id="811" class="Symbol">:</a> <a id="813" class="Symbol">∀</a> <a id="815" href="Text.Printf.html#815" class="Bound">fmt</a> <a id="819" class="Symbol">→</a> <a id="821" href="Data.Product.Nary.NonDependent.html#1609" class="Function">Product⊤</a> <a id="830" class="Symbol">_</a> <a id="832" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="834" href="Text.Printf.html#815" class="Bound">fmt</a> <a id="838" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="840" class="Symbol">→</a> <a id="842" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="847" href="Agda.Builtin.String.html#206" class="Postulate">String</a>
<a id="854" href="Text.Printf.html#802" class="Function">assemble</a> <a id="863" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>              <a id="879" href="Text.Printf.html#879" class="Bound">vs</a>       <a id="888" class="Symbol">=</a> <a id="890" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>
<a id="893" href="Text.Printf.html#802" class="Function">assemble</a> <a id="902" class="Symbol">(</a><a id="903" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a>      <a id="911" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="913" href="Text.Printf.html#913" class="Bound">fmt</a><a id="916" class="Symbol">)</a> <a id="918" class="Symbol">(</a><a id="919" href="Text.Printf.html#919" class="Bound">n</a> <a id="921" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="923" href="Text.Printf.html#923" class="Bound">vs</a><a id="925" class="Symbol">)</a> <a id="927" class="Symbol">=</a> <a id="929" href="Data.Nat.Show.html#1071" class="Function">ℕₛ.show</a> <a id="937" href="Text.Printf.html#919" class="Bound">n</a>  <a id="940" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="942" href="Text.Printf.html#802" class="Function">assemble</a> <a id="951" href="Text.Printf.html#913" class="Bound">fmt</a> <a id="955" href="Text.Printf.html#923" class="Bound">vs</a>
<a id="958" href="Text.Printf.html#802" class="Function">assemble</a> <a id="967" class="Symbol">(</a><a id="968" href="Text.Format.html#883" class="InductiveConstructor">`ℤ</a>      <a id="976" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="978" href="Text.Printf.html#978" class="Bound">fmt</a><a id="981" class="Symbol">)</a> <a id="983" class="Symbol">(</a><a id="984" href="Text.Printf.html#984" class="Bound">z</a> <a id="986" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="988" href="Text.Printf.html#988" class="Bound">vs</a><a id="990" class="Symbol">)</a> <a id="992" class="Symbol">=</a> <a id="994" href="Data.Integer.html#699" class="Function">ℤₛ.show</a> <a id="1002" href="Text.Printf.html#984" class="Bound">z</a>  <a id="1005" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1007" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1016" href="Text.Printf.html#978" class="Bound">fmt</a> <a id="1020" href="Text.Printf.html#988" class="Bound">vs</a>
<a id="1023" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1032" class="Symbol">(</a><a id="1033" href="Text.Format.html#886" class="InductiveConstructor">`Float</a>  <a id="1041" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1043" href="Text.Printf.html#1043" class="Bound">fmt</a><a id="1046" class="Symbol">)</a> <a id="1048" class="Symbol">(</a><a id="1049" href="Text.Printf.html#1049" class="Bound">f</a> <a id="1051" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1053" href="Text.Printf.html#1053" class="Bound">vs</a><a id="1055" class="Symbol">)</a> <a id="1057" class="Symbol">=</a> <a id="1059" href="Data.Float.html#593" class="Function">Fₛ.show</a> <a id="1067" href="Text.Printf.html#1049" class="Bound">f</a>  <a id="1070" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1072" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1081" href="Text.Printf.html#1043" class="Bound">fmt</a> <a id="1085" href="Text.Printf.html#1053" class="Bound">vs</a>
<a id="1088" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1097" class="Symbol">(</a><a id="1098" href="Text.Format.html#893" class="InductiveConstructor">`Char</a>   <a id="1106" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1108" href="Text.Printf.html#1108" class="Bound">fmt</a><a id="1111" class="Symbol">)</a> <a id="1113" class="Symbol">(</a><a id="1114" href="Text.Printf.html#1114" class="Bound">c</a> <a id="1116" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1118" href="Text.Printf.html#1118" class="Bound">vs</a><a id="1120" class="Symbol">)</a> <a id="1122" class="Symbol">=</a> <a id="1124" href="Data.String.Base.html#1586" class="Function">fromChar</a> <a id="1133" href="Text.Printf.html#1114" class="Bound">c</a> <a id="1135" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1137" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1146" href="Text.Printf.html#1108" class="Bound">fmt</a> <a id="1150" href="Text.Printf.html#1118" class="Bound">vs</a>
<a id="1153" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1162" class="Symbol">(</a><a id="1163" href="Text.Format.html#899" class="InductiveConstructor">`String</a> <a id="1171" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1173" href="Text.Printf.html#1173" class="Bound">fmt</a><a id="1176" class="Symbol">)</a> <a id="1178" class="Symbol">(</a><a id="1179" href="Text.Printf.html#1179" class="Bound">s</a> <a id="1181" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1183" href="Text.Printf.html#1183" class="Bound">vs</a><a id="1185" class="Symbol">)</a> <a id="1187" class="Symbol">=</a> <a id="1189" href="Text.Printf.html#1179" class="Bound">s</a>          <a id="1200" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1202" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1211" href="Text.Printf.html#1173" class="Bound">fmt</a> <a id="1215" href="Text.Printf.html#1183" class="Bound">vs</a>
<a id="1218" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1227" class="Symbol">(</a><a id="1228" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="1232" href="Text.Printf.html#1232" class="Bound">str</a> <a id="1236" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1238" href="Text.Printf.html#1238" class="Bound">fmt</a><a id="1241" class="Symbol">)</a> <a id="1243" href="Text.Printf.html#1243" class="Bound">vs</a>       <a id="1252" class="Symbol">=</a> <a id="1254" href="Text.Printf.html#1232" class="Bound">str</a> <a id="1258" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1260" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1269" href="Text.Printf.html#1238" class="Bound">fmt</a> <a id="1273" href="Text.Printf.html#1243" class="Bound">vs</a>

<a id="1277" class="Keyword">record</a> <a id="Error"></a><a id="1284" href="Text.Printf.html#1284" class="Record">Error</a> <a id="1290" class="Symbol">(</a><a id="1291" href="Text.Printf.html#1291" class="Bound">e</a> <a id="1293" class="Symbol">:</a> <a id="1295" href="Text.Format.html#1666" class="Datatype">Format.Error</a><a id="1307" class="Symbol">)</a> <a id="1309" class="Symbol">:</a> <a id="1311" class="PrimitiveType">Set</a> <a id="1315" class="Keyword">where</a>

<a id="1322" class="Keyword">private</a>

  <a id="Size"></a><a id="1333" href="Text.Printf.html#1333" class="Function">Size</a> <a id="1338" class="Symbol">:</a> <a id="1340" href="Text.Format.html#1666" class="Datatype">Format.Error</a> <a id="1353" href="Data.Sum.Base.html#612" class="Datatype Operator">⊎</a> <a id="1355" href="Text.Format.html#939" class="Function">Format</a> <a id="1362" class="Symbol">→</a> <a id="1364" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
  <a id="1368" href="Text.Printf.html#1333" class="Function">Size</a> <a id="1373" class="Symbol">(</a><a id="1374" href="Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="1379" href="Text.Printf.html#1379" class="Bound">err</a><a id="1382" class="Symbol">)</a> <a id="1384" class="Symbol">=</a> <a id="1386" class="Number">0</a>
  <a id="1390" href="Text.Printf.html#1333" class="Function">Size</a> <a id="1395" class="Symbol">(</a><a id="1396" href="Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="1401" href="Text.Printf.html#1401" class="Bound">fmt</a><a id="1404" class="Symbol">)</a> <a id="1406" class="Symbol">=</a> <a id="1408" href="Text.Format.html#1060" class="Function">size</a> <a id="1413" href="Text.Printf.html#1401" class="Bound">fmt</a>

  <a id="Printf"></a><a id="1420" href="Text.Printf.html#1420" class="Function">Printf</a> <a id="1427" class="Symbol">:</a> <a id="1429" class="Symbol">∀</a> <a id="1431" href="Text.Printf.html#1431" class="Bound">pr</a> <a id="1434" class="Symbol">→</a> <a id="1436" class="PrimitiveType">Set</a> <a id="1440" class="Symbol">(</a><a id="1441" href="Function.Nary.NonDependent.Base.html#2123" class="Function">⨆</a> <a id="1443" class="Symbol">(</a><a id="1444" href="Text.Printf.html#1333" class="Function">Size</a> <a id="1449" href="Text.Printf.html#1431" class="Bound">pr</a><a id="1451" class="Symbol">)</a> <a id="1453" href="Function.Nary.NonDependent.html#1526" class="Function">0ℓs</a><a id="1456" class="Symbol">)</a>
  <a id="1460" href="Text.Printf.html#1420" class="Function">Printf</a> <a id="1467" class="Symbol">(</a><a id="1468" href="Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="1473" href="Text.Printf.html#1473" class="Bound">err</a><a id="1476" class="Symbol">)</a> <a id="1478" class="Symbol">=</a> <a id="1480" href="Text.Printf.html#1284" class="Record">Error</a> <a id="1486" href="Text.Printf.html#1473" class="Bound">err</a>
  <a id="1492" href="Text.Printf.html#1420" class="Function">Printf</a> <a id="1499" class="Symbol">(</a><a id="1500" href="Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="1505" href="Text.Printf.html#1505" class="Bound">fmt</a><a id="1508" class="Symbol">)</a> <a id="1510" class="Symbol">=</a> <a id="1512" href="Function.Nary.NonDependent.Base.html#2646" class="Function">Arrows</a> <a id="1519" class="Symbol">_</a> <a id="1521" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1523" href="Text.Printf.html#1505" class="Bound">fmt</a> <a id="1527" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1529" href="Agda.Builtin.String.html#206" class="Postulate">String</a>

  <a id="printf&#39;"></a><a id="1539" href="Text.Printf.html#1539" class="Function">printf&#39;</a> <a id="1547" class="Symbol">:</a> <a id="1549" class="Symbol">∀</a> <a id="1551" href="Text.Printf.html#1551" class="Bound">pr</a> <a id="1554" class="Symbol">→</a> <a id="1556" href="Text.Printf.html#1420" class="Function">Printf</a> <a id="1563" href="Text.Printf.html#1551" class="Bound">pr</a>
  <a id="1568" href="Text.Printf.html#1539" class="Function">printf&#39;</a> <a id="1576" class="Symbol">(</a><a id="1577" href="Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="1582" href="Text.Printf.html#1582" class="Bound">err</a><a id="1585" class="Symbol">)</a> <a id="1587" class="Symbol">=</a> <a id="1589" class="Symbol">_</a>
  <a id="1593" href="Text.Printf.html#1539" class="Function">printf&#39;</a> <a id="1601" class="Symbol">(</a><a id="1602" href="Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="1607" href="Text.Printf.html#1607" class="Bound">fmt</a><a id="1610" class="Symbol">)</a> <a id="1612" class="Symbol">=</a> <a id="1614" href="Data.Product.Nary.NonDependent.html#4067" class="Function">curry⊤ₙ</a> <a id="1622" class="Symbol">_</a> <a id="1624" class="Symbol">(</a><a id="1625" href="Data.String.Base.html#1932" class="Function">concat</a> <a id="1632" href="Function.html#3311" class="Function Operator">∘′</a> <a id="1635" href="Text.Printf.html#802" class="Function">assemble</a> <a id="1644" href="Text.Printf.html#1607" class="Bound">fmt</a><a id="1647" class="Symbol">)</a>

<a id="printf"></a><a id="1650" href="Text.Printf.html#1650" class="Function">printf</a> <a id="1657" class="Symbol">:</a> <a id="1659" class="Symbol">(</a><a id="1660" href="Text.Printf.html#1660" class="Bound">input</a> <a id="1666" class="Symbol">:</a> <a id="1668" href="Agda.Builtin.String.html#206" class="Postulate">String</a><a id="1674" class="Symbol">)</a> <a id="1676" class="Symbol">→</a> <a id="1678" href="Text.Printf.html#1420" class="Function">Printf</a> <a id="1685" class="Symbol">(</a><a id="1686" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1692" href="Text.Printf.html#1660" class="Bound">input</a><a id="1697" class="Symbol">)</a>
<a id="1699" href="Text.Printf.html#1650" class="Function">printf</a> <a id="1706" href="Text.Printf.html#1706" class="Bound">input</a> <a id="1712" class="Symbol">=</a> <a id="1714" href="Text.Printf.html#1539" class="Function">printf&#39;</a> <a id="1722" class="Symbol">(</a><a id="1723" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1729" href="Text.Printf.html#1706" class="Bound">input</a><a id="1734" class="Symbol">)</a>
</pre></body></html>