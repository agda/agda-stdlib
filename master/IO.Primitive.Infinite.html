<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>IO.Primitive.Infinite</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Primitive IO: simple bindings to Haskell types and functions</a>
<a id="170" class="Comment">-- manipulating potentially infinite objects</a>
<a id="215" class="Comment">------------------------------------------------------------------------</a>

<a id="289" class="Symbol">{-#</a> <a id="293" class="Keyword">OPTIONS</a> <a id="301" class="Pragma">--cubical-compatible</a> <a id="322" class="Pragma">--guardedness</a> <a id="336" class="Symbol">#-}</a>

<a id="341" class="Keyword">module</a> <a id="348" href="IO.Primitive.Infinite.html" class="Module">IO.Primitive.Infinite</a> <a id="370" class="Keyword">where</a>

<a id="377" class="Comment">-- NOTE: the contents of this module should be accessed via `IO` or</a>
<a id="445" class="Comment">-- `IO.Infinite`.</a>

<a id="464" class="Keyword">open</a> <a id="469" class="Keyword">import</a> <a id="476" href="Codata.Musical.Costring.html" class="Module">Codata.Musical.Costring</a> <a id="500" class="Keyword">using</a> <a id="506" class="Symbol">(</a><a id="507" href="Codata.Musical.Costring.html#511" class="Function">Costring</a><a id="515" class="Symbol">)</a>
<a id="517" class="Keyword">open</a> <a id="522" class="Keyword">import</a> <a id="529" href="Agda.Builtin.String.html" class="Module">Agda.Builtin.String</a> <a id="549" class="Keyword">using</a> <a id="555" class="Symbol">(</a><a id="556" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="562" class="Symbol">)</a>
<a id="564" class="Keyword">open</a> <a id="569" class="Keyword">import</a> <a id="576" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="594" class="Keyword">renaming</a> <a id="603" class="Symbol">(</a><a id="604" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="606" class="Symbol">to</a> <a id="609" class="Record">Unit</a><a id="613" class="Symbol">)</a>

<a id="616" class="Comment">------------------------------------------------------------------------</a>
<a id="689" class="Comment">-- The IO monad</a>

<a id="706" class="Keyword">open</a> <a id="711" class="Keyword">import</a> <a id="718" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="734" class="Keyword">public</a> <a id="741" class="Keyword">using</a> <a id="747" class="Symbol">(</a><a id="748" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="750" class="Symbol">)</a>

<a id="753" class="Comment">------------------------------------------------------------------------</a>
<a id="826" class="Comment">-- Simple lazy IO</a>

<a id="845" class="Comment">-- Note that the functions below produce commands which, when</a>
<a id="907" class="Comment">-- executed, may raise exceptions.</a>

<a id="943" class="Comment">-- Note also that the semantics of these functions depends on the</a>
<a id="1009" class="Comment">-- version of the Haskell base library. If the version is 4.2.0.0 (or</a>
<a id="1079" class="Comment">-- later?), then the functions use the character encoding specified by</a>
<a id="1150" class="Comment">-- the locale. For older versions of the library (going back to at</a>
<a id="1217" class="Comment">-- least version 3) the functions use ISO-8859-1.</a>


<a id="1269" class="Keyword">postulate</a>
  <a id="getContents"></a><a id="1281" href="IO.Primitive.Infinite.html#1281" class="Postulate">getContents</a> <a id="1293" class="Symbol">:</a> <a id="1295" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="1298" href="Codata.Musical.Costring.html#511" class="Function">Costring</a>
  <a id="readFile"></a><a id="1309" href="IO.Primitive.Infinite.html#1309" class="Postulate">readFile</a>    <a id="1321" class="Symbol">:</a> <a id="1323" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1330" class="Symbol">→</a> <a id="1332" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="1335" href="Codata.Musical.Costring.html#511" class="Function">Costring</a>
  <a id="writeFile"></a><a id="1346" href="IO.Primitive.Infinite.html#1346" class="Postulate">writeFile</a>   <a id="1358" class="Symbol">:</a> <a id="1360" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Codata.Musical.Costring.html#511" class="Function">Costring</a> <a id="1378" class="Symbol">→</a> <a id="1380" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="1383" href="IO.Primitive.Infinite.html#609" class="Record">Unit</a>
  <a id="appendFile"></a><a id="1390" href="IO.Primitive.Infinite.html#1390" class="Postulate">appendFile</a>  <a id="1402" class="Symbol">:</a> <a id="1404" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1411" class="Symbol">→</a> <a id="1413" href="Codata.Musical.Costring.html#511" class="Function">Costring</a> <a id="1422" class="Symbol">→</a> <a id="1424" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="1427" href="IO.Primitive.Infinite.html#609" class="Record">Unit</a>
  <a id="putStr"></a><a id="1434" href="IO.Primitive.Infinite.html#1434" class="Postulate">putStr</a>      <a id="1446" class="Symbol">:</a> <a id="1448" href="Codata.Musical.Costring.html#511" class="Function">Costring</a> <a id="1457" class="Symbol">→</a> <a id="1459" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="1462" href="IO.Primitive.Infinite.html#609" class="Record">Unit</a>
  <a id="putStrLn"></a><a id="1469" href="IO.Primitive.Infinite.html#1469" class="Postulate">putStrLn</a>    <a id="1481" class="Symbol">:</a> <a id="1483" href="Codata.Musical.Costring.html#511" class="Function">Costring</a> <a id="1492" class="Symbol">→</a> <a id="1494" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="1497" href="IO.Primitive.Infinite.html#609" class="Record">Unit</a>

<a id="1503" class="Symbol">{-#</a> <a id="1507" class="Keyword">FOREIGN</a> <a id="1515" class="Pragma">GHC</a> <a id="1519" class="Pragma">import</a> <a id="1526" class="Pragma">qualified</a> <a id="1536" class="Pragma">Data.Text</a>    <a id="1549" class="Symbol">#-}</a>

<a id="1554" class="Symbol">{-#</a> <a id="1558" class="Keyword">FOREIGN</a> <a id="1566" class="Pragma">GHC</a>

  <a id="1573" class="Pragma">fromColist</a> <a id="1584" class="Pragma">::</a> <a id="1587" class="Pragma">MAlonzo.Code.Codata.Musical.Colist.Base.AgdaColist</a> <a id="1638" class="Pragma">a</a> <a id="1640" class="Pragma">-&gt;</a> <a id="1643" class="Pragma">[a]</a>
  <a id="1649" class="Pragma">fromColist</a> <a id="1660" class="Pragma">MAlonzo.Code.Codata.Musical.Colist.Base.Nil</a>         <a id="1712" class="Pragma">=</a> <a id="1714" class="Pragma">[]</a>
  <a id="1719" class="Pragma">fromColist</a> <a id="1730" class="Pragma">(MAlonzo.Code.Codata.Musical.Colist.Base.Cons</a> <a id="1776" class="Pragma">x</a> <a id="1778" class="Pragma">xs)</a> <a id="1782" class="Pragma">=</a>
    <a id="1788" class="Pragma">x</a> <a id="1790" class="Pragma">:</a> <a id="1792" class="Pragma">fromColist</a> <a id="1803" class="Pragma">(MAlonzo.RTE.flat</a> <a id="1821" class="Pragma">xs)</a>

  <a id="1828" class="Pragma">toColist</a> <a id="1837" class="Pragma">::</a> <a id="1840" class="Pragma">[a]</a> <a id="1844" class="Pragma">-&gt;</a> <a id="1847" class="Pragma">MAlonzo.Code.Codata.Musical.Colist.Base.AgdaColist</a> <a id="1898" class="Pragma">a</a>
  <a id="1902" class="Pragma">toColist</a> <a id="1911" class="Pragma">[]</a>       <a id="1920" class="Pragma">=</a> <a id="1922" class="Pragma">MAlonzo.Code.Codata.Musical.Colist.Base.Nil</a>
  <a id="1968" class="Pragma">toColist</a> <a id="1977" class="Pragma">(x</a> <a id="1980" class="Pragma">:</a> <a id="1982" class="Pragma">xs)</a> <a id="1986" class="Pragma">=</a>
    <a id="1992" class="Pragma">MAlonzo.Code.Codata.Musical.Colist.Base.Cons</a> <a id="2037" class="Pragma">x</a> <a id="2039" class="Pragma">(MAlonzo.RTE.Sharp</a> <a id="2058" class="Pragma">(toColist</a> <a id="2068" class="Pragma">xs))</a>
<a id="2073" class="Symbol">#-}</a>

<a id="2078" class="Symbol">{-#</a> <a id="2082" class="Keyword">COMPILE</a> <a id="2090" class="Keyword">GHC</a> <a id="2094" href="IO.Primitive.Infinite.html#1281" class="Postulate">getContents</a>    <a id="2109" class="Pragma">=</a> <a id="2111" class="Pragma">fmap</a> <a id="2116" class="Pragma">toColist</a> <a id="2125" class="Pragma">getContents</a>                          <a id="2162" class="Symbol">#-}</a>
<a id="2166" class="Symbol">{-#</a> <a id="2170" class="Keyword">COMPILE</a> <a id="2178" class="Keyword">GHC</a> <a id="2182" href="IO.Primitive.Infinite.html#1309" class="Postulate">readFile</a>       <a id="2197" class="Pragma">=</a> <a id="2199" class="Pragma">fmap</a> <a id="2204" class="Pragma">toColist</a> <a id="2213" class="Pragma">.</a> <a id="2215" class="Pragma">readFile</a> <a id="2224" class="Pragma">.</a> <a id="2226" class="Pragma">Data.Text.unpack</a>        <a id="2250" class="Symbol">#-}</a>
<a id="2254" class="Symbol">{-#</a> <a id="2258" class="Keyword">COMPILE</a> <a id="2266" class="Keyword">GHC</a> <a id="2270" href="IO.Primitive.Infinite.html#1346" class="Postulate">writeFile</a>      <a id="2285" class="Pragma">=</a> <a id="2287" class="Pragma">\x</a> <a id="2290" class="Pragma">-&gt;</a> <a id="2293" class="Pragma">writeFile</a> <a id="2303" class="Pragma">(Data.Text.unpack</a> <a id="2321" class="Pragma">x)</a> <a id="2324" class="Pragma">.</a> <a id="2326" class="Pragma">fromColist</a>  <a id="2338" class="Symbol">#-}</a>
<a id="2342" class="Symbol">{-#</a> <a id="2346" class="Keyword">COMPILE</a> <a id="2354" class="Keyword">GHC</a> <a id="2358" href="IO.Primitive.Infinite.html#1390" class="Postulate">appendFile</a>     <a id="2373" class="Pragma">=</a> <a id="2375" class="Pragma">\x</a> <a id="2378" class="Pragma">-&gt;</a> <a id="2381" class="Pragma">appendFile</a> <a id="2392" class="Pragma">(Data.Text.unpack</a> <a id="2410" class="Pragma">x)</a> <a id="2413" class="Pragma">.</a> <a id="2415" class="Pragma">fromColist</a> <a id="2426" class="Symbol">#-}</a>
<a id="2430" class="Symbol">{-#</a> <a id="2434" class="Keyword">COMPILE</a> <a id="2442" class="Keyword">GHC</a> <a id="2446" href="IO.Primitive.Infinite.html#1434" class="Postulate">putStr</a>         <a id="2461" class="Pragma">=</a> <a id="2463" class="Pragma">putStr</a> <a id="2470" class="Pragma">.</a> <a id="2472" class="Pragma">fromColist</a>                                <a id="2514" class="Symbol">#-}</a>
<a id="2518" class="Symbol">{-#</a> <a id="2522" class="Keyword">COMPILE</a> <a id="2530" class="Keyword">GHC</a> <a id="2534" href="IO.Primitive.Infinite.html#1469" class="Postulate">putStrLn</a>       <a id="2549" class="Pragma">=</a> <a id="2551" class="Pragma">putStrLn</a> <a id="2560" class="Pragma">.</a> <a id="2562" class="Pragma">fromColist</a>                              <a id="2602" class="Symbol">#-}</a>
<a id="2606" class="Symbol">{-#</a> <a id="2610" class="Keyword">COMPILE</a> <a id="2618" class="Keyword">UHC</a> <a id="2622" href="IO.Primitive.Infinite.html#1281" class="Postulate">getContents</a>    <a id="2637" class="Pragma">=</a> <a id="2639" class="Pragma">UHC.Agda.Builtins.primGetContents</a>     <a id="2677" class="Symbol">#-}</a>
<a id="2681" class="Symbol">{-#</a> <a id="2685" class="Keyword">COMPILE</a> <a id="2693" class="Keyword">UHC</a> <a id="2697" href="IO.Primitive.Infinite.html#1309" class="Postulate">readFile</a>       <a id="2712" class="Pragma">=</a> <a id="2714" class="Pragma">UHC.Agda.Builtins.primReadFile</a>        <a id="2752" class="Symbol">#-}</a>
<a id="2756" class="Symbol">{-#</a> <a id="2760" class="Keyword">COMPILE</a> <a id="2768" class="Keyword">UHC</a> <a id="2772" href="IO.Primitive.Infinite.html#1346" class="Postulate">writeFile</a>      <a id="2787" class="Pragma">=</a> <a id="2789" class="Pragma">UHC.Agda.Builtins.primWriteFile</a>       <a id="2827" class="Symbol">#-}</a>
<a id="2831" class="Symbol">{-#</a> <a id="2835" class="Keyword">COMPILE</a> <a id="2843" class="Keyword">UHC</a> <a id="2847" href="IO.Primitive.Infinite.html#1390" class="Postulate">appendFile</a>     <a id="2862" class="Pragma">=</a> <a id="2864" class="Pragma">UHC.Agda.Builtins.primAppendFile</a>      <a id="2902" class="Symbol">#-}</a>
<a id="2906" class="Symbol">{-#</a> <a id="2910" class="Keyword">COMPILE</a> <a id="2918" class="Keyword">UHC</a> <a id="2922" href="IO.Primitive.Infinite.html#1434" class="Postulate">putStr</a>         <a id="2937" class="Pragma">=</a> <a id="2939" class="Pragma">UHC.Agda.Builtins.primPutStr</a>          <a id="2977" class="Symbol">#-}</a>
<a id="2981" class="Symbol">{-#</a> <a id="2985" class="Keyword">COMPILE</a> <a id="2993" class="Keyword">UHC</a> <a id="2997" href="IO.Primitive.Infinite.html#1469" class="Postulate">putStrLn</a>       <a id="3012" class="Pragma">=</a> <a id="3014" class="Pragma">UHC.Agda.Builtins.primPutStrLn</a>        <a id="3052" class="Symbol">#-}</a>
</pre></body></html>