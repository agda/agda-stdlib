<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.PseudoRandom.LCG</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Linear congruential pseudo random generators for natural numbers</a>
<a id="174" class="Comment">-- /!\ NB: LCGs must not be used for cryptographic applications</a>
<a id="238" class="Comment">------------------------------------------------------------------------</a>

<a id="312" class="Symbol">{-#</a> <a id="316" class="Keyword">OPTIONS</a> <a id="324" class="Pragma">--cubical-compatible</a> <a id="345" class="Pragma">--safe</a> <a id="352" class="Symbol">#-}</a>

<a id="357" class="Keyword">module</a> <a id="364" href="Data.Nat.PseudoRandom.LCG.html" class="Module">Data.Nat.PseudoRandom.LCG</a> <a id="390" class="Keyword">where</a>

<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="423" class="Keyword">open</a> <a id="428" class="Keyword">import</a> <a id="435" href="Data.Nat.DivMod.html" class="Module">Data.Nat.DivMod</a> <a id="451" class="Keyword">using</a> <a id="457" class="Symbol">(</a><a id="458" href="Data.Nat.Base.html#7285" class="Function Operator">_%_</a><a id="461" class="Symbol">)</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="490" class="Keyword">using</a> <a id="496" class="Symbol">(</a><a id="497" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="501" class="Symbol">;</a> <a id="503" href="Data.List.Base.html#7301" class="InductiveConstructor">[]</a><a id="505" class="Symbol">;</a> <a id="507" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="510" class="Symbol">)</a>

<a id="513" class="Comment">------------------------------------------------------------------------</a>
<a id="586" class="Comment">-- Type and generator</a>

<a id="609" class="Keyword">record</a> <a id="Generator"></a><a id="616" href="Data.Nat.PseudoRandom.LCG.html#616" class="Record">Generator</a> <a id="626" class="Symbol">:</a> <a id="628" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="632" class="Keyword">where</a>
  <a id="640" class="Keyword">field</a> <a id="Generator.multiplier"></a><a id="646" href="Data.Nat.PseudoRandom.LCG.html#646" class="Field">multiplier</a>     <a id="661" class="Symbol">:</a> <a id="663" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
        <a id="Generator.increment"></a><a id="673" href="Data.Nat.PseudoRandom.LCG.html#673" class="Field">increment</a>      <a id="688" class="Symbol">:</a> <a id="690" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
        <a id="Generator.modulus"></a><a id="700" href="Data.Nat.PseudoRandom.LCG.html#700" class="Field">modulus</a>        <a id="715" class="Symbol">:</a> <a id="717" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
        <a id="727" class="Symbol">.{{</a><a id="Generator.modulus≢0"></a><a id="730" href="Data.Nat.PseudoRandom.LCG.html#730" class="Field">modulus≢0</a><a id="739" class="Symbol">}}</a> <a id="742" class="Symbol">:</a> <a id="744" href="Data.Nat.Base.html#3266" class="Record">NonZero</a> <a id="752" href="Data.Nat.PseudoRandom.LCG.html#700" class="Field">modulus</a>

<a id="step"></a><a id="761" href="Data.Nat.PseudoRandom.LCG.html#761" class="Function">step</a> <a id="766" class="Symbol">:</a> <a id="768" href="Data.Nat.PseudoRandom.LCG.html#616" class="Record">Generator</a> <a id="778" class="Symbol">→</a> <a id="780" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="782" class="Symbol">→</a> <a id="784" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="786" href="Data.Nat.PseudoRandom.LCG.html#761" class="Function">step</a> <a id="791" href="Data.Nat.PseudoRandom.LCG.html#791" class="Bound">gen</a><a id="794" class="Symbol">@</a><a id="795" class="Keyword">record</a><a id="801" class="Symbol">{}</a> <a id="804" href="Data.Nat.PseudoRandom.LCG.html#804" class="Bound">x</a> <a id="806" class="Symbol">=</a>
  <a id="810" class="Keyword">let</a> <a id="814" class="Keyword">open</a> <a id="819" href="Data.Nat.PseudoRandom.LCG.html#616" class="Module">Generator</a> <a id="829" href="Data.Nat.PseudoRandom.LCG.html#791" class="Bound">gen</a> <a id="833" class="Keyword">in</a>
  <a id="838" class="Symbol">((</a><a id="840" href="Data.Nat.PseudoRandom.LCG.html#646" class="Function">multiplier</a> <a id="851" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="853" href="Data.Nat.PseudoRandom.LCG.html#804" class="Bound">x</a> <a id="855" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="857" href="Data.Nat.PseudoRandom.LCG.html#673" class="Function">increment</a><a id="866" class="Symbol">)</a> <a id="868" href="Data.Nat.Base.html#7285" class="Function Operator">%</a> <a id="870" href="Data.Nat.PseudoRandom.LCG.html#700" class="Function">modulus</a><a id="877" class="Symbol">)</a>

<a id="list"></a><a id="880" href="Data.Nat.PseudoRandom.LCG.html#880" class="Function">list</a> <a id="885" class="Symbol">:</a> <a id="887" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="889" class="Symbol">→</a> <a id="891" href="Data.Nat.PseudoRandom.LCG.html#616" class="Record">Generator</a> <a id="901" class="Symbol">→</a> <a id="903" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="905" class="Symbol">→</a> <a id="907" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="912" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="914" href="Data.Nat.PseudoRandom.LCG.html#880" class="Function">list</a> <a id="919" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="927" href="Data.Nat.PseudoRandom.LCG.html#927" class="Bound">gen</a> <a id="931" href="Data.Nat.PseudoRandom.LCG.html#931" class="Bound">x</a> <a id="933" class="Symbol">=</a> <a id="935" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="938" href="Data.Nat.PseudoRandom.LCG.html#880" class="Function">list</a> <a id="943" class="Symbol">(</a><a id="944" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="948" href="Data.Nat.PseudoRandom.LCG.html#948" class="Bound">k</a><a id="949" class="Symbol">)</a> <a id="951" href="Data.Nat.PseudoRandom.LCG.html#951" class="Bound">gen</a> <a id="955" href="Data.Nat.PseudoRandom.LCG.html#955" class="Bound">x</a> <a id="957" class="Symbol">=</a> <a id="959" href="Data.Nat.PseudoRandom.LCG.html#955" class="Bound">x</a> <a id="961" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="963" href="Data.Nat.PseudoRandom.LCG.html#880" class="Function">list</a> <a id="968" href="Data.Nat.PseudoRandom.LCG.html#948" class="Bound">k</a> <a id="970" href="Data.Nat.PseudoRandom.LCG.html#951" class="Bound">gen</a> <a id="974" class="Symbol">(</a><a id="975" href="Data.Nat.PseudoRandom.LCG.html#761" class="Function">step</a> <a id="980" href="Data.Nat.PseudoRandom.LCG.html#951" class="Bound">gen</a> <a id="984" href="Data.Nat.PseudoRandom.LCG.html#955" class="Bound">x</a><a id="985" class="Symbol">)</a>

<a id="988" class="Comment">------------------------------------------------------------------------</a>
<a id="1061" class="Comment">-- Examples of parameters</a>
<a id="1087" class="Comment">-- Taken from https://en.wikipedia.org/wiki/Linear_congruential_generator</a>

<a id="1162" class="Comment">-- /!\ As explained in that wikipedia entry, none of these are claimed</a>
<a id="1233" class="Comment">-- to be good parameters.</a>

<a id="1260" class="Comment">-- Note also that if you need your output to have good properties you</a>
<a id="1330" class="Comment">-- may need to postprocess the stream of values to only use some of the</a>
<a id="1402" class="Comment">-- bits of the output!</a>

<a id="glibc"></a><a id="1426" href="Data.Nat.PseudoRandom.LCG.html#1426" class="Function">glibc</a> <a id="1432" class="Symbol">:</a> <a id="1434" href="Data.Nat.PseudoRandom.LCG.html#616" class="Record">Generator</a>
<a id="1444" href="Data.Nat.PseudoRandom.LCG.html#1426" class="Function">glibc</a> <a id="1450" class="Symbol">=</a> <a id="1452" class="Keyword">record</a>
  <a id="1461" class="Symbol">{</a> <a id="1463" href="Data.Nat.PseudoRandom.LCG.html#646" class="Field">multiplier</a> <a id="1474" class="Symbol">=</a> <a id="1476" class="Number">1103515245</a>
  <a id="1489" class="Symbol">;</a> <a id="1491" href="Data.Nat.PseudoRandom.LCG.html#673" class="Field">increment</a>  <a id="1502" class="Symbol">=</a> <a id="1504" class="Number">12345</a>
  <a id="1512" class="Symbol">;</a> <a id="1514" href="Data.Nat.PseudoRandom.LCG.html#700" class="Field">modulus</a>    <a id="1525" class="Symbol">=</a> <a id="1527" class="Number">2</a> <a id="1529" href="Data.Nat.Base.html#6567" class="Function Operator">^</a> <a id="1531" class="Number">31</a>
  <a id="1536" class="Symbol">}</a>

<a id="random0"></a><a id="1539" href="Data.Nat.PseudoRandom.LCG.html#1539" class="Function">random0</a> <a id="1547" class="Symbol">:</a> <a id="1549" href="Data.Nat.PseudoRandom.LCG.html#616" class="Record">Generator</a>
<a id="1559" href="Data.Nat.PseudoRandom.LCG.html#1539" class="Function">random0</a> <a id="1567" class="Symbol">=</a> <a id="1569" class="Keyword">record</a>
  <a id="1578" class="Symbol">{</a> <a id="1580" href="Data.Nat.PseudoRandom.LCG.html#646" class="Field">multiplier</a> <a id="1591" class="Symbol">=</a> <a id="1593" class="Number">8121</a>
  <a id="1600" class="Symbol">;</a> <a id="1602" href="Data.Nat.PseudoRandom.LCG.html#673" class="Field">increment</a>  <a id="1613" class="Symbol">=</a> <a id="1615" class="Number">28411</a>
  <a id="1623" class="Symbol">;</a> <a id="1625" href="Data.Nat.PseudoRandom.LCG.html#700" class="Field">modulus</a>    <a id="1636" class="Symbol">=</a> <a id="1638" class="Number">134456</a>
  <a id="1647" class="Symbol">}</a>
</pre></body></html>