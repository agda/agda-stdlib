<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.RingSolver.Core.Polynomial.Semantics</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- &quot;Evaluating&quot; a polynomial, using Horner&#39;s method.</a>
<a id="159" class="Comment">------------------------------------------------------------------------</a>

<a id="233" class="Symbol">{-#</a> <a id="237" class="Keyword">OPTIONS</a> <a id="245" class="Pragma">--cubical-compatible</a> <a id="266" class="Pragma">--safe</a> <a id="273" class="Symbol">#-}</a>

<a id="278" class="Keyword">open</a> <a id="283" class="Keyword">import</a> <a id="290" href="Tactic.RingSolver.Core.Polynomial.Parameters.html" class="Module">Tactic.RingSolver.Core.Polynomial.Parameters</a>

<a id="336" class="Keyword">module</a> <a id="343" href="Tactic.RingSolver.Core.Polynomial.Semantics.html" class="Module">Tactic.RingSolver.Core.Polynomial.Semantics</a>
  <a id="389" class="Symbol">{</a><a id="390" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#390" class="Bound">r₁</a> <a id="393" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#393" class="Bound">r₂</a> <a id="396" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#396" class="Bound">r₃</a> <a id="399" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#399" class="Bound">r₄</a><a id="401" class="Symbol">}</a>
  <a id="405" class="Symbol">(</a><a id="406" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#406" class="Bound">homo</a> <a id="411" class="Symbol">:</a> <a id="413" href="Tactic.RingSolver.Core.Polynomial.Parameters.html#1092" class="Record">Homomorphism</a> <a id="426" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#390" class="Bound">r₁</a> <a id="429" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#393" class="Bound">r₂</a> <a id="432" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#396" class="Bound">r₃</a> <a id="435" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#399" class="Bound">r₄</a><a id="437" class="Symbol">)</a>
  <a id="441" class="Keyword">where</a>

<a id="448" class="Keyword">open</a> <a id="453" class="Keyword">import</a> <a id="460" href="Data.Nat.html" class="Module">Data.Nat</a>          <a id="478" class="Keyword">using</a> <a id="484" class="Symbol">(</a><a id="485" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="486" class="Symbol">;</a> <a id="488" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="491" class="Symbol">;</a> <a id="493" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="497" class="Symbol">;</a> <a id="499" href="Data.Nat.Base.html#7705" class="Datatype Operator">_≤′_</a><a id="503" class="Symbol">;</a> <a id="505" href="Data.Nat.Base.html#7779" class="InductiveConstructor">≤′-step</a><a id="512" class="Symbol">;</a> <a id="514" href="Data.Nat.Base.html#7736" class="InductiveConstructor">≤′-refl</a><a id="521" class="Symbol">)</a>
<a id="523" class="Keyword">open</a> <a id="528" class="Keyword">import</a> <a id="535" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a>     <a id="553" class="Keyword">using</a> <a id="559" class="Symbol">(</a><a id="560" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a><a id="563" class="Symbol">;</a> <a id="565" href="Data.Vec.Base.html#1147" class="InductiveConstructor">[]</a><a id="567" class="Symbol">;</a> <a id="569" href="Data.Vec.Base.html#1166" class="InductiveConstructor Operator">_∷_</a><a id="572" class="Symbol">;</a> <a id="574" href="Data.Vec.Base.html#7771" class="Function">uncons</a><a id="580" class="Symbol">)</a>
<a id="582" class="Keyword">open</a> <a id="587" class="Keyword">import</a> <a id="594" href="Data.List.Base.html" class="Module">Data.List.Base</a>    <a id="612" class="Keyword">using</a> <a id="618" class="Symbol">(</a><a id="619" href="Data.List.Base.html#7793" class="InductiveConstructor">[]</a><a id="621" class="Symbol">;</a> <a id="623" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="626" class="Symbol">)</a>
<a id="628" class="Keyword">open</a> <a id="633" class="Keyword">import</a> <a id="640" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="658" class="Keyword">using</a> <a id="664" class="Symbol">(</a><a id="665" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="668" class="Symbol">;</a> <a id="670" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="673" class="Symbol">)</a>
<a id="675" class="Keyword">open</a> <a id="680" class="Keyword">import</a> <a id="687" href="Data.List.Kleene.html" class="Module">Data.List.Kleene</a>  <a id="705" class="Keyword">using</a> <a id="711" class="Symbol">(</a><a id="712" href="Data.List.Kleene.Base.html#1539" class="Record Operator">_+</a><a id="714" class="Symbol">;</a> <a id="716" href="Data.List.Kleene.Base.html#1571" class="Datatype Operator">_*</a><a id="718" class="Symbol">;</a> <a id="720" href="Data.List.Kleene.Base.html#1756" class="InductiveConstructor Operator">∹_</a><a id="722" class="Symbol">;</a> <a id="724" href="Data.List.Kleene.Base.html#1662" class="InductiveConstructor Operator">_&amp;_</a><a id="727" class="Symbol">;</a> <a id="729" href="Data.List.Kleene.Base.html#1745" class="InductiveConstructor">[]</a><a id="731" class="Symbol">)</a>

<a id="734" class="Keyword">open</a> <a id="739" href="Tactic.RingSolver.Core.Polynomial.Parameters.html#1092" class="Module">Homomorphism</a> <a id="752" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#406" class="Bound">homo</a> <a id="757" class="Keyword">hiding</a> <a id="764" class="Symbol">(</a><a id="765" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#2447" class="Function Operator">_^_</a><a id="768" class="Symbol">)</a>
<a id="770" class="Keyword">open</a> <a id="775" class="Keyword">import</a> <a id="782" href="Tactic.RingSolver.Core.Polynomial.Base.html" class="Module">Tactic.RingSolver.Core.Polynomial.Base</a> <a id="821" href="Tactic.RingSolver.Core.Polynomial.Parameters.html#1167" class="Field">from</a>
<a id="826" class="Keyword">open</a> <a id="831" class="Keyword">import</a> <a id="838" href="Algebra.Properties.Semiring.Exp.TCOptimised.html" class="Module">Algebra.Properties.Semiring.Exp.TCOptimised</a> <a id="882" href="Algebra.Bundles.html#17932" class="Function">semiring</a>

<a id="drop"></a><a id="892" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#892" class="Function">drop</a> <a id="897" class="Symbol">:</a> <a id="899" class="Symbol">∀</a> <a id="901" class="Symbol">{</a><a id="902" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#902" class="Bound">i</a> <a id="904" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#904" class="Bound">n</a><a id="905" class="Symbol">}</a> <a id="907" class="Symbol">→</a> <a id="909" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#902" class="Bound">i</a> <a id="911" href="Data.Nat.Base.html#7705" class="Datatype Operator">≤′</a> <a id="914" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#904" class="Bound">n</a> <a id="916" class="Symbol">→</a> <a id="918" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="922" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="930" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#904" class="Bound">n</a> <a id="932" class="Symbol">→</a> <a id="934" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="938" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="946" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#902" class="Bound">i</a>
<a id="948" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#892" class="Function">drop</a> <a id="953" href="Data.Nat.Base.html#7736" class="InductiveConstructor">≤′-refl</a>         <a id="969" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#969" class="Bound">xs</a>       <a id="978" class="Symbol">=</a> <a id="980" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#969" class="Bound">xs</a>
<a id="983" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#892" class="Function">drop</a> <a id="988" class="Symbol">(</a><a id="989" href="Data.Nat.Base.html#7779" class="InductiveConstructor">≤′-step</a> <a id="997" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#997" class="Bound">i+1≤n</a><a id="1002" class="Symbol">)</a> <a id="1004" class="Symbol">(_</a> <a id="1007" href="Data.Vec.Base.html#1166" class="InductiveConstructor Operator">∷</a> <a id="1009" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1009" class="Bound">xs</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Symbol">=</a> <a id="1015" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#892" class="Function">drop</a> <a id="1020" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#997" class="Bound">i+1≤n</a> <a id="1026" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1009" class="Bound">xs</a>

<a id="drop-1"></a><a id="1030" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1030" class="Function">drop-1</a> <a id="1037" class="Symbol">:</a> <a id="1039" class="Symbol">∀</a> <a id="1041" class="Symbol">{</a><a id="1042" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1042" class="Bound">i</a> <a id="1044" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1044" class="Bound">n</a><a id="1045" class="Symbol">}</a> <a id="1047" class="Symbol">→</a> <a id="1049" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1053" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1042" class="Bound">i</a> <a id="1055" href="Data.Nat.Base.html#7705" class="Datatype Operator">≤′</a> <a id="1058" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1044" class="Bound">n</a> <a id="1060" class="Symbol">→</a> <a id="1062" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="1066" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1074" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1044" class="Bound">n</a> <a id="1076" class="Symbol">→</a> <a id="1078" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1086" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1088" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="1092" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1100" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1042" class="Bound">i</a>
<a id="1102" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1030" class="Function">drop-1</a> <a id="1109" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1109" class="Bound">si≤n</a> <a id="1114" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1114" class="Bound">xs</a> <a id="1117" class="Symbol">=</a> <a id="1119" href="Data.Vec.Base.html#7771" class="Function">uncons</a> <a id="1126" class="Symbol">(</a><a id="1127" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#892" class="Function">drop</a> <a id="1132" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1109" class="Bound">si≤n</a> <a id="1137" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1114" class="Bound">xs</a><a id="1139" class="Symbol">)</a>
<a id="1141" class="Symbol">{-#</a> <a id="1145" class="Keyword">INLINE</a> <a id="1152" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1030" class="Function">drop-1</a> <a id="1159" class="Symbol">#-}</a>

<a id="_*⟨_⟩^_"></a><a id="1164" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">_*⟨_⟩^_</a> <a id="1172" class="Symbol">:</a> <a id="1174" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1182" class="Symbol">→</a> <a id="1184" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1192" class="Symbol">→</a> <a id="1194" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1196" class="Symbol">→</a> <a id="1198" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a>
<a id="1206" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1206" class="Bound">x</a> <a id="1208" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">*⟨</a> <a id="1211" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1211" class="Bound">ρ</a> <a id="1213" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">⟩^</a> <a id="1216" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1221" class="Symbol">=</a> <a id="1223" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1206" class="Bound">x</a>
<a id="1225" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1225" class="Bound">x</a> <a id="1227" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">*⟨</a> <a id="1230" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1230" class="Bound">ρ</a> <a id="1232" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">⟩^</a> <a id="1235" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1239" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1239" class="Bound">i</a> <a id="1241" class="Symbol">=</a> <a id="1243" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1230" class="Bound">ρ</a> <a id="1245" href="Algebra.Properties.Semiring.Exp.TCOptimised.html#1069" class="Function Operator">^</a> <a id="1247" class="Symbol">(</a><a id="1248" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1252" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1239" class="Bound">i</a><a id="1253" class="Symbol">)</a> <a id="1255" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1548" class="Function Operator">*</a> <a id="1257" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1225" class="Bound">x</a>
<a id="1259" class="Symbol">{-#</a> <a id="1263" class="Keyword">INLINE</a> <a id="1270" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">_*⟨_⟩^_</a> <a id="1278" class="Symbol">#-}</a>

<a id="1283" class="Comment">------------------------------------------------------------------------</a>
<a id="1356" class="Comment">-- Evaluation</a>
<a id="1370" class="Comment">------------------------------------------------------------------------</a>
<a id="1443" class="Comment">-- Why do we have three functions here? Why are they so weird looking?</a>
<a id="1514" class="Comment">--</a>
<a id="1517" class="Comment">-- These three functions are the main bottleneck for all of the proofs:</a>
<a id="1589" class="Comment">-- as such, slight changes can dramatically affect the length of proof</a>
<a id="1660" class="Comment">-- code.</a>

<a id="1670" class="Keyword">mutual</a>

  <a id="_⟦∷⟧_"></a><a id="1680" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1680" class="Function Operator">_⟦∷⟧_</a> <a id="1686" class="Symbol">:</a> <a id="1688" class="Symbol">∀</a> <a id="1690" class="Symbol">{</a><a id="1691" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1691" class="Bound">n</a><a id="1692" class="Symbol">}</a> <a id="1694" class="Symbol">→</a> <a id="1696" href="Tactic.RingSolver.Core.Polynomial.Base.html#4207" class="Record">Poly</a> <a id="1701" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1691" class="Bound">n</a> <a id="1703" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1705" href="Tactic.RingSolver.Core.Polynomial.Base.html#4256" class="Function">Coeff</a> <a id="1711" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1691" class="Bound">n</a> <a id="1713" href="Data.List.Kleene.Base.html#1571" class="Datatype Operator">*</a> <a id="1715" class="Symbol">→</a> <a id="1717" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1725" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1727" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="1731" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1739" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1691" class="Bound">n</a> <a id="1741" class="Symbol">→</a> <a id="1743" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a>
  <a id="1753" class="Symbol">(</a><a id="1754" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1754" class="Bound">x</a> <a id="1756" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1758" href="Data.List.Kleene.Base.html#1745" class="InductiveConstructor">[]</a><a id="1760" class="Symbol">)</a>     <a id="1766" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1680" class="Function Operator">⟦∷⟧</a> <a id="1770" class="Symbol">(</a><a id="1771" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1771" class="Bound">ρ</a> <a id="1773" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1775" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1775" class="Bound">ρs</a><a id="1777" class="Symbol">)</a> <a id="1779" class="Symbol">=</a> <a id="1781" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟦</a> <a id="1783" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1754" class="Bound">x</a> <a id="1785" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟧</a> <a id="1787" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1775" class="Bound">ρs</a>
  <a id="1792" class="Symbol">(</a><a id="1793" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1793" class="Bound">x</a> <a id="1795" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1797" class="Symbol">(</a><a id="1798" href="Data.List.Kleene.Base.html#1756" class="InductiveConstructor Operator">∹</a> <a id="1800" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1800" class="Bound">xs</a><a id="1802" class="Symbol">))</a> <a id="1805" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1680" class="Function Operator">⟦∷⟧</a> <a id="1809" class="Symbol">(</a><a id="1810" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1810" class="Bound">ρ</a> <a id="1812" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1814" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1814" class="Bound">ρs</a><a id="1816" class="Symbol">)</a> <a id="1818" class="Symbol">=</a> <a id="1820" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1810" class="Bound">ρ</a> <a id="1822" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1548" class="Function Operator">*</a> <a id="1824" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⅀⟦</a> <a id="1827" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1800" class="Bound">xs</a> <a id="1830" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⟧</a> <a id="1832" class="Symbol">(</a><a id="1833" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1810" class="Bound">ρ</a> <a id="1835" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1837" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1814" class="Bound">ρs</a><a id="1839" class="Symbol">)</a> <a id="1841" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1506" class="Function Operator">+</a> <a id="1843" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟦</a> <a id="1845" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1793" class="Bound">x</a> <a id="1847" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟧</a> <a id="1849" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1814" class="Bound">ρs</a>

  <a id="⅀⟦_⟧"></a><a id="1855" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⅀⟦_⟧</a> <a id="1860" class="Symbol">:</a> <a id="1862" class="Symbol">∀</a> <a id="1864" class="Symbol">{</a><a id="1865" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1865" class="Bound">n</a><a id="1866" class="Symbol">}</a> <a id="1868" class="Symbol">→</a> <a id="1870" href="Tactic.RingSolver.Core.Polynomial.Base.html#4256" class="Function">Coeff</a> <a id="1876" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1865" class="Bound">n</a> <a id="1878" href="Data.List.Kleene.Base.html#1539" class="Record Operator">+</a> <a id="1880" class="Symbol">→</a> <a id="1882" class="Symbol">(</a><a id="1883" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1891" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1893" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="1897" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="1905" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1865" class="Bound">n</a><a id="1906" class="Symbol">)</a> <a id="1908" class="Symbol">→</a> <a id="1910" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a>
  <a id="1920" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⅀⟦</a> <a id="1923" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1923" class="Bound">x</a> <a id="1925" href="Tactic.RingSolver.Core.Polynomial.Base.html#4965" class="InductiveConstructor Operator">≠0</a> <a id="1928" href="Tactic.RingSolver.Core.Polynomial.Base.html#4139" class="InductiveConstructor Operator">Δ</a> <a id="1930" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1930" class="Bound">i</a> <a id="1932" href="Data.List.Kleene.Base.html#1662" class="InductiveConstructor Operator">&amp;</a> <a id="1934" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1934" class="Bound">xs</a> <a id="1937" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⟧</a> <a id="1939" class="Symbol">(</a><a id="1940" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1940" class="Bound">ρ</a> <a id="1942" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1944" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1944" class="Bound">ρs</a><a id="1946" class="Symbol">)</a> <a id="1948" class="Symbol">=</a> <a id="1950" class="Symbol">((</a><a id="1952" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1923" class="Bound">x</a> <a id="1954" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1956" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1934" class="Bound">xs</a><a id="1958" class="Symbol">)</a> <a id="1960" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1680" class="Function Operator">⟦∷⟧</a> <a id="1964" class="Symbol">(</a><a id="1965" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1940" class="Bound">ρ</a> <a id="1967" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1969" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1944" class="Bound">ρs</a><a id="1971" class="Symbol">))</a> <a id="1974" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">*⟨</a> <a id="1977" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1940" class="Bound">ρ</a> <a id="1979" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1164" class="Function Operator">⟩^</a> <a id="1982" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1930" class="Bound">i</a>
  <a id="1986" class="Symbol">{-#</a> <a id="1990" class="Keyword">INLINE</a> <a id="1997" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⅀⟦_⟧</a> <a id="2002" class="Symbol">#-}</a>

  <a id="⟦_⟧"></a><a id="2009" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟦_⟧</a> <a id="2013" class="Symbol">:</a> <a id="2015" class="Symbol">∀</a> <a id="2017" class="Symbol">{</a><a id="2018" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2018" class="Bound">n</a><a id="2019" class="Symbol">}</a> <a id="2021" class="Symbol">→</a> <a id="2023" href="Tactic.RingSolver.Core.Polynomial.Base.html#4207" class="Record">Poly</a> <a id="2028" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2018" class="Bound">n</a> <a id="2030" class="Symbol">→</a> <a id="2032" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="2036" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a> <a id="2044" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2018" class="Bound">n</a> <a id="2046" class="Symbol">→</a> <a id="2048" href="Tactic.RingSolver.Core.AlmostCommutativeRing.html#1426" class="Function">Carrier</a>
  <a id="2058" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟦</a> <a id="2060" href="Tactic.RingSolver.Core.Polynomial.Base.html#4639" class="InductiveConstructor">Κ</a> <a id="2062" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2062" class="Bound">x</a>  <a id="2065" href="Tactic.RingSolver.Core.Polynomial.Base.html#4499" class="InductiveConstructor Operator">⊐</a> <a id="2067" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2067" class="Bound">i≤n</a> <a id="2071" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟧</a> <a id="2073" class="Symbol">_</a> <a id="2075" class="Symbol">=</a> <a id="2077" href="Tactic.RingSolver.Core.Polynomial.Parameters.html#1419" class="Function Operator">⟦</a> <a id="2079" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2062" class="Bound">x</a> <a id="2081" href="Tactic.RingSolver.Core.Polynomial.Parameters.html#1419" class="Function Operator">⟧ᵣ</a>
  <a id="2086" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟦</a> <a id="2088" href="Tactic.RingSolver.Core.Polynomial.Base.html#4669" class="InductiveConstructor">⅀</a> <a id="2090" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2090" class="Bound">xs</a> <a id="2093" href="Tactic.RingSolver.Core.Polynomial.Base.html#4499" class="InductiveConstructor Operator">⊐</a> <a id="2095" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2095" class="Bound">i≤n</a> <a id="2099" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟧</a> <a id="2101" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2101" class="Bound">Ρ</a> <a id="2103" class="Symbol">=</a> <a id="2105" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⅀⟦</a> <a id="2108" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2090" class="Bound">xs</a> <a id="2111" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1855" class="Function Operator">⟧</a> <a id="2113" class="Symbol">(</a><a id="2114" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#1030" class="Function">drop-1</a> <a id="2121" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2095" class="Bound">i≤n</a> <a id="2125" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2101" class="Bound">Ρ</a><a id="2126" class="Symbol">)</a>
  <a id="2130" class="Symbol">{-#</a> <a id="2134" class="Keyword">INLINE</a> <a id="2141" href="Tactic.RingSolver.Core.Polynomial.Semantics.html#2009" class="Function Operator">⟦_⟧</a> <a id="2145" class="Symbol">#-}</a>

<a id="2150" class="Comment">------------------------------------------------------------------------</a>
<a id="2223" class="Comment">-- Performance</a>
<a id="2238" class="Comment">------------------------------------------------------------------------</a>
<a id="2311" class="Comment">-- As you might imagine, the implementation of the functions above</a>
<a id="2378" class="Comment">-- seriously affect performance. What you might not realise, though,</a>
<a id="2447" class="Comment">-- is that the most important component is the *order of the arguments*.</a>
<a id="2520" class="Comment">-- For instance, if we change:</a>
<a id="2551" class="Comment">--</a>
<a id="2554" class="Comment">--   (x , xs) ⟦∷⟧ (ρ , ρs) = ρ * ⅀⟦ xs ⟧ (ρ , ρs) + ⟦ x ⟧ ρs</a>
<a id="2615" class="Comment">--</a>
<a id="2618" class="Comment">-- To:</a>
<a id="2625" class="Comment">--</a>
<a id="2628" class="Comment">--   (x , xs) ⟦∷⟧ (ρ , ρs) = ⟦ x ⟧ ρs +  ⅀⟦ xs ⟧ (ρ , ρs) * ρ</a>
<a id="2690" class="Comment">--</a>
<a id="2693" class="Comment">-- We get a function that&#39;s several orders of magnitude slower!</a>
</pre></body></html>