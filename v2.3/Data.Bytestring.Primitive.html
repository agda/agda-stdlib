<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Bytestring.Primitive</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Primitive bytestrings: simple bindings to Haskell types and functions</a>
<a id="179" class="Comment">------------------------------------------------------------------------</a>

<a id="253" class="Symbol">{-#</a> <a id="257" class="Keyword">OPTIONS</a> <a id="265" class="Pragma">--cubical-compatible</a> <a id="286" class="Symbol">#-}</a>

<a id="291" class="Keyword">module</a> <a id="298" href="Data.Bytestring.Primitive.html" class="Module">Data.Bytestring.Primitive</a> <a id="324" class="Keyword">where</a>

<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="Agda.Builtin.Nat.html" class="Module">Agda.Builtin.Nat</a> <a id="360" class="Keyword">using</a> <a id="366" class="Symbol">(</a><a id="367" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="370" class="Symbol">)</a>
<a id="372" class="Keyword">open</a> <a id="377" class="Keyword">import</a> <a id="384" href="Agda.Builtin.String.html" class="Module">Agda.Builtin.String</a> <a id="404" class="Keyword">using</a> <a id="410" class="Symbol">(</a><a id="411" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="417" class="Symbol">)</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Agda.Builtin.Word.html" class="Module">Agda.Builtin.Word</a> <a id="449" class="Keyword">using</a> <a id="455" class="Symbol">(</a><a id="456" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a><a id="462" class="Symbol">)</a>
<a id="464" class="Keyword">open</a> <a id="469" class="Keyword">import</a> <a id="476" href="Data.Word8.Primitive.html" class="Module">Data.Word8.Primitive</a> <a id="497" class="Keyword">using</a> <a id="503" class="Symbol">(</a><a id="504" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a><a id="509" class="Symbol">)</a>

<a id="512" class="Comment">-- NB: the bytestring package uses `Int` as the indexing type which</a>
<a id="580" class="Comment">-- Haskell&#39;s base specifies as:</a>
<a id="612" class="Comment">--</a>
<a id="615" class="Comment">-- &gt; A fixed-precision integer type with at least the range</a>
<a id="675" class="Comment">-- &gt; [-2^29 .. 2^29-1]. The exact range for a given implementation</a>
<a id="742" class="Comment">-- &gt; can be determined by using minBound and maxBound from the</a>
<a id="805" class="Comment">-- &gt; Bounded class.</a>
<a id="825" class="Comment">--</a>
<a id="828" class="Comment">-- There is no ergonomic way to encode that in a type-safe manner.</a>
<a id="895" class="Comment">-- For now we use `Word64` with the understanding that using indices</a>
<a id="964" class="Comment">-- greater than 2^29-1 may lead to undefined behaviours...</a>

<a id="1024" class="Keyword">postulate</a>
  <a id="Bytestring"></a><a id="1036" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1047" class="Symbol">:</a> <a id="1049" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="index"></a><a id="1055" href="Data.Bytestring.Primitive.html#1055" class="Postulate">index</a> <a id="1061" class="Symbol">:</a> <a id="1063" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1074" class="Symbol">→</a> <a id="1076" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1083" class="Symbol">→</a> <a id="1085" href="Data.Word8.Primitive.html#454" class="Postulate">Word8</a>
  <a id="length"></a><a id="1093" href="Data.Bytestring.Primitive.html#1093" class="Postulate">length</a> <a id="1100" class="Symbol">:</a> <a id="1102" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1113" class="Symbol">→</a> <a id="1115" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="take"></a><a id="1121" href="Data.Bytestring.Primitive.html#1121" class="Postulate">take</a> <a id="1126" class="Symbol">:</a> <a id="1128" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1135" class="Symbol">→</a> <a id="1137" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1148" class="Symbol">→</a> <a id="1150" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a>
  <a id="drop"></a><a id="1163" href="Data.Bytestring.Primitive.html#1163" class="Postulate">drop</a> <a id="1168" class="Symbol">:</a> <a id="1170" href="Agda.Builtin.Word.html#208" class="Postulate">Word64</a> <a id="1177" class="Symbol">→</a> <a id="1179" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1190" class="Symbol">→</a> <a id="1192" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a>
  <a id="show"></a><a id="1205" href="Data.Bytestring.Primitive.html#1205" class="Postulate">show</a> <a id="1210" class="Symbol">:</a> <a id="1212" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1223" class="Symbol">→</a> <a id="1225" href="Agda.Builtin.String.html#335" class="Postulate">String</a>

<a id="1233" class="Symbol">{-#</a> <a id="1237" class="Keyword">FOREIGN</a> <a id="1245" class="Pragma">GHC</a> <a id="1249" class="Pragma">import</a> <a id="1256" class="Pragma">qualified</a> <a id="1266" class="Pragma">Data.ByteString</a> <a id="1282" class="Pragma">as</a> <a id="1285" class="Pragma">B</a> <a id="1287" class="Symbol">#-}</a>
<a id="1291" class="Symbol">{-#</a> <a id="1295" class="Keyword">FOREIGN</a> <a id="1303" class="Pragma">GHC</a> <a id="1307" class="Pragma">import</a> <a id="1314" class="Pragma">qualified</a> <a id="1324" class="Pragma">Data.Text</a> <a id="1334" class="Pragma">as</a> <a id="1337" class="Pragma">T</a> <a id="1339" class="Symbol">#-}</a>

<a id="1344" class="Symbol">{-#</a> <a id="1348" class="Keyword">COMPILE</a> <a id="1356" class="Keyword">GHC</a> <a id="1360" href="Data.Bytestring.Primitive.html#1036" class="Postulate">Bytestring</a> <a id="1371" class="Pragma">=</a> <a id="1373" class="Pragma">type</a> <a id="1378" class="Pragma">B.ByteString</a> <a id="1391" class="Symbol">#-}</a>
<a id="1395" class="Symbol">{-#</a> <a id="1399" class="Keyword">COMPILE</a> <a id="1407" class="Keyword">GHC</a> <a id="1411" href="Data.Bytestring.Primitive.html#1055" class="Postulate">index</a> <a id="1417" class="Pragma">=</a> <a id="1419" class="Pragma">\</a> <a id="1421" class="Pragma">buf</a> <a id="1425" class="Pragma">idx</a> <a id="1429" class="Pragma">-&gt;</a> <a id="1432" class="Pragma">B.index</a> <a id="1440" class="Pragma">buf</a> <a id="1444" class="Pragma">(fromIntegral</a> <a id="1458" class="Pragma">idx)</a> <a id="1463" class="Symbol">#-}</a>
<a id="1467" class="Symbol">{-#</a> <a id="1471" class="Keyword">COMPILE</a> <a id="1479" class="Keyword">GHC</a> <a id="1483" href="Data.Bytestring.Primitive.html#1093" class="Postulate">length</a> <a id="1490" class="Pragma">=</a> <a id="1492" class="Pragma">\</a> <a id="1494" class="Pragma">buf</a> <a id="1498" class="Pragma">-&gt;</a> <a id="1501" class="Pragma">fromIntegral</a> <a id="1514" class="Pragma">(B.length</a> <a id="1524" class="Pragma">buf)</a> <a id="1529" class="Symbol">#-}</a>
<a id="1533" class="Symbol">{-#</a> <a id="1537" class="Keyword">COMPILE</a> <a id="1545" class="Keyword">GHC</a> <a id="1549" href="Data.Bytestring.Primitive.html#1121" class="Postulate">take</a> <a id="1554" class="Pragma">=</a> <a id="1556" class="Pragma">B.take</a> <a id="1563" class="Pragma">.</a> <a id="1565" class="Pragma">fromIntegral</a> <a id="1578" class="Symbol">#-}</a>
<a id="1582" class="Symbol">{-#</a> <a id="1586" class="Keyword">COMPILE</a> <a id="1594" class="Keyword">GHC</a> <a id="1598" href="Data.Bytestring.Primitive.html#1163" class="Postulate">drop</a> <a id="1603" class="Pragma">=</a> <a id="1605" class="Pragma">B.drop</a> <a id="1612" class="Pragma">.</a> <a id="1614" class="Pragma">fromIntegral</a> <a id="1627" class="Symbol">#-}</a>
<a id="1631" class="Symbol">{-#</a> <a id="1635" class="Keyword">COMPILE</a> <a id="1643" class="Keyword">GHC</a> <a id="1647" href="Data.Bytestring.Primitive.html#1205" class="Postulate">show</a> <a id="1652" class="Pragma">=</a> <a id="1654" class="Pragma">T.pack</a> <a id="1661" class="Pragma">.</a> <a id="1663" class="Pragma">Prelude.show</a> <a id="1676" class="Symbol">#-}</a>
</pre></body></html>